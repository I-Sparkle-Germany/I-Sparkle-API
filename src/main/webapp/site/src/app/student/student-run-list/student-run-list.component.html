<div class="content-block">
  <div class="content-block__header" fxLayout="row" fxLayoutAlign="start center">
    <h2 class="accent-1">My Projects <span *ngIf="loaded">({{ runs.length }})</span></h2>
    <span fxFlex="1 1 auto"></span>
    <button mat-raised-button (click)="showAddRun()" aria-label="Add project" color="accent">
      <mat-icon fxShow fxHide.gt-xs>add</mat-icon>
      <span fxHide fxShow.gt-xs>Add Project</span>
    </button>
  </div>

  <div fxLayout="row" fxLayout.xs="column" *ngIf="runs.length">
    <app-select-menu fxFlex="0 1 auto" fxFlex.xs="100%" [options]="sortOptions" [placeholderText]="'Sort by'"
                     [value]="sortValue" (update)="sortUpdated($event)"></app-select-menu>
    <span fxFlex="1 1 auto" fxHide fxShow.gt-xs></span>
    <app-search-bar fxFlex="0 0 auto" fxFlex.xs="0 0 100%" [placeholderText]="'Search projects'"
                    (update)="searchUpdated($event)"></app-search-bar>
  </div>

  <div *ngIf="search && loaded" class="notice">
    <p>Projects found: {{ filteredRuns.length }}</p>
  </div>
  <div *ngIf="isAddingRun">
    <mat-form-field class="example-full-width">
      <input matInput placeholder="Project Code" value="" (keyup)="checkRunCode($event)">
    </mat-form-field>
    <mat-form-field>
      <mat-select [disabled]="registerRunPeriods.length == 0" [(value)]="selectedPeriod" placeholder="Choose Period">
        <mat-option *ngFor="let period of registerRunPeriods" value="{{ period }}">{{ period }}</mat-option>
      </mat-select>
    </mat-form-field>
    <button mat-raised-button (click)="addRun()"
        [disabled]="registerRunRunCode == '' || selectedPeriod == ''"
        aria-label="Submit add project"
        color="accent">
      <mat-icon fxShow fxHide.gt-xs>submit</mat-icon>
      <span fxHide fxShow.gt-xs>Submit</span>
    </button>
    <button mat-raised-button (click)="cancelAddRun()" aria-label="Cancel add project" color="accent">
      <mat-icon fxShow fxHide.gt-xs>cancel</mat-icon>
      <span fxHide fxShow.gt-xs>Cancel</span>
    </button>
  </div>
  <div class="notice" *ngIf="!runs.length && loaded">
    <p>Hey there! Looks like you don't have any projects yet.</p>
    <p>Ask your teacher for an <b>Access Code</b> and then tap the <b>Add Project</b> button to get started.</p>
  </div>

  <div id="studentRuns" *ngFor="let run of filteredRuns">
    <app-student-run-list-item [run]="run"></app-student-run-list-item>
  </div>
</div>
