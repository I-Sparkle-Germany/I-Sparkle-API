<div class="notice" *ngIf="!runs.length && loaded">
  <p>Hey there! Looks like you haven't used any WISE units in your classes yet.</p>
  <p>Select "Browse Units" to find titles to use with your students.</p>
</div>
<div class="content-block" *ngIf="runs.length">
  <div class="content-block__header dark-theme primary-bg"
       fxLayout="row"
       fxLayout.xs="column"
       fxLayoutGap.sm="16px">
    <app-search-bar fxFlex="0 0 auto"
                    fxFlex.xs="0 0 100%"
                    fxFlex.sm="0 0 calc(50%-8px)"
                    [placeholderText]="'Search'"
                    (update)="searchChanged($event)"></app-search-bar>
    <span fxFlex="1 1 auto" fxHide fxShow.gt-sm></span>
    <app-select-menu fxFlex="0 1 auto"
                     fxFlex.xs="100%"
                     fxFlex.sm="0 0 calc(50%-8px)"
                     [options]="filterOptions"
                     [placeholderText]="'Filter by'"
                     [value]="filterValue"
                     (update)="filterChanged($event)"></app-select-menu>
  </div>
  <div *ngIf="searchValue && loaded" class="notice">
    <p>Units found: {{ filteredRuns.length }}</p>
  </div>

  <app-timeline>
    <ng-container *ngFor="let run of filteredRuns; let i=index">
      <app-timeline-item [active]="!run.endTime">
        <app-timeline-item-label>
          <ng-container *ngIf="run.endTime">
            <ng-container *ngIf="runSpansYears(run)">
              <span class="mat-body-2">{{ run.startTime | amDateFormat:'MMM D' }}</span>
              <span class="secondary-text"> {{ run.startTime | amDateFormat:'Y' }}</span> -
              <span class="mat-body-2"> {{ run.endTime | amDateFormat:'MMM D' }}</span>
              <span class="secondary-text"> {{ run.endTime | amDateFormat:'Y' }}</span>
            </ng-container>
            <ng-container *ngIf="!runSpansYears(run)">
              <span class="mat-body-2">{{ run.startTime | amDateFormat:'MMM D' }}</span>
              <ng-container *ngIf="runSpansDays(run)"> -
                <span class="mat-body-2" *ngIf="runSpansMonths(run)">{{ run.endTime | amDateFormat:'MMM D' }}</span>
                <span class="mat-body-2" *ngIf="!runSpansMonths(run)">{{ run.endTime | amDateFormat:'D' }}</span>
              </ng-container>
              <span class="secondary-text"> {{ run.endTime | amDateFormat:'Y' }}</span>
            </ng-container>
          </ng-container>
          <ng-container *ngIf="!run.endTime">
            <span class="mat-body-2">{{ run.startTime | amDateFormat:'MMM D' }}</span>
            <span class="secondary-text"> {{ run.startTime | amDateFormat:'Y' }}</span>
          </ng-container>
        </app-timeline-item-label>
        <app-timeline-item-content>
          <app-teacher-run-list-item [run]="run" *ngIf="i < 10 || showAll"></app-teacher-run-list-item>
        </app-timeline-item-content>
      </app-timeline-item>
    </ng-container>
  </app-timeline>

  <div class="content-block__actions"
       *ngIf="filteredRuns.length > 10 && !showAll" >
    <a mat-raised-button color="primary" (click)="showAll = true">Show All</a>
  </div>
</div>
