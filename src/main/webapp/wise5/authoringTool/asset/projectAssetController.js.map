{"version":3,"sources":["projectAssetController.es6"],"names":["ProjectAssetController","$filter","$mdDialog","$rootScope","$state","$stateParams","$scope","$timeout","ConfigService","ProjectAssetService","UtilService","$translate","projectId","projectAssets","projectAssetTotalSizeMax","projectAssetUsagePercentage","totalUnusedFilesSize","unusedFilesPercentage","popup","nodeId","componentId","target","targetObject","stateParams","assetSortBy","assetMessage","$watch","totalFileSize","sortAssets","calculateAssetUsage","then","setTotalUnusedFilesSize","sortBy","files","sort","sortAssetsAToZ","reverse","sortAssetsSmallToLarge","a","b","aFileName","fileName","toLowerCase","bFileName","result","aFileSize","fileSize","bFileSize","assetItem","deleteConfirmMessage","doDelete","confirm","deleteAssetItem","newProjectAssets","downloadAssetItem","assetFullURL","getFullAssetItemURL","appropriateFileSize","parent","angular","element","document","body","title","htmlContent","ok","show","params","$broadcast","uploadAssets","uploadAssetsResults","length","uploadedAssetsFilenames","uploadAssetsResult","data","push","config","file","name","assetFilenames","join","$event","selectedAssetItem","assetFileName","assetsDirectoryPath","getProjectAssetsDirectoryPath","previewAssetURL","assetIsImage","assetIsVideo","isImage","isVideo","$","load","hide","go","$inject"],"mappings":"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","file":"projectAssetController.js","sourcesContent":["'use strict';\n\nclass ProjectAssetController {\n\n  constructor($filter,\n        $mdDialog,\n        $rootScope,\n        $state,\n        $stateParams,\n        $scope,\n        $timeout,\n        ConfigService,\n        ProjectAssetService,\n        UtilService) {\n    this.$filter = $filter;\n    this.$mdDialog = $mdDialog;\n    this.$rootScope = $rootScope;\n    this.$state = $state;\n    this.$stateParams = $stateParams;\n    this.$scope = $scope;\n    this.$timeout = $timeout;\n    this.ConfigService = ConfigService;\n    this.ProjectAssetService = ProjectAssetService;\n    this.UtilService = UtilService;\n    this.$translate = this.$filter('translate');\n\n    this.projectId = this.$stateParams.projectId;\n    this.projectAssets = ProjectAssetService.projectAssets;\n    this.projectAssetTotalSizeMax =\n        ProjectAssetService.projectAssetTotalSizeMax;\n    this.projectAssetUsagePercentage =\n        ProjectAssetService.projectAssetUsagePercentage;\n\n    // the amount of space the unused files use\n    this.totalUnusedFilesSize = 0;\n\n    /*\n     * the amount of space the unused files use as a percentage of the\n     * total amount of allowed space for the project\n     */\n    this.unusedFilesPercentage = 0;\n\n    // whether the asset page is being displayed in a popup\n    this.popup = false;\n\n    // the project id that opened this popup\n    this.projectId = null;\n\n    // the node id that opened this popup\n    this.nodeId = null;\n\n    // the component id that opened this popup\n    this.componentId = null;\n\n    // the target to put the asset in\n    this.target = null;\n\n    // the target object to put the asset in\n    this.targetObject = null;\n\n    if (this.$stateParams != null) {\n      let stateParams = this.$stateParams;\n      if (stateParams.popup != null) {\n        this.popup = true;\n      }\n\n      if (stateParams.projectId != null) {\n        this.projectId = stateParams.projectId;\n      }\n\n      if (stateParams.nodeId != null) {\n        this.nodeId = stateParams.nodeId;\n      }\n\n      if (stateParams.componentId != null) {\n        this.componentId = stateParams.componentId;\n      }\n\n      if (stateParams.target != null) {\n        this.target = stateParams.target;\n      }\n\n      if (stateParams.targetObject != null) {\n        this.targetObject = stateParams.targetObject;\n      }\n    }\n\n    // initially, sort assets alphabetically\n    this.assetSortBy = 'aToZ';\n    this.assetMessage = '';\n\n    this.$scope.$watch(\n        () => {\n          return this.projectAssets;\n        },\n        () => {\n          this.projectAssetUsagePercentage =\n              this.projectAssets.totalFileSize / this.projectAssetTotalSizeMax * 100;\n          this.sortAssets(this.assetSortBy);\n        }\n    );\n\n    // when the user changes the sort assets by field, also nperform the sort\n    this.$scope.$watch(\n      () => {\n        return this.assetSortBy;\n      },\n      () => {\n        this.sortAssets(this.assetSortBy);\n      }\n    );\n\n    // calculate whether the assets are used in the project\n    this.ProjectAssetService.calculateAssetUsage()\n        .then((totalUnusedFilesSize) => {\n      this.setTotalUnusedFilesSize(totalUnusedFilesSize);\n    });\n  }\n\n  sortAssets(sortBy) {\n    if (sortBy === 'aToZ') {\n      this.projectAssets.files.sort(this.sortAssetsAToZ);\n    } else if (sortBy === 'zToA') {\n      let files = this.projectAssets.files;\n      this.projectAssets.files = files.sort(this.sortAssetsAToZ).reverse();\n    } else if (sortBy === 'smallToLarge') {\n      this.projectAssets.files.sort(this.sortAssetsSmallToLarge);\n    } else if (sortBy === 'largeToSmall') {\n      let files = this.projectAssets.files;\n      this.projectAssets.files = files.sort(this.sortAssetsSmallToLarge).reverse();\n    }\n  };\n\n  sortAssetsAToZ(a, b) {\n    let aFileName = a.fileName.toLowerCase();\n    let bFileName = b.fileName.toLowerCase();\n    let result = 0;\n\n    if (aFileName < bFileName) {\n      result = -1;\n    } else if (aFileName > bFileName) {\n      result = 1;\n    }\n    return result;\n  };\n\n  sortAssetsSmallToLarge(a, b) {\n    let aFileSize = a.fileSize;\n    let bFileSize = b.fileSize;\n    let result = 0;\n\n    if (aFileSize < bFileSize) {\n      result = -1;\n    } else if (aFileSize > bFileSize) {\n      result = 1;\n    }\n    return result;\n  }\n\n  /**\n   * Delete an asset from the project after confirming with the user\n   * @param assetItem the asset to delete\n   */\n  deleteAsset(assetItem) {\n    let deleteConfirmMessage =\n      this.$translate('areYouSureYouWantToDeleteThisFile')\n      + '\\n\\n' + assetItem.fileName;\n    let doDelete = confirm(deleteConfirmMessage);\n    if (doDelete) {\n      this.ProjectAssetService.deleteAssetItem(assetItem)\n        .then((newProjectAssets) => {\n        this.projectAssets = this.ProjectAssetService.projectAssets;\n        // calculate whether the assets are used in the project\n        this.ProjectAssetService.calculateAssetUsage()\n          .then((totalUnusedFilesSize) => {\n        this.setTotalUnusedFilesSize(totalUnusedFilesSize);\n        });\n      });\n    }\n  }\n\n  downloadAsset(assetItem) {\n    this.ProjectAssetService.downloadAssetItem(assetItem);\n  }\n\n  /**\n   * Show asset image in a popup dialog and give author an option to delete it.\n   */\n  viewAsset(assetItem) {\n    // Append dialog to document.body\n    let assetFullURL = this.ProjectAssetService.getFullAssetItemURL(assetItem);\n    let appropriateFileSize =\n        this.$filter('appropriateSizeText')(assetItem.fileSize);\n    let confirm = this.$mdDialog.confirm()\n      .parent(angular.element(document.body))\n      .title(assetItem.fileName + ' (' + appropriateFileSize + ')')\n      .htmlContent('<img src=\"' + assetFullURL + '\" />')\n      .ok(this.$translate('CLOSE'))\n    this.$mdDialog.show(confirm).then(() => {\n      // Author wants to simply close the dialog\n    }, () => {\n      // Author wants to simply close the dialog\n    });\n  }\n\n  /**\n   * The user has chosen an asset to use, so notify listeners\n   * @param assetItem the asset the user chose\n   */\n  chooseAsset(assetItem) {\n    let params = {\n      assetItem: assetItem,\n      projectId: this.projectId,\n      nodeId: this.nodeId,\n      componentId: this.componentId,\n      target: this.target,\n      targetObject: this.targetObject\n    };\n    this.$rootScope.$broadcast('assetSelected', params);\n  }\n\n  uploadAssetItems(files) {\n    this.ProjectAssetService.uploadAssets(files).then((uploadAssetsResults) => {\n      if (uploadAssetsResults && uploadAssetsResults.length > 0) {\n        let uploadedAssetsFilenames = [];\n        for (let uploadAssetsResult of uploadAssetsResults) {\n          if (typeof uploadAssetsResult.data === 'string') {\n            // there was an error uploading this file, so don't add\n          } else {\n            uploadedAssetsFilenames.push(uploadAssetsResult.config.file.name);\n          }\n        }\n        if (uploadedAssetsFilenames.length > 0) {\n          // show which files were uploaded for 7 seconds\n          this.assetMessage = this.$translate('assetUploadSuccessful',\n              { assetFilenames: uploadedAssetsFilenames.join(', ') });\n          this.$timeout(() => {\n            this.assetMessage = '';\n          }, 7000);\n        }\n      }\n      this.projectAssets = this.ProjectAssetService.projectAssets;\n      // calculate whether the assets are used in the project\n      this.ProjectAssetService.calculateAssetUsage()\n          .then((totalUnusedFilesSize) => {\n        this.setTotalUnusedFilesSize(totalUnusedFilesSize);\n      });\n    });\n  }\n\n  /**\n   * Preview an asset in the right panel\n   * @param $event The event that caused the asset to be previewed. This will\n   * either be a mouseover or click event.\n   * @param assetItem the asset item to preview\n   */\n  previewAsset($event, assetItem) {\n    if (assetItem != null) {\n      this.selectedAssetItem = assetItem;\n      let assetFileName = assetItem.fileName;\n      let assetsDirectoryPath =\n          this.ConfigService.getProjectAssetsDirectoryPath();\n\n      // set the url of the asset so we can preview it\n      this.previewAssetURL = assetsDirectoryPath + '/' + assetFileName;\n\n      // clear these flags\n      this.assetIsImage = false;\n      this.assetIsVideo = false;\n\n      if (this.UtilService.isImage(assetFileName)) {\n        this.assetIsImage = true;\n      } else if(this.UtilService.isVideo(assetFileName)) {\n        this.assetIsVideo = true;\n        $('video').load();\n      }\n    }\n  }\n\n  /**\n   * Close the asset view\n   */\n  exit() {\n    if (this.popup) {\n      // this asset view was opened in a popup\n      this.$mdDialog.hide();\n    } else {\n      // this asset view was opened as a page\n      this.$state.go('root.project', {projectId: this.projectId});\n    }\n  }\n\n  /**\n   * Set the total amount of space the unused files use\n   * @param totalUnusedFilesSize the total amount of space the unused files\n   * use\n   */\n  setTotalUnusedFilesSize(totalUnusedFilesSize) {\n    // set the total amount of space the unused files use\n    this.totalUnusedFilesSize = totalUnusedFilesSize;\n\n    /*\n     * calculate the amount of space the unused files use as a\n     * percentage of the total amount of allowed space for the project\n     */\n    this.unusedFilesPercentage =\n        this.totalUnusedFilesSize / this.projectAssetTotalSizeMax * 100;\n  }\n}\n\nProjectAssetController.$inject = [\n  '$filter',\n  '$mdDialog',\n  '$rootScope',\n  '$state',\n  '$stateParams',\n  '$scope',\n  '$timeout',\n  'ConfigService',\n  'ProjectAssetService',\n  'UtilService'\n];\n\nexport default ProjectAssetController;\n"]}