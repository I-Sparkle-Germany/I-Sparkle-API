{"version":3,"sources":["authoringToolController.es6"],"names":[],"mappings":"AAAA;;;;;;;;;;IAEM;AAEF,aAFE,uBAEF,CAAY,SAAZ,EACY,SADZ,EAEY,MAFZ,EAGY,UAHZ,EAIY,aAJZ,EAKY,cALZ,EAMY,cANZ,EAOc;;;8BATZ,yBASY;;AAEV,aAAK,SAAL,GAAiB,SAAjB,CAFU;AAGV,aAAK,SAAL,GAAiB,SAAjB,CAHU;AAIV,aAAK,MAAL,GAAc,MAAd,CAJU;AAKV,aAAK,UAAL,GAAkB,UAAlB,CALU;AAMV,aAAK,aAAL,GAAqB,aAArB,CANU;AAOV,aAAK,cAAL,GAAsB,cAAtB,CAPU;AAQV,aAAK,cAAL,GAAsB,cAAtB,CARU;;AAUV,eAAO,GAAP,CAAW,oBAAX,EAAiC,YAAM;;AAEnC,kBAAK,UAAL,CAAgB,mBAAhB,EAAqC,IAArC,CAA0C,UAAC,iBAAD,EAAuB;;AAE7D,oBAAI,UAAU,MAAK,SAAL,CAAe,OAAf,GACT,MADS,CACF,QAAQ,OAAR,CAAgB,SAAS,IAAT,CADd,EAET,KAFS,CAEH,iBAFG,EAGT,OAHS,CAGD,iBAHC,EAIT,SAJS,CAIC,iBAJD,EAKT,EALS,CAKN,KALM,EAMT,MANS,CAMF,IANE,CAAV,CAFyD;AAS7D,sBAAK,SAAL,CAAe,IAAf,CAAoB,OAApB,EAA6B,IAA7B,CAAkC,YAAM;AACpC,0BAAK,cAAL,CAAoB,YAApB,GADoC;iBAAN,EAE/B,YAAM;AACL,0BAAK,cAAL,CAAoB,WAApB,GADK;iBAAN,CAFH,CAT6D;aAAvB,CAA1C,CAFmC;SAAN,CAAjC,CAVU;KAPd;;;;;;;;;iBAFE;;mDA6CyB;AACvB,gBAAI,SAAS,KAAT,CADmB;;AAGvB,gBAAI,KAAK,SAAL,CAAe,GAAf,MAAwB,GAAxB,EAA6B;;;;;AAK7B,yBAAS,IAAT,CAL6B;aAAjC;;AAQA,mBAAO,MAAP,CAXuB;;;;;;;;;yCAiBV;;AAEb,iBAAK,SAAL,CAAe,GAAf,CAAmB,SAAnB,EAFa;;;;;;;;;qCAQJ;;;;;AAKT,iBAAK,cAAL,CAAoB,UAApB,GALS;;;;+BAQN;;;;AAEH,iBAAK,cAAL,CAAoB,sBAApB,GAA6C,IAA7C,CAAkD,YAAM;;AAEpD,oBAAI,cAAc,OAAK,aAAL,CAAmB,cAAnB,EAAd,CAFgD;AAGpD,oBAAI,qBAAqB,cAAc,UAAd,CAH2B;AAIpD,uBAAO,QAAP,GAAkB,kBAAlB,CAJoD;aAAN,CAAlD,CAFG;;;;WA9EL;;;AAyFN,wBAAwB,OAAxB,GAAkC,CAAC,WAAD,EAAc,WAAd,EAA2B,QAA3B,EAAqC,YAArC,EAAmD,eAAnD,EAAoE,gBAApE,EAAsF,gBAAtF,CAAlC;;kBAEe","file":"authoringToolController.js","sourcesContent":["'use strict';\n\nclass AuthoringToolController {\n\n    constructor($location,\n                $mdDialog,\n                $scope,\n                $translate,\n                ConfigService,\n                ProjectService,\n                SessionService\n                ) {\n\n        this.$location = $location;\n        this.$mdDialog = $mdDialog;\n        this.$scope = $scope;\n        this.$translate = $translate;\n        this.ConfigService = ConfigService;\n        this.ProjectService = ProjectService;\n        this.SessionService = SessionService;\n\n        $scope.$on('showSessionWarning', () => {\n\n            this.$translate('autoLogoutMessage').then((autoLogoutMessage) => {\n                // Appending dialog to document.body\n                let confirm = this.$mdDialog.confirm()\n                    .parent(angular.element(document.body))\n                    .title('Session Timeout')\n                    .content(autoLogoutMessage)\n                    .ariaLabel('Session Timeout')\n                    .ok('YES')\n                    .cancel('No');\n                this.$mdDialog.show(confirm).then(() => {\n                    this.SessionService.renewSession();\n                }, () => {\n                    this.SessionService.forceLogOut();\n                });\n\n            });\n        });\n    }\n    \n    /**\n     * Check if the author is on the My Projects page in the Authoring Tool\n     * @returns whether the author is on the My Projects page in the Authoring\n     * Tool\n     */\n    isAuthorOnMyProjectsPage() {\n        var result = false;\n        \n        if (this.$location.url() == '/') {\n            /*\n             * the author is on the My Projects page. the url looks like\n             * http://wise.berkeley.edu/author#/\n             */\n            result = true;\n        }\n        \n        return result;\n    }\n    \n    /**\n     * Navigate the user to the My Projects page in the Authoring Tool\n     */\n    goToMyProjects() {\n        // send the user to the My Projects page in the Authoring Tool\n        this.$location.url('/author');\n    }\n    \n    /**\n     * The user has moved the mouse so\n     */\n    mouseMoved() {\n        /*\n         * notify the Session Service that the user has moved the mouse\n         * so we can refresh the session\n         */\n        this.SessionService.mouseMoved();\n    }\n\n    exit() {\n        // notify others that we've finished authoring\n        this.ProjectService.notifyAuthorProjectEnd().then(() => {\n            // send the user to the teacher home page\n            let wiseBaseURL = this.ConfigService.getWISEBaseURL();\n            let teacherHomePageURL = wiseBaseURL + '/teacher';\n            window.location = teacherHomePageURL;\n        })\n    }\n}\n\nAuthoringToolController.$inject = ['$location', '$mdDialog', '$scope', '$translate', 'ConfigService', 'ProjectService', 'SessionService'];\n\nexport default AuthoringToolController;\n"]}