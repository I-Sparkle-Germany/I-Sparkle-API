{"version":3,"sources":["topBar.es6"],"names":["TopBarController","$rootScope","$window","ConfigService","ProjectService","TeacherDataService","workgroupId","getWorkgroupId","parseInt","Math","random","avatarColor","getAvatarColorForWorkgroupId","userName","getMyUserName","themePath","getThemePath","open","$broadcast","$inject","TopBar","bindings","logoPath","projectId","projectTitle","runId","controller","template"],"mappings":"AAAA;;;;;;;;;;IAEMA,gB;AACJ,4BACIC,UADJ,EAEIC,OAFJ,EAGIC,aAHJ,EAIIC,cAJJ,EAKIC,kBALJ,EAKwB;AAAA;;AACtB,SAAKJ,UAAL,GAAkBA,UAAlB;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,aAAL,GAAqBA,aAArB;AACA,SAAKC,cAAL,GAAsBA,cAAtB;AACA,SAAKC,kBAAL,GAA0BA,kBAA1B;;AAEA;AACA,SAAKC,WAAL,GAAmB,KAAKH,aAAL,CAAmBI,cAAnB,EAAnB;;AAEA,QAAI,KAAKD,WAAL,IAAoB,IAAxB,EAA8B;AAC5B;;;;AAIA,WAAKA,WAAL,GAAmBE,SAAS,MAAMC,KAAKC,MAAL,EAAf,CAAnB;AACD;;AAED;AACA,SAAKC,WAAL,GACI,KAAKR,aAAL,CAAmBS,4BAAnB,CAAgD,KAAKN,WAArD,CADJ;;AAGA;AACA,SAAKO,QAAL,GAAgB,KAAKV,aAAL,CAAmBW,aAAnB,EAAhB;;AAEA,SAAKC,SAAL,GAAiB,KAAKX,cAAL,CAAoBY,YAApB,EAAjB;AACD;;AAED;;;;;;;wCAGoB;AAClB,WAAKd,OAAL,CAAae,IAAb,CAAkB,iFAAlB,EAAqG,QAArG;AACD;;AAED;;;;;;6BAGS;AACP;AACA,WAAKhB,UAAL,CAAgBiB,UAAhB,CAA2B,QAA3B;AACD;;;;;AAED;;;6BAGS;AACP;AACA,WAAKjB,UAAL,CAAgBiB,UAAhB,CAA2B,QAA3B;AACD;;;;;;AAGHlB,iBAAiBmB,OAAjB,GAA2B,CACvB,YADuB,EAEvB,SAFuB,EAGvB,eAHuB,EAIvB,gBAJuB,EAKvB,oBALuB,CAA3B;;AAQA,IAAMC,SAAS;AACbC,YAAU;AACRC,cAAU,GADF;AAERC,eAAW,GAFH;AAGRC,kBAAc,GAHN;AAIRC,WAAO;AAJC,GADG;AAObC,cAAY1B,gBAPC;AAQb2B;AARa,CAAf;;kBAsCeP,M","file":"topBar.js","sourcesContent":["\"use strict\";\n\nclass TopBarController {\n  constructor(\n      $rootScope,\n      $window,\n      ConfigService,\n      ProjectService,\n      TeacherDataService) {\n    this.$rootScope = $rootScope;\n    this.$window = $window;\n    this.ConfigService = ConfigService;\n    this.ProjectService = ProjectService;\n    this.TeacherDataService = TeacherDataService;\n\n    // get the teacher workgroup id\n    this.workgroupId = this.ConfigService.getWorkgroupId();\n\n    if (this.workgroupId == null) {\n      /*\n       * the teacher doesn't have a workgroup id so we will use a random\n       * number\n       */\n      this.workgroupId = parseInt(100 * Math.random());\n    }\n\n    // get the avatar color for the teacher\n    this.avatarColor =\n        this.ConfigService.getAvatarColorForWorkgroupId(this.workgroupId);\n\n    // get the teacher name and user name\n    this.userName = this.ConfigService.getMyUserName();\n\n    this.themePath = this.ProjectService.getThemePath();\n  }\n\n  /**\n   * Open the Authoring Tool FAQ Google document in a new tab.\n   */\n  helpButtonClicked() {\n    this.$window.open('https://docs.google.com/document/d/1G8lVtiUlGXLRAyFOvkEdadHYhJhJLW4aor9dol2VzeU', '_blank');\n  }\n\n  /**\n   * Navigate the teacher to the teacher home page\n   */\n  goHome() {\n    // fire the goHome event\n    this.$rootScope.$broadcast('goHome');\n  };\n\n  /**\n   * Log the teacher out of WISE\n   */\n  logOut() {\n    // fire the logOut event\n    this.$rootScope.$broadcast('logOut');\n  };\n}\n\nTopBarController.$inject = [\n    '$rootScope',\n    '$window',\n    'ConfigService',\n    'ProjectService',\n    'TeacherDataService'\n];\n\nconst TopBar = {\n  bindings: {\n    logoPath: '@',\n    projectId: '<',\n    projectTitle: '<',\n    runId: '<'\n  },\n  controller: TopBarController,\n  template:\n    `<md-toolbar class=\"l-header\">\n      <div class=\"md-toolbar-tools\">\n        <span class=\"md-button logo-link\">\n          <a href=\"/wise/teacher\" target=\"_self\">\n            <img ng-src=\"{{ $ctrl.logoPath }}\" alt=\"{{ 'WISE_LOGO' | translate }}\" class=\"logo\" />\n          </a>\n        </span>\n        <h3>\n          <span ng-if=\"$ctrl.projectTitle\" id=\"projectTitleSpan\">{{ $ctrl.projectTitle }}</span>\n          <span ng-if=\"!$ctrl.projectTitle\" id=\"projectTitleSpan\">{{ 'authoringTool' | translate }}</span>\n          <span class=\"md-caption\" ng-if=\"$ctrl.projectId\">\n            ({{ 'PROJECT_ID_DISPLAY' | translate:{id: $ctrl.projectId} }}<span class=\"md-caption\" ng-if=\"$ctrl.runId\"> | {{ 'RUN_ID_DISPLAY' | translate:{id: $ctrl.runId} }}</span>)\n          </span>\n        </h3>\n        <span flex></span>\n        <md-button style=\"text-transform: none;\"\n            ng-click=\"$ctrl.helpButtonClicked()\">{{ 'HELP' | translate }}</md-button>\n        <md-menu id='accountMenu' md-position-mode=\"target-right target\" md-offset=\"8 26\">\n          <md-button aria-label=\"{{ 'USER_MENU' | translate }}\" class=\"md-icon-button\" ng-click=\"$mdMenu.open($event)\">\n            <md-icon md-menu-origin> account_box </md-icon>\n          </md-button>\n          <md-menu-content width=\"5\" class=\"account-menu\">\n            <ng-include src=\"$ctrl.themePath + '/templates/teacherAccountMenu.html'\"></ng-include>\n          </md-menu-content>\n        </md-menu>\n      </div>\n    </md-toolbar>`\n};\n\nexport default TopBar;\n"]}