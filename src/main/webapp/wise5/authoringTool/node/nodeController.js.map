{"version":3,"sources":["nodeController.es6"],"names":[],"mappings":"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","file":"nodeController.js","sourcesContent":["class NodeController {\n    constructor($scope,\n                $state,\n                $stateParams,\n                ProjectService,\n                ConfigService) {\n        this.$scope = $scope;\n        this.$state = $state;\n        this.$stateParams = $stateParams;\n        this.ProjectService = ProjectService;\n        this.ConfigService = ConfigService;\n        this.projectId = $stateParams.projectId;\n        this.nodeId = $stateParams.nodeId;\n        this.showCreateComponent = false;\n        this.selectedComponent = null;\n\n        // the array of component types that can be created\n        this.componentTypes = [\n            {componentType: 'Discussion', componentName: 'Discussion'},\n            {componentType: 'Draw', componentName: 'Draw'},\n            {componentType: 'Embedded', componentName: 'Embedded'},\n            {componentType: 'Graph', componentName: 'Graph'},\n            {componentType: 'HTML', componentName: 'HTML'},\n            {componentType: 'Label', componentName: 'Label'},\n            {componentType: 'Match', componentName: 'Match'},\n            {componentType: 'MultipleChoice', componentName: 'Multiple Choice'},\n            {componentType: 'OpenResponse', componentName: 'Open Response'},\n            {componentType: 'OutsideURL', componentName: 'Outside URL'},\n            {componentType: 'Table', componentName: 'Table'}\n        ];\n\n        // set the drop down to the first item\n        this.selectedComponent = this.componentTypes[0].componentType;\n\n        // get the node\n        this.node = this.ProjectService.getNodeById(this.nodeId);\n\n        // get the components in the node\n        this.components = this.ProjectService.getComponentsByNodeId(this.nodeId);\n    }\n\n    /**\n     * Launch VLE with this current step as the initial step\n     */\n    previewStep() {\n        let previewProjectURL = this.ConfigService.getConfigParam(\"previewProjectURL\");\n        let previewStepURL  = previewProjectURL + \"#/vle/\" + this.nodeId;\n        window.open(previewStepURL);\n    };\n\n    close() {\n        this.$state.go('root.project', {projectId: this.projectId});\n    };\n\n    /**\n     * Create a component in this node\n     */\n    createComponent() {\n\n        // create a component and add it to this node\n        this.ProjectService.createComponent(this.nodeId, this.selectedComponent);\n\n        // save the project\n        this.ProjectService.saveProject();\n\n        // hide the create component elements\n        this.showCreateComponent = false;\n    }\n\n    /**\n     * Move a component up within this node\n     * @param componentId the component id\n     */\n    moveComponentUp(componentId) {\n\n        // move the component up within the node\n        this.ProjectService.moveComponentUp(this.nodeId, componentId);\n\n        // save the project\n        this.ProjectService.saveProject();\n    }\n\n    /**\n     * Move a component up within this node\n     * @param componentId the component id\n     */\n    moveComponentDown(componentId) {\n\n        // move the component down within the node\n        this.ProjectService.moveComponentDown(this.nodeId, componentId);\n\n        // save the project\n        this.ProjectService.saveProject();\n    }\n\n    /**\n     * Delete the component from this node\n     * @param componentId the component id\n     */\n    deleteComponent(componentId) {\n\n        // delete the component from the node\n        this.ProjectService.deleteComponent(this.nodeId, componentId);\n\n        // save the project\n        this.ProjectService.saveProject();\n    }\n\n    /**\n     * The node has changed in the authoring view\n     */\n    authoringViewNodeChanged() {\n        this.ProjectService.saveProject();\n    }\n};\n\nNodeController.$inject = ['$scope', '$state', '$stateParams', 'ProjectService', 'ConfigService'];\n\nexport default NodeController;\n"]}