{"version":3,"sources":["authorNotebookController.es6"],"names":["AuthorNotebookController","$state","$stateParams","$scope","ProjectService","projectId","project","notebook","projectTemplate","getNewProjectTemplate","itemTypes","report","notes","push","saveProject","go","$inject"],"mappings":"AAAA;;;;;;;;;;IAEMA,wB;AAEF,sCAAYC,MAAZ,EAAoBC,YAApB,EAAkCC,MAAlC,EAA0CC,cAA1C,EAA0D;AAAA;;AACtD,aAAKH,MAAL,GAAcA,MAAd;AACA,aAAKC,YAAL,GAAoBA,YAApB;AACA,aAAKC,MAAL,GAAcA,MAAd;AACA,aAAKE,SAAL,GAAiB,KAAKH,YAAL,CAAkBG,SAAnC;AACA,aAAKD,cAAL,GAAsBA,cAAtB;AACA,aAAKE,OAAL,GAAe,KAAKF,cAAL,CAAoBE,OAAnC;;AAEA,YAAI,KAAKA,OAAL,CAAaC,QAAb,IAAyB,IAA7B,EAAmC;AAC/B;AACA,gBAAIC,kBAAkB,KAAKJ,cAAL,CAAoBK,qBAApB,EAAtB;AACA,iBAAKH,OAAL,CAAaC,QAAb,GAAwBC,gBAAgBD,QAAxC;AACH;AACJ;;AAED;;;;;;;wCAGgB;AACZ;AACA,gBAAIC,kBAAkB,KAAKJ,cAAL,CAAoBK,qBAApB,EAAtB;;AAEA,gBAAI,KAAKH,OAAL,CAAaC,QAAb,CAAsBG,SAAtB,CAAgCC,MAAhC,CAAuCC,KAAvC,IAAgD,IAApD,EAA0D;AACtD,qBAAKN,OAAL,CAAaC,QAAb,CAAsBG,SAAtB,CAAgCC,MAAhC,CAAuCC,KAAvC,GAA+C,EAA/C;AACH;AACD,gBAAI,KAAKN,OAAL,CAAaC,QAAb,CAAsBG,SAAtB,CAAgCC,MAAhC,CAAuCC,KAAvC,GAA+C,CAAnD,EAAsD;AAClD,qBAAKN,OAAL,CAAaC,QAAb,CAAsBG,SAAtB,CAAgCC,MAAhC,CAAuCC,KAAvC,CAA6CC,IAA7C,CAAkDL,gBAAgBD,QAAhB,CAAyBG,SAAzB,CAAmCC,MAAnC,CAA0CC,KAA1C,CAAgD,CAAhD,CAAlD;AACH;AACJ;;;+BAEM;AACH,iBAAKR,cAAL,CAAoBU,WAApB;AACA,iBAAKb,MAAL,CAAYc,EAAZ,CAAe,cAAf,EAA+B,EAACV,WAAW,KAAKA,SAAjB,EAA/B;AACH;;;;;;AAGLL,yBAAyBgB,OAAzB,GAAmC,CAAC,QAAD,EAAW,cAAX,EAA2B,QAA3B,EAAqC,gBAArC,CAAnC;;kBAEehB,wB","file":"authorNotebookController.js","sourcesContent":["'use strict';\n\nclass AuthorNotebookController {\n\n    constructor($state, $stateParams, $scope, ProjectService) {\n        this.$state = $state;\n        this.$stateParams = $stateParams;\n        this.$scope = $scope;\n        this.projectId = this.$stateParams.projectId;\n        this.ProjectService = ProjectService;\n        this.project = this.ProjectService.project;\n\n        if (this.project.notebook == null) {\n            // some old projects may not have the notebook settings, so copy default settings from template project.\n            let projectTemplate = this.ProjectService.getNewProjectTemplate();\n            this.project.notebook = projectTemplate.notebook;\n        }\n    }\n\n    /**\n     * Adds a new report note item to this project's notebook. Currently we limit 1 report note per project.\n     */\n    addReportNote() {\n        // some old projects may not have the notebook settings, so copy default settings from template project.\n        let projectTemplate = this.ProjectService.getNewProjectTemplate();\n\n        if (this.project.notebook.itemTypes.report.notes == null) {\n            this.project.notebook.itemTypes.report.notes = [];\n        }\n        if (this.project.notebook.itemTypes.report.notes < 1) {\n            this.project.notebook.itemTypes.report.notes.push(projectTemplate.notebook.itemTypes.report.notes[0]);\n        }\n    }\n\n    exit() {\n        this.ProjectService.saveProject();\n        this.$state.go('root.project', {projectId: this.projectId});\n    }\n}\n\nAuthorNotebookController.$inject = ['$state', '$stateParams', '$scope', 'ProjectService'];\n\nexport default AuthorNotebookController;"]}