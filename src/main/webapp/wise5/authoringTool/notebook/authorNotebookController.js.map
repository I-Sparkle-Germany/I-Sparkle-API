{"version":3,"sources":["authorNotebookController.es6"],"names":["AuthorNotebookController","$filter","$state","$stateParams","$scope","ProjectService","$translate","projectId","project","notebook","projectTemplate","getNewProjectTemplate","itemTypes","report","notes","push","commitMessage","saveProject","go","$inject"],"mappings":"AAAA;;;;;;;;;;IAEMA,wB;AAEF,sCAAYC,OAAZ,EACYC,MADZ,EAEYC,YAFZ,EAGYC,MAHZ,EAIYC,cAJZ,EAI4B;AAAA;;AAExB,aAAKJ,OAAL,GAAeA,OAAf;AACA,aAAKC,MAAL,GAAcA,MAAd;AACA,aAAKC,YAAL,GAAoBA,YAApB;AACA,aAAKC,MAAL,GAAcA,MAAd;AACA,aAAKC,cAAL,GAAsBA,cAAtB;AACA,aAAKC,UAAL,GAAkB,KAAKL,OAAL,CAAa,WAAb,CAAlB;AACA,aAAKM,SAAL,GAAiB,KAAKJ,YAAL,CAAkBI,SAAnC;AACA,aAAKC,OAAL,GAAe,KAAKH,cAAL,CAAoBG,OAAnC;;AAEA,YAAI,KAAKA,OAAL,CAAaC,QAAb,IAAyB,IAA7B,EAAmC;AAC/B;AACA,gBAAIC,kBAAkB,KAAKL,cAAL,CAAoBM,qBAApB,EAAtB;AACA,iBAAKH,OAAL,CAAaC,QAAb,GAAwBC,gBAAgBD,QAAxC;AACH;AACJ;;AAED;;;;;;;wCAGgB;AACZ;AACA,gBAAIC,kBAAkB,KAAKL,cAAL,CAAoBM,qBAApB,EAAtB;;AAEA,gBAAI,KAAKH,OAAL,CAAaC,QAAb,CAAsBG,SAAtB,CAAgCC,MAAhC,CAAuCC,KAAvC,IAAgD,IAApD,EAA0D;AACtD,qBAAKN,OAAL,CAAaC,QAAb,CAAsBG,SAAtB,CAAgCC,MAAhC,CAAuCC,KAAvC,GAA+C,EAA/C;AACH;AACD,gBAAI,KAAKN,OAAL,CAAaC,QAAb,CAAsBG,SAAtB,CAAgCC,MAAhC,CAAuCC,KAAvC,GAA+C,CAAnD,EAAsD;AAClD,qBAAKN,OAAL,CAAaC,QAAb,CAAsBG,SAAtB,CAAgCC,MAAhC,CAAuCC,KAAvC,CAA6CC,IAA7C,CAAkDL,gBAAgBD,QAAhB,CAAyBG,SAAzB,CAAmCC,MAAnC,CAA0CC,KAA1C,CAAgD,CAAhD,CAAlD;AACH;AACJ;;;+BAEM;AACH,gBAAIE,gBAAgB,KAAKV,UAAL,CAAgB,uBAAhB,CAApB;;AAEA,iBAAKD,cAAL,CAAoBY,WAApB,CAAgCD,aAAhC;AACA,iBAAKd,MAAL,CAAYgB,EAAZ,CAAe,cAAf,EAA+B,EAACX,WAAW,KAAKA,SAAjB,EAA/B;AACH;;;;;;AAGLP,yBAAyBmB,OAAzB,GAAmC,CAC/B,SAD+B,EAE/B,QAF+B,EAG/B,cAH+B,EAI/B,QAJ+B,EAK/B,gBAL+B,CAAnC;;kBAOenB,wB","file":"authorNotebookController.js","sourcesContent":["'use strict';\n\nclass AuthorNotebookController {\n\n    constructor($filter,\n                $state,\n                $stateParams,\n                $scope,\n                ProjectService) {\n\n        this.$filter = $filter;\n        this.$state = $state;\n        this.$stateParams = $stateParams;\n        this.$scope = $scope;\n        this.ProjectService = ProjectService;\n        this.$translate = this.$filter('translate');\n        this.projectId = this.$stateParams.projectId;\n        this.project = this.ProjectService.project;\n\n        if (this.project.notebook == null) {\n            // some old projects may not have the notebook settings, so copy default settings from template project.\n            let projectTemplate = this.ProjectService.getNewProjectTemplate();\n            this.project.notebook = projectTemplate.notebook;\n        }\n    }\n\n    /**\n     * Adds a new report note item to this project's notebook. Currently we limit 1 report note per project.\n     */\n    addReportNote() {\n        // some old projects may not have the notebook settings, so copy default settings from template project.\n        let projectTemplate = this.ProjectService.getNewProjectTemplate();\n\n        if (this.project.notebook.itemTypes.report.notes == null) {\n            this.project.notebook.itemTypes.report.notes = [];\n        }\n        if (this.project.notebook.itemTypes.report.notes < 1) {\n            this.project.notebook.itemTypes.report.notes.push(projectTemplate.notebook.itemTypes.report.notes[0]);\n        }\n    }\n\n    exit() {\n        let commitMessage = this.$translate('madeChangesToNotebook');\n\n        this.ProjectService.saveProject(commitMessage);\n        this.$state.go('root.project', {projectId: this.projectId});\n    }\n}\n\nAuthorNotebookController.$inject = [\n    '$filter',\n    '$state',\n    '$stateParams',\n    '$scope',\n    'ProjectService'];\n\nexport default AuthorNotebookController;\n"]}