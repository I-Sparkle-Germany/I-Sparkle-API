{"version":3,"sources":["wiseLinkAuthoringController.es6"],"names":["WISELinkAuthoringController","$rootScope","$stateParams","$mdDialog","ProjectService","projectId","nodeId","componentId","target","items","idToOrder","wiseLinkNodeId","wiseLinkComponentId","wiseLinkType","wiseLinkText","wiseLinkClass","position","getNodePositionById","title","getNodeTitleByNodeId","isGroupNode","getComponentsByNodeId","alert","params","$broadcast","hide","$inject"],"mappings":"AAAA;;;;;;;;;;IAEMA,2B;AAEJ,uCAAYC,UAAZ,EACMC,YADN,EAEMC,SAFN,EAGMC,cAHN,EAGsB;AAAA;;AAEpB,SAAKH,UAAL,GAAkBA,UAAlB;AACA,SAAKC,YAAL,GAAoBA,YAApB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,cAAL,GAAsBA,cAAtB;;AAEA;;;;AAIA,SAAKC,SAAL,GAAiBH,aAAaG,SAA9B;AACA,SAAKC,MAAL,GAAcJ,aAAaI,MAA3B;AACA,SAAKC,WAAL,GAAmBL,aAAaK,WAAhC;AACA,SAAKC,MAAL,GAAcN,aAAaM,MAA3B;;AAEA;;;;AAIA,SAAKC,KAAL,GAAa,KAAKL,cAAL,CAAoBM,SAAjC;;AAEA;AACA,SAAKC,cAAL,GAAsB,EAAtB;AACA,SAAKC,mBAAL,GAA2B,EAA3B;AACA,SAAKC,YAAL,GAAoB,MAApB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACD;;AAED;;;;;;;4CAGwB;AACtB,UAAI,KAAKJ,cAAL,IAAuB,IAAvB,IAA+B,KAAKA,cAAL,IAAuB,EAA1D,EAA8D;AAC5D;AACA,aAAKC,mBAAL,GAA2B,EAA3B;AACA,YAAII,WAAW,KAAKC,mBAAL,CAAyB,KAAKN,cAA9B,CAAf;AACA,YAAIO,QAAQ,KAAKC,oBAAL,CAA0B,KAAKR,cAA/B,CAAZ;;AAEA;AACA,aAAKG,YAAL,GAAoBE,WAAW,IAAX,GAAkBE,KAAtC;AACD;AACF;;AAED;;;;;;;;wCAKoBZ,M,EAAQ;AAC1B,aAAO,KAAKF,cAAL,CAAoBa,mBAApB,CAAwCX,MAAxC,CAAP;AACD;;AAED;;;;;;;;yCAKqBA,M,EAAQ;AAC3B,aAAO,KAAKF,cAAL,CAAoBe,oBAApB,CAAyCb,MAAzC,CAAP;AACD;;AAED;;;;;;;;gCAKYA,M,EAAQ;AAClB,aAAO,KAAKF,cAAL,CAAoBgB,WAApB,CAAgCd,MAAhC,CAAP;AACD;;AAED;;;;;;;;0CAKsBA,M,EAAQ;AAC5B,aAAO,KAAKF,cAAL,CAAoBiB,qBAApB,CAA0Cf,MAA1C,CAAP;AACD;;AAED;;;;;;;;qCAKiB;AACf,UAAI,KAAKK,cAAL,IAAuB,IAAvB,IAA+B,KAAKA,cAAL,IAAuB,EAA1D,EAA8D;AAC5D;AACAW,cAAM,yBAAN;AACD,OAHD,MAGO,IAAI,KAAKR,YAAL,IAAqB,IAArB,IAA6B,KAAKA,YAAL,IAAqB,EAAtD,EAA0D;AAC/D;AACAQ,cAAM,sBAAN;AACD,OAHM,MAGA;AACL;AACA,YAAIC,SAAS;AACXlB,qBAAW,KAAKA,SADL;AAEXC,kBAAQ,KAAKA,MAFF;AAGXC,uBAAa,KAAKA,WAHP;AAIXC,kBAAQ,KAAKA,MAJF;AAKXG,0BAAgB,KAAKA,cALV;AAMXC,+BAAqB,KAAKA,mBANf;AAOXC,wBAAc,KAAKA,YAPR;AAQXC,wBAAc,KAAKA,YARR;AASXC,yBAAe,KAAKA;AATT,SAAb;AAWA,aAAKd,UAAL,CAAgBuB,UAAhB,CAA2B,gBAA3B,EAA6CD,MAA7C;AACD;AACF;;AAED;;;;;;qCAGiB;AACf,WAAKpB,SAAL,CAAesB,IAAf;AACD;;;;;;AAGHzB,4BAA4B0B,OAA5B,GAAsC,CACpC,YADoC,EAEpC,cAFoC,EAGpC,WAHoC,EAIpC,gBAJoC,CAAtC;;kBAOe1B,2B","file":"wiseLinkAuthoringController.js","sourcesContent":["'use strict';\n\nclass WISELinkAuthoringController {\n\n  constructor($rootScope,\n        $stateParams,\n        $mdDialog,\n        ProjectService) {\n\n    this.$rootScope = $rootScope;\n    this.$stateParams = $stateParams;\n    this.$mdDialog = $mdDialog;\n    this.ProjectService = ProjectService;\n\n    /*\n     * get the node id and component id of the component that has opened\n     * the WISE link authoring popup\n     */\n    this.projectId = $stateParams.projectId;\n    this.nodeId = $stateParams.nodeId;\n    this.componentId = $stateParams.componentId;\n    this.target = $stateParams.target;\n\n    /*\n     * get the mapping of node id to order which is used to display\n     * the steps in the drop down\n     */\n    this.items = this.ProjectService.idToOrder;\n\n    // the model fields for the WISE link authoring\n    this.wiseLinkNodeId = '';\n    this.wiseLinkComponentId = '';\n    this.wiseLinkType = 'link';\n    this.wiseLinkText = '';\n    this.wiseLinkClass = '';\n  }\n\n  /**\n   * The node id changed\n   */\n  wiseLinkNodeIdChanged() {\n    if (this.wiseLinkNodeId != null && this.wiseLinkNodeId != '') {\n      // reset wiseLinkComonponentId\n      this.wiseLinkComponentId = '';\n      let position = this.getNodePositionById(this.wiseLinkNodeId);\n      let title = this.getNodeTitleByNodeId(this.wiseLinkNodeId);\n\n      // set the link text to display the position and title\n      this.wiseLinkText = position + ': ' + title;\n    }\n  }\n\n  /**\n   * Get the node position for a node\n   * @param nodeId the node id\n   * @returns the node position\n   */\n  getNodePositionById(nodeId) {\n    return this.ProjectService.getNodePositionById(nodeId);\n  }\n\n  /**\n   * Get the node title for a node\n   * @param nodeId the node id\n   * @returns the node title\n   */\n  getNodeTitleByNodeId(nodeId) {\n    return this.ProjectService.getNodeTitleByNodeId(nodeId);\n  }\n\n  /**\n   * Check if a node id is for a group\n   * @param nodeId\n   * @returns whether the node is a group node\n   */\n  isGroupNode(nodeId) {\n    return this.ProjectService.isGroupNode(nodeId);\n  }\n\n  /**\n   * Get the components in a step\n   * @param nodeId get the components in the step\n   * @returns the components in the step\n   */\n  getComponentsByNodeId(nodeId) {\n    return this.ProjectService.getComponentsByNodeId(nodeId);\n  }\n\n  /**\n   * Fire an event to create the WISE Link. Listeners will be the ones that\n   * actually create the WISE Link. The event that is fired will provide\n   * the parameters for the WISE Link.\n   */\n  createWISELink() {\n    if (this.wiseLinkNodeId == null || this.wiseLinkNodeId == '') {\n      // a step was not chosen yet\n      alert('You must select a step.');\n    } else if (this.wiseLinkText == null || this.wiseLinkText == '') {\n      // link text is empty and must be provided\n      alert('You must enter text.');\n    } else {\n      // fire the event to notify listeners that a WISE Link should be created\n      let params = {\n        projectId: this.projectId,\n        nodeId: this.nodeId,\n        componentId: this.componentId,\n        target: this.target,\n        wiseLinkNodeId: this.wiseLinkNodeId,\n        wiseLinkComponentId: this.wiseLinkComponentId,\n        wiseLinkType: this.wiseLinkType,\n        wiseLinkText: this.wiseLinkText,\n        wiseLinkClass: this.wiseLinkClass\n      };\n      this.$rootScope.$broadcast('createWISELink', params);\n    }\n  }\n\n  /**\n   * Cancel the WISE Link authoring\n   */\n  cancelWISELink() {\n    this.$mdDialog.hide();\n  }\n}\n\nWISELinkAuthoringController.$inject = [\n  '$rootScope',\n  '$stateParams',\n  '$mdDialog',\n  'ProjectService'\n];\n\nexport default WISELinkAuthoringController;\n"]}