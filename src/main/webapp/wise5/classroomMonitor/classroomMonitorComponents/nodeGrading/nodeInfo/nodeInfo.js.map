{"version":3,"sources":["nodeInfo.es6"],"names":["NodeInfoController","ProjectService","$onInit","nodeContent","getNodeContent","components","getComponents","color","getNodeIconByNodeId","nodeId","result","node","getNodeById","c","length","component","isDisabled","lockAfterSubmit","hasWork","componentHasWork","rubric","replaceAssetPaths","$inject","NodeInfo","bindings","controller","template"],"mappings":"AAAA;;;;;;;;;;IAEMA,kB;AACF,gCAAYC,cAAZ,EAA4B;AAAA;;AAAA;;AACxB,aAAKA,cAAL,GAAsBA,cAAtB;;AAEA,aAAKC,OAAL,GAAe,YAAM;AACjB,kBAAKC,WAAL,GAAmB,MAAKC,cAAL,EAAnB;AACA,kBAAKC,UAAL,GAAkB,MAAKC,aAAL,EAAlB;;AAEA,kBAAKC,KAAL,GAAa,MAAKN,cAAL,CAAoBO,mBAApB,CAAwC,MAAKC,MAA7C,EAAqDF,KAAlE;AACH,SALD;AAMH;;;;;;AAED;;;;yCAIiB;AACb,gBAAIG,SAAS,IAAb;;AAEA,gBAAIC,OAAO,KAAKV,cAAL,CAAoBW,WAApB,CAAgC,KAAKH,MAArC,CAAX;AACA,gBAAIE,QAAQ,IAAZ,EAAkB;AACd;AACAD,yBAASC,IAAT;AACH;;AAED,mBAAOD,MAAP;AACH;;AAED;;;;;;;wCAIgB;AACZ,gBAAIL,aAAa,IAAjB;;AAEA,gBAAI,KAAKF,WAAT,EAAsB;AAClBE,6BAAa,KAAKF,WAAL,CAAiBE,UAA9B;;AAEA,qBAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAIR,WAAWS,MAA/B,EAAuCD,GAAvC,EAA4C;AACxC,wBAAIE,YAAYV,WAAWQ,CAAX,CAAhB;;AAEA,wBAAI,KAAKG,UAAT,EAAqB;AACjBD,kCAAUC,UAAV,GAAuB,IAAvB;AACH;;AAED,wBAAI,KAAKb,WAAL,CAAiBc,eAArB,EAAsC;AAClCF,kCAAUE,eAAV,GAA4B,IAA5B;AACH;;AAEDF,8BAAUG,OAAV,GAAoB,KAAKjB,cAAL,CAAoBkB,gBAApB,CAAqCJ,SAArC,CAApB;AACH;AACJ;;AAED,mBAAOV,UAAP;AACH;;AAED;;;;;;;;gDAKwBe,M,EAAQ;AAC5B,mBAAO,KAAKnB,cAAL,CAAoBoB,iBAApB,CAAsCD,MAAtC,CAAP;AACH;;;;;;AAGLpB,mBAAmBsB,OAAnB,GAA6B,CACzB,gBADyB,CAA7B;;AAIA,IAAMC,WAAW;AACbC,cAAU;AACNf,gBAAQ;AADF,KADG;AAIbgB,gBAAYzB,kBAJC;AAKb0B;AALa,CAAjB;;kBAqDeH,Q","file":"nodeInfo.js","sourcesContent":["\"use strict\";\r\n\r\nclass NodeInfoController {\r\n    constructor(ProjectService) {\r\n        this.ProjectService = ProjectService;\r\n\r\n        this.$onInit = () => {\r\n            this.nodeContent = this.getNodeContent();\r\n            this.components = this.getComponents();\r\n\r\n            this.color = this.ProjectService.getNodeIconByNodeId(this.nodeId).color;\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Get the content for this node\r\n     * @return object with the node content\r\n     */\r\n    getNodeContent() {\r\n        let result = null;\r\n\r\n        let node = this.ProjectService.getNodeById(this.nodeId);\r\n        if (node != null) {\r\n            // field that will hold the node content\r\n            result = node;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Get the components for this node with student work.\r\n     * @return array that contains the content for the components\r\n     */\r\n    getComponents() {\r\n        let components = null;\r\n\r\n        if (this.nodeContent) {\r\n            components = this.nodeContent.components;\r\n\r\n            for (let c = 0; c < components.length; c++) {\r\n                let component = components[c];\r\n\r\n                if (this.isDisabled) {\r\n                    component.isDisabled = true;\r\n                }\r\n\r\n                if (this.nodeContent.lockAfterSubmit) {\r\n                    component.lockAfterSubmit = true;\r\n                }\r\n\r\n                component.hasWork = this.ProjectService.componentHasWork(component);\r\n            }\r\n        }\r\n\r\n        return components;\r\n    }\r\n\r\n    /**\r\n     * Get a rubric with the wise asset paths replaced\r\n     * @param rubric string\r\n     * @return string containing rubric html content\r\n     */\r\n    getRubricWithAssetPaths(rubric) {\r\n        return this.ProjectService.replaceAssetPaths(rubric);\r\n    }\r\n}\r\n\r\nNodeInfoController.$inject = [\r\n    'ProjectService'\r\n];\r\n\r\nconst NodeInfo = {\r\n    bindings: {\r\n        nodeId: '@',\r\n    },\r\n    controller: NodeInfoController,\r\n    template:\r\n        `<md-card ng-if=\"$ctrl.nodeContent.rubric\" class=\"annotations annotations--info\">\r\n            <md-card-title class=\"annotations__header\">\r\n                <div class=\"annotations__avatar md-avatar avatar--icon md-36 avatar md-whiteframe-1dp\">\r\n                    <md-icon class=\"annotations__icon md-36\">info</md-icon>\r\n                </div>\r\n                <div class=\"annotations__title\" layout=\"row\" flex>\r\n                    <span>{{ 'STEP_INFO' | translate }}</span>\r\n                </div>\r\n            </md-card-title>\r\n            <md-card-content class=\"annotations__body md-body-1\">\r\n                <div ng-bind-html=\"$ctrl.getRubricWithAssetPaths($ctrl.nodeContent.rubric)\"></div>\r\n            </md-card-content>\r\n        </md-card>\r\n        <md-card class=\"node-info node-content\" style=\"border-color: {{ $ctrl.color }};\">\r\n            <md-card-content>\r\n                <div id=\"{{component.id}}\"\r\n                     class=\"component-section\"\r\n                     ng-repeat='component in $ctrl.components'>\r\n                    <md-divider class=\"divider divider--dashed\" ng-if=\"!$first\"></md-divider>\r\n                    <component ng-if='component.showPreviousWorkNodeId != null && component.showPreviousWorkComponentId != null && component.showPreviousWorkNodeId != \"\" && component.showPreviousWorkComponentId != \"\"'\r\n                               node-id='{{component.showPreviousWorkNodeId}}'\r\n                               component-id='{{component.showPreviousWorkComponentId}}'\r\n                               original-node-id={{$ctrl.nodeId}}\r\n                               original-component-id={{component.id}}\r\n                               mode='student'></component>\r\n                    <component ng-if='component.showPreviousWorkNodeId == null || component.showPreviousWorkComponentId == null || component.showPreviousWorkNodeId == \"\" || component.showPreviousWorkComponentId == \"\"'\r\n                               node-id='{{$ctrl.nodeId}}'\r\n                               component-id='{{component.id}}'\r\n                               mode='student'></component>\r\n                    <md-card class=\"annotations annotations--info\" ng-if=\"component.rubric\">\r\n                       <md-card-title class=\"annotations__header\">\r\n                           <div class=\"annotations__avatar md-avatar avatar--icon md-36 avatar md-whiteframe-1dp\">\r\n                               <md-icon class=\"annotations__icon md-36\">info</md-icon>\r\n                           </div>\r\n                           <div class=\"annotations__title\" layout=\"row\" flex>\r\n                               <span>{{ 'TEACHING_TIPS' | translate }}</span>\r\n                           </div>\r\n                       </md-card-title>\r\n                       <md-card-content class=\"annotations__body md-body-1\">\r\n                           <div ng-bind-html=\"$ctrl.getRubricWithAssetPaths(component.rubric)\"></div>\r\n                       </md-card-content>\r\n                    </md-card>\r\n                </div>\r\n            </md-card-content>\r\n        </md-card>`\r\n};\r\n\r\nexport default NodeInfo;\r\n"]}