{"version":3,"sources":["workgroupItem.es6"],"names":["WorkgroupItemController","$filter","$scope","ProjectService","$translate","nodeHasWork","nodeId","statusText","$onChanges","changesObj","hiddenComponents","angular","copy","currentValue","maxScore","hasMaxScore","workgroupData","hasAlert","hasNewAlert","status","completionStatus","score","update","completion","statusClass","value","event","onUpdateHidden","expand","onUpdateExpand","workgroupId","$inject","WorkgroupItem","bindings","canViewStudentNames","controller","template"],"mappings":"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","file":"workgroupItem.js","sourcesContent":["\"use strict\";\n\nclass WorkgroupItemController {\n    constructor($filter,\n                $scope,\n                ProjectService) {\n\n        this.$filter = $filter;\n        this.$scope = $scope;\n        this.ProjectService = ProjectService;\n\n        this.$translate = this.$filter('translate');\n        this.nodeHasWork = this.ProjectService.nodeHasWork(this.nodeId);\n        this.statusText = '';\n\n        this.$onChanges = (changesObj) => {\n            if (changesObj.hiddenComponents) {\n                this.hiddenComponents = angular.copy(changesObj.hiddenComponents.currentValue);\n            }\n\n            if (changesObj.maxScore) {\n                this.hasMaxScore = typeof changesObj.maxScore.currentValue === 'number';\n            }\n\n            if (changesObj.workgroupData) {\n                let workgroupData = angular.copy(changesObj.workgroupData.currentValue);\n                this.hasAlert = workgroupData.hasAlert;\n                this.hasNewAlert = workgroupData.hasNewAlert;\n                this.status = workgroupData.completionStatus;\n                this.score = workgroupData.score > -1 ? workgroupData.score : '-';\n            }\n\n            this.update();\n        };\n    };\n\n    update() {\n        let completion = 0;\n\n        switch (this.status) {\n            case 2:\n                this.statusClass = 'success';\n\n                if (this.nodeHasWork) {\n                    this.statusText = this.$translate('completed');\n                } else {\n                    this.statusText = this.$translate('visited');\n                }\n                break;\n            case 1:\n                this.statusClass = 'text';\n\n                this.statusText = this.$translate('partiallyCompleted');\n                break;\n\n            default:\n                this.statusClass = 'text-secondary';\n\n                if (this.nodeHasWork) {\n                    this.statusText = this.$translate('noWork');\n                } else {\n                    this.statusText = this.$translate('notVisited');\n                }\n        }\n\n        if (this.hasNewAlert) {\n            this.statusClass = 'warn';\n        }\n    }\n\n    updateHiddenComponents(value, event) {\n        this.onUpdateHidden({value: value, event: event});\n    }\n\n    toggleExpand() {\n        let expand = !this.expand;\n        this.onUpdateExpand({workgroupId: this.workgroupId, value: expand});\n    }\n}\n\nWorkgroupItemController.$inject = [\n    '$filter',\n    '$scope',\n    'ProjectService'\n];\n\nconst WorkgroupItem = {\n    bindings: {\n        canViewStudentNames: '<',\n        expand: '<',\n        maxScore: '<',\n        nodeId: '<',\n        workgroupId: '<',\n        workgroupData: '<',\n        hiddenComponents: '<',\n        onUpdateHidden: '&',\n        onUpdateExpand: '&'\n    },\n    controller: WorkgroupItemController,\n    template:\n        `<md-list-item class=\"list-item list-item-condensed md-whiteframe-z1\"\n                       ng-class=\"{'list-item--warn': $ctrl.statusClass === 'warn', 'list-item--info': $ctrl.statusClass === 'info', 'list-item--expanded': $ctrl.showWork}\"\n                       ng-click=\"$ctrl.toggleExpand()\"\n                       layout-wrap>\n            <div class=\"md-list-item-text\" layout=\"row\" flex>\n                <div flex layout=\"row\" layout-align=\"start center\">\n                    <workgroup-info has-alert=\"$ctrl.hasAlert\" has-new-alert=\"$ctrl.hasNewAlert\" usernames=\"{{$ctrl.workgroupData.usernames}}\" workgroup-id=\"$ctrl.workgroupId\"></workgroup-info>\n                </div>\n                <div flex=\"30\" layout=\"row\" layout-align=\"center center\">\n                    <workgroup-node-status status-text=\"{{$ctrl.statusText}}\" status-class=\"{{$ctrl.statusClass}}\"></workgroup-node-status>\n                </div>\n                <div ng-if=\"$ctrl.hasMaxScore\" flex=\"20\" layout=\"row\" layout-align=\"center center\">\n                    <workgroup-node-score score=\"{{$ctrl.score}}\" max-score=\"{{$ctrl.maxScore}}\"></workgroup-node-score>\n                </div>\n            </div>\n        </md-list-item>\n        <workgroup-node-grading workgroup-id=\"$ctrl.workgroupId\"\n                                node-id=\"{{$ctrl.nodeId}}\"\n                                ng-if=\"$ctrl.expand\"\n                                hidden-components=\"$ctrl.hiddenComponents\"\n                                on-update=\"$ctrl.updateHiddenComponents(value, event)\"></workgroup-node-grading>`\n};\n\nexport default WorkgroupItem;\n"]}