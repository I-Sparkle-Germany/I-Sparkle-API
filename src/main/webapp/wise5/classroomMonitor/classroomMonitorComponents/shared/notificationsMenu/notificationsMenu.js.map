{"version":3,"sources":["notificationsMenu.es6"],"names":["NotificationsMenuController","$filter","$mdDialog","NotificationService","ProjectService","$translate","nodeId","getNodePositionAndTitleByNodeId","ev","confirm","parent","angular","element","$","ariaLabel","textContent","targetEvent","ok","cancel","show","then","dismissAllNotifications","newNotifications","map","newNotification","dismissNotification","notification","$inject","NotificationsMenu","bindings","dismissedNotifications","template","controller"],"mappings":"AAAA;;;;;;;;;;IAEMA,2B;AACF,yCAAYC,OAAZ,EACYC,SADZ,EAEYC,mBAFZ,EAGYC,cAHZ,EAG4B;AAAA;;AACxB,aAAKH,OAAL,GAAeA,OAAf;AACA,aAAKC,SAAL,GAAiBA,SAAjB;AACA,aAAKC,mBAAL,GAA2BA,mBAA3B;AACA,aAAKC,cAAL,GAAsBA,cAAtB;;AAEA,aAAKC,UAAL,GAAkB,KAAKJ,OAAL,CAAa,WAAb,CAAlB;AACH;;;;wDAE+BK,M,EAAQ;AACpC,mBAAO,KAAKF,cAAL,CAAoBG,+BAApB,CAAoDD,MAApD,CAAP;AACH;;AAED;;;;;;uDAG+BE,E,EAAI;AAAA;;AAC/B,gBAAIC,UAAU,KAAKP,SAAL,CAAeO,OAAf,GACTC,MADS,CACFC,QAAQC,OAAR,CAAgBC,EAAE,qCAAF,CAAhB,CADE,EACwD;AADxD,aAETC,SAFS,CAEC,KAAKT,UAAL,CAAgB,2BAAhB,CAFD,EAGTU,WAHS,CAGG,KAAKV,UAAL,CAAgB,6BAAhB,CAHH,EAITW,WAJS,CAIGR,EAJH,EAKTS,EALS,CAKN,KAAKZ,UAAL,CAAgB,KAAhB,CALM,EAMTa,MANS,CAMF,KAAKb,UAAL,CAAgB,QAAhB,CANE,CAAd;;AAQA,iBAAKH,SAAL,CAAeiB,IAAf,CAAoBV,OAApB,EAA6BW,IAA7B,CAAkC,YAAM;AACpC,sBAAKC,uBAAL;AACH,aAFD;AAGH;;AAED;;;;;;kDAG0B;AAAA;;AACtB,iBAAKC,gBAAL,CAAsBC,GAAtB,CAA0B,UAACC,eAAD,EAAqB;AAC3C,uBAAKC,mBAAL,CAAyBD,eAAzB;AACH,aAFD;AAGH;;AAED;;;;;;;4CAIoBE,Y,EAAc;AAC9B,iBAAKvB,mBAAL,CAAyBsB,mBAAzB,CAA6CC,YAA7C;AACH;;AAED;;;;;;;wDAIgCA,Y,EAAc,CAE7C;;;;;;AAGL1B,4BAA4B2B,OAA5B,GAAsC,CAClC,SADkC,EAElC,WAFkC,EAGlC,qBAHkC,EAIlC,gBAJkC,CAAtC;;AAOA,IAAMC,oBAAoB;AACtBC,cAAU;AACNP,0BAAkB,GADZ;AAENQ,gCAAwB;AAFlB,KADY;AAKtBC,g0EALsB;AAsCtBC,gBAAYhC;AAtCU,CAA1B;;kBAyCe4B,iB","file":"notificationsMenu.js","sourcesContent":["\"use strict\";\n\nclass NotificationsMenuController {\n    constructor($filter,\n                $mdDialog,\n                NotificationService,\n                ProjectService) {\n        this.$filter = $filter;\n        this.$mdDialog = $mdDialog;\n        this.NotificationService = NotificationService;\n        this.ProjectService = ProjectService;\n\n        this.$translate = this.$filter('translate');\n    };\n\n    getNodePositionAndTitleByNodeId(nodeId) {\n        return this.ProjectService.getNodePositionAndTitleByNodeId(nodeId);\n    }\n\n    /**\n     * Show confirmation dialog before dismissing all notifications\n     */\n    confirmDismissAllNotifications(ev) {\n        let confirm = this.$mdDialog.confirm()\n            .parent(angular.element($('._md-open-menu-container._md-active')))// TODO: hack for now (showing md-dialog on top of md-menu)\n            .ariaLabel(this.$translate('dismissNotificationsTitle'))\n            .textContent(this.$translate('dismissNotificationsMessage'))\n            .targetEvent(ev)\n            .ok(this.$translate('yes'))\n            .cancel(this.$translate('CANCEL'));\n\n        this.$mdDialog.show(confirm).then(() => {\n            this.dismissAllNotifications();\n        });\n    }\n\n    /**\n     * Dismiss all new notifications\n     */\n    dismissAllNotifications() {\n        this.newNotifications.map((newNotification) => {\n            this.dismissNotification(newNotification);\n        });\n    }\n\n    /**\n     * Dismiss the specified notification\n     * @param notification\n     */\n    dismissNotification(notification) {\n        this.NotificationService.dismissNotification(notification);\n    }\n\n    /**\n     * Dismiss the specified notification and visit the corresponding node\n     * @param notification\n     */\n    dismissNotificationAndVisitNode(notification) {\n\n    }\n}\n\nNotificationsMenuController.$inject = [\n    '$filter',\n    '$mdDialog',\n    'NotificationService',\n    'ProjectService'\n];\n\nconst NotificationsMenu = {\n    bindings: {\n        newNotifications: '<',\n        dismissedNotifications: '<'\n    },\n    template:\n        `<div class=\"account-menu__caret account-menu__caret--notification\" tabindex=\"0\"></div>\n        <div layout=\"column\" class=\"account-menu--fixed-height account-menu--fixed-width\">\n            <md-toolbar md-theme=\"light\" class=\"account-menu__info md-subhead md-whiteframe-1dp\" layout=\"row\" layout-align=\"start center\">\n                <span class=\"accent-1 account-menu__info__title\" layout=\"row\" layout-align=\"start center\"><md-icon class=\"accent-1\"> notifications </md-icon>&nbsp;<span translate=\"ALERTS\"></span></span>\n                <span flex></span>\n                <!--<md-button class=\"md-icon-button\"\n                           aria-label=\"Clear all notifications\"\n                           md-prevent-menu-close=\"md-prevent-menu-close\"\n                           ng-disabled=\"$ctrl.newNotifications.length < 1\"\n                           ng-click=\"$ctrl.confirmDismissAllNotifications($event)\">\n                    <md-icon> clear_all </md-icon>-->\n                </md-button>\n            </md-toolbar>\n            <md-content class=\"account-menu__actions\" flex>\n                <div class=\"md-padding center\" ng-if=\"!$ctrl.newNotifications.length\"><span class=\"md-body-1\" translate=\"NO_ALERTS\"></span></div>\n                <md-list class=\"notification-list\" ng-if=\"$ctrl.newNotifications.length\">\n                    <md-list-item ng-repeat=\"notification in $ctrl.newNotifications track by $index\"\n                                  ng-click=\"$ctrl.dismissNotificationAndVisitNode(notification)\"\n                                  md-autofocus=\"$first\"\n                                  class=\"md-2-line\">\n                        <div class=\"md-list-item-text\">\n                            <div class=\"md-body-1 primary\">{{ notification.message }}</div>\n                            <h4 class=\"notification-list-item__source\">{{ $ctrl.getNodePositionAndTitleByNodeId(notification.nodeId) }}</h4>\n                        </div>\n                        <md-button class=\"md-icon-button\" md-prevent-menu-close=\"md-prevent-menu-close\"\n                                   ng-click=\"$ctrl.dismissNotification(notification)\">\n                            <md-icon>clear</md-icon>\n                        </md-button>\n                    </md-list-item>\n                </md-list>\n            </md-content>\n        </div>`,\n    controller: NotificationsMenuController\n};\n\nexport default NotificationsMenu;\n"]}