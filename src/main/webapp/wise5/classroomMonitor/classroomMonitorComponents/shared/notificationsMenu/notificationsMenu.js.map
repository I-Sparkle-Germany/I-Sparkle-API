{"version":3,"sources":["notificationsMenu.es6"],"names":["NotificationsMenuController","$filter","$mdDialog","NotificationService","ProjectService","$translate","nodeId","getNodePositionAndTitleByNodeId","ev","confirm","parent","angular","element","$","ariaLabel","textContent","targetEvent","ok","cancel","show","then","dismissAllNotifications","newNotifications","map","newNotification","dismissNotification","notification","$inject","NotificationsMenu","bindings","dismissedNotifications","withPause","template","controller"],"mappings":"AAAA;;;;;;;;;;IAEMA,2B;AACF,yCAAYC,OAAZ,EACYC,SADZ,EAEYC,mBAFZ,EAGYC,cAHZ,EAG4B;AAAA;;AACxB,aAAKH,OAAL,GAAeA,OAAf;AACA,aAAKC,SAAL,GAAiBA,SAAjB;AACA,aAAKC,mBAAL,GAA2BA,mBAA3B;AACA,aAAKC,cAAL,GAAsBA,cAAtB;;AAEA,aAAKC,UAAL,GAAkB,KAAKJ,OAAL,CAAa,WAAb,CAAlB;AACH;;;;wDAE+BK,M,EAAQ;AACpC,mBAAO,KAAKF,cAAL,CAAoBG,+BAApB,CAAoDD,MAApD,CAAP;AACH;;AAED;;;;;;uDAG+BE,E,EAAI;AAAA;;AAC/B,gBAAIC,UAAU,KAAKP,SAAL,CAAeO,OAAf,GACTC,MADS,CACFC,QAAQC,OAAR,CAAgBC,EAAE,qCAAF,CAAhB,CADE,EACwD;AADxD,aAETC,SAFS,CAEC,KAAKT,UAAL,CAAgB,2BAAhB,CAFD,EAGTU,WAHS,CAGG,KAAKV,UAAL,CAAgB,6BAAhB,CAHH,EAITW,WAJS,CAIGR,EAJH,EAKTS,EALS,CAKN,KAAKZ,UAAL,CAAgB,KAAhB,CALM,EAMTa,MANS,CAMF,KAAKb,UAAL,CAAgB,QAAhB,CANE,CAAd;;AAQA,iBAAKH,SAAL,CAAeiB,IAAf,CAAoBV,OAApB,EAA6BW,IAA7B,CAAkC,YAAM;AACpC,sBAAKC,uBAAL;AACH,aAFD;AAGH;;AAED;;;;;;kDAG0B;AAAA;;AACtB,iBAAKC,gBAAL,CAAsBC,GAAtB,CAA0B,UAACC,eAAD,EAAqB;AAC3C,uBAAKC,mBAAL,CAAyBD,eAAzB;AACH,aAFD;AAGH;;AAED;;;;;;;4CAIoBE,Y,EAAc;AAC9B,iBAAKvB,mBAAL,CAAyBsB,mBAAzB,CAA6CC,YAA7C;AACH;;AAED;;;;;;;wDAIgCA,Y,EAAc,CAE7C;;;;;;AAGL1B,4BAA4B2B,OAA5B,GAAsC,CAClC,SADkC,EAElC,WAFkC,EAGlC,qBAHkC,EAIlC,gBAJkC,CAAtC;;AAOA,IAAMC,oBAAoB;AACtBC,cAAU;AACNP,0BAAkB,GADZ;AAENQ,gCAAwB,GAFlB;AAGNC,mBAAW;AAHL,KADY;AAMtBC,87EANsB;AAyCtBC,gBAAYjC;AAzCU,CAA1B;;kBA4Ce4B,iB","file":"notificationsMenu.js","sourcesContent":["\"use strict\";\r\n\r\nclass NotificationsMenuController {\r\n    constructor($filter,\r\n                $mdDialog,\r\n                NotificationService,\r\n                ProjectService) {\r\n        this.$filter = $filter;\r\n        this.$mdDialog = $mdDialog;\r\n        this.NotificationService = NotificationService;\r\n        this.ProjectService = ProjectService;\r\n\r\n        this.$translate = this.$filter('translate');\r\n    };\r\n\r\n    getNodePositionAndTitleByNodeId(nodeId) {\r\n        return this.ProjectService.getNodePositionAndTitleByNodeId(nodeId);\r\n    }\r\n\r\n    /**\r\n     * Show confirmation dialog before dismissing all notifications\r\n     */\r\n    confirmDismissAllNotifications(ev) {\r\n        let confirm = this.$mdDialog.confirm()\r\n            .parent(angular.element($('._md-open-menu-container._md-active')))// TODO: hack for now (showing md-dialog on top of md-menu)\r\n            .ariaLabel(this.$translate('dismissNotificationsTitle'))\r\n            .textContent(this.$translate('dismissNotificationsMessage'))\r\n            .targetEvent(ev)\r\n            .ok(this.$translate('yes'))\r\n            .cancel(this.$translate('CANCEL'));\r\n\r\n        this.$mdDialog.show(confirm).then(() => {\r\n            this.dismissAllNotifications();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Dismiss all new notifications\r\n     */\r\n    dismissAllNotifications() {\r\n        this.newNotifications.map((newNotification) => {\r\n            this.dismissNotification(newNotification);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Dismiss the specified notification\r\n     * @param notification\r\n     */\r\n    dismissNotification(notification) {\r\n        this.NotificationService.dismissNotification(notification);\r\n    }\r\n\r\n    /**\r\n     * Dismiss the specified notification and visit the corresponding node\r\n     * @param notification\r\n     */\r\n    dismissNotificationAndVisitNode(notification) {\r\n\r\n    }\r\n}\r\n\r\nNotificationsMenuController.$inject = [\r\n    '$filter',\r\n    '$mdDialog',\r\n    'NotificationService',\r\n    'ProjectService'\r\n];\r\n\r\nconst NotificationsMenu = {\r\n    bindings: {\r\n        newNotifications: '<',\r\n        dismissedNotifications: '<',\r\n        withPause: '<'\r\n    },\r\n    template:\r\n        `<div class=\"account-menu__caret account-menu__caret--notification\"\r\n                     tabindex=\"0\"\r\n                     ng-class=\"{ 'account-menu__caret--notification--with-pause': $ctrl.withPause }\"></div>\r\n        <div layout=\"column\" class=\"account-menu--fixed-height account-menu--fixed-width\">\r\n            <md-toolbar md-theme=\"light\" class=\"account-menu__info md-subhead md-whiteframe-1dp\" layout=\"row\" layout-align=\"start center\">\r\n                <span class=\"accent-1 account-menu__info__title\" layout=\"row\" layout-align=\"start center\"><md-icon class=\"accent-1\"> notifications </md-icon>&nbsp;<span translate=\"ALERTS\"></span></span>\r\n                <span flex></span>\r\n                <!--<md-button class=\"md-icon-button\"\r\n                           aria-label=\"Clear all notifications\"\r\n                           md-prevent-menu-close=\"md-prevent-menu-close\"\r\n                           ng-disabled=\"$ctrl.newNotifications.length < 1\"\r\n                           ng-click=\"$ctrl.confirmDismissAllNotifications($event)\">\r\n                    <md-icon> clear_all </md-icon>-->\r\n                </md-button>\r\n            </md-toolbar>\r\n            <md-content class=\"account-menu__actions\" flex>\r\n                <div class=\"md-padding center\" ng-if=\"!$ctrl.newNotifications.length\"><span class=\"md-body-1\" translate=\"NO_ALERTS\"></span></div>\r\n                <md-list class=\"notification-list\" ng-if=\"$ctrl.newNotifications.length\">\r\n                    <md-list-item ng-repeat=\"notification in $ctrl.newNotifications track by $index\"\r\n                                  ng-click=\"$ctrl.dismissNotificationAndVisitNode(notification)\"\r\n                                  md-autofocus=\"$first\"\r\n                                  class=\"md-2-line\">\r\n                        <div class=\"md-list-item-text\">\r\n                            <div class=\"md-body-1 primary\">{{ notification.message }}</div>\r\n                            <h4 class=\"notification-list-item__source\">{{ $ctrl.getNodePositionAndTitleByNodeId(notification.nodeId) }}</h4>\r\n                        </div>\r\n                        <md-button class=\"md-icon-button\" md-prevent-menu-close=\"md-prevent-menu-close\"\r\n                                   ng-click=\"$ctrl.dismissNotification(notification)\">\r\n                            <md-icon>clear</md-icon>\r\n                        </md-button>\r\n                    </md-list-item>\r\n                </md-list>\r\n            </md-content>\r\n        </div>`,\r\n    controller: NotificationsMenuController\r\n};\r\n\r\nexport default NotificationsMenu;\r\n"]}