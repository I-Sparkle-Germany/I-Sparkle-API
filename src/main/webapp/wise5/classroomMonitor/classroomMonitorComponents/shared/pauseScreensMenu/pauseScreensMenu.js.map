{"version":3,"sources":["pauseScreensMenu.es6"],"names":["PauseScreensMenuController","$scope","TeacherDataService","periods","getPeriods","allPeriodsPaused","getAllPeriodsPaused","period","pauseScreensChanged","periodId","paused","i","length","thisPeriod","isPaused","$inject","PauseScreensMenu","template","controller"],"mappings":"AAAA;;;;;;;;;;IAEMA,0B;AACF,wCAAYC,MAAZ,EACYC,kBADZ,EACgC;AAAA;;AAC5B,aAAKD,MAAL,GAAcA,MAAd;AACA,aAAKC,kBAAL,GAA0BA,kBAA1B;;AAEA,aAAKC,OAAL,GAAe,KAAKD,kBAAL,CAAwBE,UAAxB,EAAf;AACA,aAAKC,gBAAL,GAAwB,KAAKC,mBAAL,EAAxB;AACH;;AAED;;;;;;;;;qCAKaC,M,EAAQ;AACnB,iBAAKL,kBAAL,CAAwBM,mBAAxB,CAA4CD,OAAOE,QAAnD,EAA6DF,OAAOG,MAApE;AACD;;;2CAEkB;AACjB,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKR,OAAL,CAAaS,MAAjC,EAAyCD,GAAzC,EAA8C;AAC5C,oBAAIE,aAAa,KAAKV,OAAL,CAAaQ,CAAb,CAAjB;AACA,oBAAIE,WAAWJ,QAAX,KAAwB,CAAC,CAA7B,EAAgC;AAC9B,yBAAKP,kBAAL,CAAwBM,mBAAxB,CAA4CK,WAAWJ,QAAvD,EAAiE,KAAKJ,gBAAtE;AACD;AACF;AACF;;AAED;;;;;;;8CAIsB;AAClB,gBAAIS,WAAW,IAAf;AACA,iBAAK,IAAIH,IAAI,CAAb,EAAgBA,IAAI,KAAKR,OAAL,CAAaS,MAAjC,EAAyCD,GAAzC,EAA8C;AAC1C,oBAAIJ,SAAS,KAAKJ,OAAL,CAAaQ,CAAb,CAAb;AACA,oBAAIJ,OAAOE,QAAP,KAAoB,CAAC,CAArB,IAA0B,CAACF,OAAOG,MAAtC,EAA8C;AAC1CI,+BAAW,KAAX;AACA;AACH;AACJ;;AAED,mBAAOA,QAAP;AACH;;;;;;AAGLd,2BAA2Be,OAA3B,GAAqC,CACjC,QADiC,EAEjC,oBAFiC,CAArC;;AAKA,IAAMC,mBAAmB;AACrBC,omDADqB;AA2BrBC,gBAAYlB;AA3BS,CAAzB;;kBA8BegB,gB","file":"pauseScreensMenu.js","sourcesContent":["\"use strict\";\n\nclass PauseScreensMenuController {\n    constructor($scope,\n                TeacherDataService) {\n        this.$scope = $scope;\n        this.TeacherDataService = TeacherDataService;\n\n        this.periods = this.TeacherDataService.getPeriods();\n        this.allPeriodsPaused = this.getAllPeriodsPaused();\n    }\n\n    /**\n     * Toggle the paused status for the given period\n     * TODO: sync with actual pause statuses in TeacherDataService\n     * @param period the period object to toggle paused status\n     */\n    togglePeriod(period) {\n      this.TeacherDataService.pauseScreensChanged(period.periodId, period.paused);\n    }\n\n    toggleAllPeriods() {\n      for (let i = 0; i < this.periods.length; i++) {\n        let thisPeriod = this.periods[i];\n        if (thisPeriod.periodId !== -1) {\n          this.TeacherDataService.pauseScreensChanged(thisPeriod.periodId, this.allPeriodsPaused);\n        }\n      }\n    }\n\n    /**\n     * Check whether all the periods in the run are paused\n     * @return boolean whether all periods are paused\n     */\n    getAllPeriodsPaused() {\n        let isPaused = true;\n        for (let i = 0; i < this.periods.length; i++) {\n            let period = this.periods[i];\n            if (period.periodId !== -1 && !period.paused) {\n                isPaused = false;\n                break;\n            }\n        }\n\n        return isPaused;\n    }\n}\n\nPauseScreensMenuController.$inject = [\n    '$scope',\n    'TeacherDataService'\n];\n\nconst PauseScreensMenu = {\n    template:\n        `<div class=\"account-menu__caret account-menu__caret--pause\" tabindex=\"0\"></div>\n        <div layout=\"column\" class=\"account-menu--fixed-height\">\n            <md-toolbar md-theme=\"light\" class=\"account-menu__info md-subhead md-whiteframe-1dp\" layout=\"row\" layout-align=\"start center\">\n                <div class=\"accent-1 account-menu__info__title\" layout=\"row\" layout-align=\"start center\"><md-icon class=\"accent-1\"> lock </md-icon>&nbsp;\n                    <span translate=\"lockStudentScreens\"></span>\n                </div>\n            </md-toolbar>\n            <md-content flex>\n                <md-switch class=\"md-primary account-menu__control\"\n                           aria-label=\"{{ 'lockPeriodLabel' | translate: { periodName: ('allPeriods' | translate) } }}\"\n                           ng-model=\"$ctrl.allPeriodsPaused\"\n                           ng-change=\"$ctrl.toggleAllPeriods()\">\n                    {{ 'allPeriods' | translate }}\n                </md-switch>\n                <md-divider></md-divider>\n                <md-switch ng-repeat=\"period in $ctrl.periods\"\n                           ng-if=\"period.periodId !== -1\"\n                           class=\"md-primary account-menu__control\"\n                           aria-label=\"{{ 'lockPeriodLabel' | translate: { periodName: period.periodName } }}\"\n                           ng-model=\"period.paused\"\n                           ng-change=\"$ctrl.togglePeriod(period)\">\n                    {{ 'periodLabel' | translate:{ name: period.periodName } }}\n                </md-switch>\n            </md-content>\n        </div>`,\n    controller: PauseScreensMenuController\n};\n\nexport default PauseScreensMenu;\n"]}