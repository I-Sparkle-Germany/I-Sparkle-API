<div>
    <button ng-repeat='period in nodeGradingController.periods'
            ng-click='nodeGradingController.setCurrentPeriod(period)'
            ng-class="{'active': period.periodName == nodeGradingController.getCurrentPeriod().periodName}">
        {{period.periodName}}
    </button>
</div>

<div style='margin-left: 20px'><h3>{{nodeGradingController.nodeTitle}}</h3></div>

<div ng-repeat='workgroupId in nodeGradingController.workgroupIds'>
    <div ng-show='nodeGradingController.getCurrentPeriod().periodName == "All" || nodeGradingController.getPeriodIdByWorkgroupId(workgroupId) == nodeGradingController.getCurrentPeriod().periodId'>
        <hr style='height: 1px; background-color: black'/>
        <div ng-if='nodeGradingController.canViewStudentNames' style='margin-left: 20px'><h4>{{nodeGradingController.getUserNameByWorkgroupId(workgroupId)}} (Workgroup ID: {{workgroupId}})</h4></div>
        <div ng-if='!nodeGradingController.canViewStudentNames' style='margin-left: 20px'><h4>{{workgroupId}}</h4></div>
        <div id="{{component.id}}" class="component" ng-repeat='component in nodeGradingController.getComponents()'>
            <component ng-if='component.showPreviousWorkNodeId != null && component.showPreviousWorkComponentId != null' node-id='{{component.showPreviousWorkNodeId}}' component-id='{{component.showPreviousWorkComponentId}}' component-state='{{nodeGradingController.getLatestComponentStateByWorkgroupIdAndNodeIdAndComponentId(workgroupId, component.showPreviousWorkNodeId, component.showPreviousWorkComponentId)}}' workgroup-id='{{workgroupId}}' teacher-workgroup-id='{{nodeGradingController.teacherWorkgroupId}}' mode='grading'></component>
            <component ng-if='component.showPreviousWorkNodeId == null || component.showPreviousWorkComponentId == null' node-id='{{nodeGradingController.nodeId}}' component-id='{{component.id}}' a='b' component-state='{{nodeGradingController.getLatestComponentStateByWorkgroupIdAndComponentId(workgroupId, component.id)}}' workgroup-id='{{workgroupId}}' teacher-workgroup-id='{{nodeGradingController.teacherWorkgroupId}}' mode='grading'></component>
        </div>
    </div>
</div>