{"version":3,"sources":["notebookGradingController.es6"],"names":["NotebookGradingController","$rootScope","$scope","$state","ConfigService","NotebookService","ProjectService","StudentStatusService","TeacherDataService","TeacherWebSocketService","themePath","getThemePath","teacherWorkgroupId","getWorkgroupId","workgroups","getClassmateUserInfos","noteFilter","reportFilter","showAllNotes","showAllReports","showNoteForWorkgroup","showReportForWorkgroup","i","length","workgroup","workgroupId","canViewStudentNames","canGradeStudentWork","role","getTeacherRole","context","nodeId","componentId","componentType","category","event","data","saveEvent","alert","$inject"],"mappings":"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","file":"notebookGradingController.js","sourcesContent":["'use strict';\n\nclass NotebookGradingController {\n\n    constructor($rootScope,\n                $scope,\n                $state,\n                ConfigService,\n                NotebookService,\n                ProjectService,\n                StudentStatusService,\n                TeacherDataService,\n                TeacherWebSocketService) {\n        this.$rootScope = $rootScope;\n        this.$scope = $scope;\n        this.$state = $state;\n        this.ConfigService = ConfigService;\n        this.NotebookService = NotebookService;\n        this.ProjectService = ProjectService;\n        this.StudentStatusService = StudentStatusService;\n        this.TeacherDataService = TeacherDataService;\n        this.TeacherWebSocketService = TeacherWebSocketService;\n\n        this.themePath = this.ProjectService.getThemePath();\n\n        this.teacherWorkgroupId = this.ConfigService.getWorkgroupId();\n\n        // get the workgroups sorted alphabetically\n        this.workgroups = this.ConfigService.getClassmateUserInfos();\n\n        this.noteFilter = \"note\";\n        this.reportFilter = \"report\";\n\n        this.showAllNotes = false;\n        this.showAllReports = false;\n        this.showNoteForWorkgroup = {};\n        this.showReportForWorkgroup = {};\n        for (let i = 0; i < this.workgroups.length; i++) {\n            let workgroup = this.workgroups[i];\n            this.showNoteForWorkgroup[workgroup.workgroupId] = false;\n            this.showReportForWorkgroup[workgroup.workgroupId] = false;\n        }\n\n        this.canViewStudentNames = true;\n        this.canGradeStudentWork = true;\n\n        // get the role of the teacher for the run e.g. 'owner', 'write', 'read'\n        let role = this.ConfigService.getTeacherRole(this.teacherWorkgroupId);\n\n        if (role === 'owner') {\n            // the teacher is the owner of the run and has full access\n            this.canViewStudentNames = true;\n            this.canGradeStudentWork = true;\n        } else if (role === 'write') {\n            // the teacher is a shared teacher that can grade the student work\n            this.canViewStudentNames = true;\n            this.canGradeStudentWork = true;\n        } else if (role === 'read') {\n            // the teacher is a shared teacher that can only view the student work\n            this.canViewStudentNames = false;\n            this.canGradeStudentWork = false;\n        }\n\n        // save event when notebook grading view is displayed\n        let context = \"ClassroomMonitor\", nodeId = null, componentId = null, componentType = null,\n            category = \"Navigation\", event = \"notebookViewDisplayed\", data = {};\n        this.TeacherDataService.saveEvent(context, nodeId, componentId, componentType, category, event, data);\n    }\n\n    toggleDisplayNoteForWorkgroup(workgroupId) {\n        this.showNoteForWorkgroup[workgroupId] = !this.showNoteForWorkgroup[workgroupId];\n    }\n\n    toggleDisplayReportForWorkgroup(workgroupId) {\n        this.showReportForWorkgroup[workgroupId] = !this.showReportForWorkgroup[workgroupId];\n    }\n\n    toggleDisplayAllNotes() {\n        this.showAllNotes = !this.showAllNotes;\n\n        for (let workgroupId in this.showNoteForWorkgroup) {\n            this.showNoteForWorkgroup[workgroupId] = this.showAllNotes;\n        }\n    }\n\n    toggleDisplayAllReports() {\n        this.showAllReports = !this.showAllReports;\n\n        for (let workgroupId in this.showReportForWorkgroup) {\n            this.showReportForWorkgroup[workgroupId] = this.showAllReports;\n        }\n    }\n\n    /**\n     * Handle request to view notes for the specified workgroup\n     * @param workgroupId\n     */\n    viewNotes(workgroupId) {\n        alert(workgroupId);\n    }\n\n    /**\n     * Handle request to view report for the specified workgroup\n     * @param workgroupId\n     */\n    viewReport(workgroupId) {\n        alert(workgroupId);\n    }\n\n}\n\nNotebookGradingController.$inject = [\n    '$rootScope',\n    '$scope',\n    '$state',\n    'ConfigService',\n    'NotebookService',\n    'ProjectService',\n    'StudentStatusService',\n    'TeacherDataService',\n    'TeacherWebSocketService'\n];\n\nexport default NotebookGradingController;\n"]}