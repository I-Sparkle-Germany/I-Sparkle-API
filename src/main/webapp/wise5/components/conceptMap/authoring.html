<div ng-mouseup='conceptMapController.mouseUp()' flex>
  <style>
    {{conceptMapController.nodeContent.style}}
  </style>
  <div>
    <div ng-if='!conceptMapController.authoringComponentContent.showPreviousWork'>
      <md-input-container style='width:100%'>
        <label>{{ ::'PROMPT' | translate }}</label>
        <textarea rows='1'
                  ng-model='conceptMapController.authoringComponentContent.prompt'
                  ng-change='conceptMapController.authoringViewComponentChanged()'
                  ng-model-options='{ debounce: 1000 }'
                  placeholder='{{ ::"enterPromptHere" | translate }}'>
      </textarea>
      </md-input-container>
      <br/>
      <div style='height: 60px;'>
        <md-input-container>
          <label>{{ ::'BACKGROUND_IMAGE' | translate }} ({{ ::'OPTIONAL' | translate }})</label>
          <input size='100'
                 ng-model='conceptMapController.authoringComponentContent.background'
                 ng-change='conceptMapController.authoringViewComponentChanged()'/>
        </md-input-container>
        <md-button class='topButton md-raised md-primary'
                   ng-click='conceptMapController.chooseBackgroundImage()'>
          <md-icon>insert_photo</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'chooseAnImage' | translate }}
          </md-tooltip>
        </md-button>
      </div>
      <div style='height: 60px;'>
        <md-input-container>
          <md-checkbox class='md-primary'
                       ng-model='conceptMapController.authoringComponentContent.stretchBackground'
                       ng-change='conceptMapController.authoringViewComponentChanged()'>
            {{ ::'conceptMap.stretchBackground' | translate }}
          </md-checkbox>
        </md-input-container>
      </div>
      <div style='height: 60px;'>
        <md-input-container>
          <label>{{ ::'conceptMap.canvasWidth' | translate }} ({{ ::'OPTIONAL' | translate }})</label>
          <input type='number'
                 style='width: 200'
                 ng-model='conceptMapController.authoringComponentContent.width'
                 ng-change='conceptMapController.authoringViewComponentChanged()'/>
        </md-input-container>
        <md-input-container>
          <label>{{ ::'conceptMap.canvasHeight' | translate }} ({{ ::'OPTIONAL' | translate }})</label>
          <input type='number'
                 style='width: 200'
                 ng-model='conceptMapController.authoringComponentContent.height'
                 ng-change='conceptMapController.authoringViewComponentChanged()'/>
        </md-input-container>
      </div>
      <div style='height: 60px;'>
        <md-input-container>
          <md-checkbox class='md-primary'
                       ng-model='conceptMapController.authoringComponentContent.showNodeLabels'
                       ng-change='conceptMapController.authoringViewComponentChanged()'>
            {{ ::'conceptMap.showNodeLabels' | translate }}
          </md-checkbox>
        </md-input-container>
      </div>
      <div layout='row'>
        <h6>{{ ::'conceptMap.nodes' | translate }}</h6>
        <md-button class='topButton md-raised md-primary'
                   ng-click='conceptMapController.addNode()'>
          <md-icon>add</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'conceptMap.addNode' | translate }}
          </md-tooltip>
        </md-button>
      </div>
      <div ng-if='conceptMapController.authoringComponentContent.nodes == null || conceptMapController.authoringComponentContent.nodes.length == 0'>
        <p>{{ ::'conceptMap.thereAreNoNodes' | translate }}</p>
        <br/>
      </div>
      <div ng-repeat='node in conceptMapController.authoringComponentContent.nodes' layout='row'>
        <md-input-container style='margin-right: 20px;'>
          <label>{{ ::'conceptMap.label' | translate }}</label>
          <input ng-model='node.label'
                 ng-change='conceptMapController.authoringViewComponentChanged()'
                 size='50'
                 ng-model-options='{ debounce: 1000 }'/>
        </md-input-container>
        <md-input-container>
          <label>{{ ::'conceptMap.fileName' | translate }}</label>
          <input ng-model='node.fileName'
                 ng-change='conceptMapController.authoringViewComponentChanged()'
                 size='50'
                 ng-model-options='{ debounce: 1000 }'/>
        </md-input-container>
        <md-button class='regularButton md-raised md-primary'
                   style='margin-right: 20px;'
                   ng-click='conceptMapController.chooseNodeImage(node.id)'>
          <md-icon>insert_photo</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'CHOOSE' | translate}}
          </md-tooltip>
        </md-button>
        <md-input-container style='margin-right: 20px;'>
          <label>{{ ::'WIDTH' | translate }}</label>
          <input ng-model='node.width'
                 ng-change='conceptMapController.authoringViewComponentChanged()'
                 size='10'
                 ng-model-options='{ debounce: 1000 }'/>
        </md-input-container>
        <md-input-container>
          <label>{{ ::'HEIGHT' | translate }}</label>
          <input ng-model='node.height'
                 ng-change='conceptMapController.authoringViewComponentChanged()'
                 size='10'
                 ng-model-options='{ debounce: 1000 }'/>
        </md-input-container>
        <md-button class='regularButton md-raised md-primary'
                   ng-click="conceptMapController.moveNodeUpButtonClicked($index)">
          <md-icon>arrow_upward</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'UP' | translate}}
          </md-tooltip>
        </md-button>
        <md-button class='regularButton md-raised md-primary'
                   ng-click="conceptMapController.moveNodeDownButtonClicked($index)">
          <md-icon>arrow_downward</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'DOWN' | translate}}
          </md-tooltip>
        </md-button>
        <md-button class='regularButton md-raised md-primary'
                   ng-click='conceptMapController.nodeDeleteButtonClicked($index)'>
          <md-icon>delete</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'DELETE' | translate}}
          </md-tooltip>
        </md-button>
      </div>
      <div layout='row'>
        <h6>{{ ::'conceptMap.links' | translate }}</h6>
        <md-button class='topButton md-raised md-primary'
                   ng-click='conceptMapController.addLink()'>
          <md-icon>add</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'conceptMap.addLink' | translate }}
          </md-tooltip>
        </md-button>
      </div>
      <div ng-if='conceptMapController.authoringComponentContent.links == null || conceptMapController.authoringComponentContent.links.length == 0'>
        <p>{{ ::'conceptMap.thereAreNoLinks' | translate }}</p>
        <br/>
      </div>
      <div ng-repeat='link in conceptMapController.authoringComponentContent.links' layout='row'>
        <md-input-container style='margin-right: 20;'>
          <label>{{ ::'conceptMap.label' | translate }}</label>
          <input ng-model='link.label'
                 ng-change='conceptMapController.authoringViewComponentChanged()'
                 size='50'
                 ng-model-options='{ debounce: 1000 }'/>
        </md-input-container>
        <md-input-container>
          <label>{{ ::'conceptMap.color' | translate }}</label>
          <input ng-model='link.color'
                 ng-change='conceptMapController.authoringViewComponentChanged()'
                 size='50'
                 ng-model-options='{ debounce: 1000 }'/>
        </md-input-container>
        <md-button class='regularButton md-raised md-primary'
                   ng-click="conceptMapController.moveLinkUpButtonClicked($index)">
          <md-icon>arrow_upward</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'UP' | translate}}
          </md-tooltip>
        </md-button>
        <md-button class='regularButton md-raised md-primary'
                   ng-click="conceptMapController.moveLinkDownButtonClicked($index)">
          <md-icon>arrow_downward</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'DOWN' | translate}}
          </md-tooltip>
        </md-button>
        <md-button class='regularButton md-raised md-primary'
                   ng-click='conceptMapController.linkDeleteButtonClicked($index)'>
          <md-icon>delete</md-icon>
          <md-tooltip md-direction='top'
                      class='projectButtonTooltip'>
            {{ ::'DELETE' | translate}}
          </md-tooltip>
        </md-button>
      </div>
      <md-button class='topButton md-raised md-primary'
                 ng-click='conceptMapController.saveStarterConceptMap()'>
        <md-icon>create</md-icon>
        <md-tooltip md-direction='top'
                    class='projectButtonTooltip'>
          {{ ::'conceptMap.saveStarterConceptMap' | translate }}
        </md-tooltip>
      </md-button>
      <md-button class='topButton md-raised md-primary'
                 ng-click='conceptMapController.deleteStarterConceptMap()'>
        <md-icon>delete_sweep</md-icon>
        <md-tooltip md-direction='top'
                    class='projectButtonTooltip'>
          {{ ::'conceptMap.deleteStarterConceptMap' | translate }}
        </md-tooltip>
      </md-button>
    </div>
  </div>
  <div ng-style='{"border": "5px solid black"}'>
    <div ng-style='{"padding-top": "20px", "padding-left": "20px"}'>
      <h5>{{ ::'studentPreview' | translate }}</h5>
    </div>
    <preview-component component-content='conceptMapController.componentContent'
        node-id='{{conceptMapController.nodeId}}'/>
  </div>
</div>
