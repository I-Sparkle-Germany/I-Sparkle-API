<md-card class="discussion-post">
    <div class="discussion-post__contents">
        <div layout="row">
            <div class="md-avatar discussion-post__avatar"><md-icon class="md-48" style="color: {{getAvatarColorForWorkgroupId(response.workgroupId)}};"> account_circle </md-icon></div>
            <div flex>
                <div class="discussion-post__user">{{ response.userNames }}</div>
                <div class="md-body-1 discussion-post__date" title="{{ response.clientSaveTime | amDateFormat:'ddd, MMM D, YYYY, h:mm a' }}">{{ response.clientSaveTime | amCalendar }}</div>
            </div>
        </div>
        <div class="md-content discussion-post__content md-body-1" ng-bind-html="response.studentData.response"></div>
        <img ng-repeat="attachment in response.studentData.attachments" src="{{attachment.iconURL}}" alt="{{attachment.iconURL}}" class="discussion-post__attachment" />
        </div>
    </div>
    <md-divider></md-divider>
    <div class="discussion-comments">
        <div class="discussion-comments__contents" ng-show="response.replies.length">
            <md-subheader class="md-no-sticky discussion-comments__header">
                <a ng-if="response.replies.length > 1" ng-click="toggleExpanded()">Comments ({{ response.replies.length }})<md-icon ng-if="!expanded">expand_more</md-icon><md-icon ng-if="expanded">expand_less</md-icon></a>
                <span ng-if="response.replies.length < 2">Comments ({{ response.replies.length }})</span>
            </md-subheader>
            <md-list class="discussion-comments__list">
                <md-list-item class="md-3-line md-long-text discussion-reply"
                              ng-class="{'animate-show': !$last}"
                              ng-repeat="reply in response.replies"
                              ng-show="$last || expanded">
                    <div class="md-avatar discussion-post__avatar--reply discussion-post__avatar"><md-icon class="md-36" style="color: {{getAvatarColorForWorkgroupId(reply.workgroupId)}}"> account_circle </md-icon></div>
                    <div class="md-list-item-text discusstion-reply__details">
                        <h3 class="discussion-post__user discussion-post__user--reply" flex>{{ reply.userNames }} <span class="md-caption discussion-post__date discussion-post__date--reply" am-time-ago="reply.clientSaveTime" title="{{ reply.clientSaveTime | amDateFormat:'ddd, MMM D YYYY, h:mm a' }}"></span></h3>
                        <div class="discusstion-reply__content md-body-1" ng-bind-html="reply.studentData.response"></div>
                    </div>
                </md-list-item>
            </md-list>
            <md-divider></md-divider>
        </div>
        <div class="discussion-new-reply" flex layout="row">
            <md-input-container class="input-container discussion-new-reply__input-container md-block" md-no-float flex>
                <textarea class="input--textarea discussion-reply__input"
                          ng-model='response.replyText'
                          ng-model-options='{ debounce: 100 }'
                          placeholder="Add comment..."
                          aria-label="Add comment"></textarea>
            </md-input-container>
            <div class="discussion-new__actions discussion-new-reply__actions">
                <!--<md-button class="md-accent"
                           ng-click='nodeController.showNotebook($event, component.id, discussionController.isDisabled)'
                           aria-label="Add file">
                    <md-icon>image</md-icon>
                </md-button>-->
                <a class="md-button md-primary discussion-new-reply__submit"
                           ng-disabled="!response.replyText"
                           ng-click="submitButtonClicked(response)">Post</a>
            </div>
        </div>
    </div>
</md-card>