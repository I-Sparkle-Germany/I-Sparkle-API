{"version":3,"sources":["classResponse.es6"],"names":["ClassResponseController","$scope","$element","StudentStatusService","ConfigService","$watch","response","replies","length","oldValue","newValue","toggleExpanded","replyText","workgroupId","getAvatarColorForWorkgroupId","$event","keyCode","submitButtonClicked","submitbuttonclicked","r","open","expanded","$clist","$","element","find","setTimeout","animate","scrollTop","height","time","convertToClientTimestamp","$inject","ClassResponseComponentOptions","bindings","studentdatachanged","templateUrl","controller"],"mappings":"AAAA;;;;;;;;;;IAEMA,uB;AACF,qCAAYC,MAAZ,EAAoBC,QAApB,EAA8BC,oBAA9B,EAAoDC,aAApD,EAAmE;AAAA;;AAAA;;AAC/D,aAAKH,MAAL,GAAcA,MAAd;AACA,aAAKC,QAAL,GAAgBA,QAAhB;AACA,aAAKC,oBAAL,GAA4BA,oBAA5B;AACA,aAAKC,aAAL,GAAqBA,aAArB;;AAEA,aAAKH,MAAL,CAAYI,MAAZ,CACI,YAAM;AAAE,mBAAO,MAAKC,QAAL,CAAcC,OAAd,CAAsBC,MAA7B;AAAsC,SADlD,EAEI,UAACC,QAAD,EAAWC,QAAX,EAAwB;AACpB,gBAAIA,aAAaD,QAAjB,EAA2B;AACvB,sBAAKE,cAAL,CAAoB,IAApB;AACA,sBAAKL,QAAL,CAAcM,SAAd,GAA0B,EAA1B;AACH;AACJ,SAPL;AASH;;;;qDAE4BC,W,EAAa;AACtC,mBAAO,KAAKT,aAAL,CAAmBU,4BAAnB,CAAgDD,WAAhD,CAAP;AACH;;;qCAEYE,M,EAAQT,Q,EAAU;AAC3B,gBAAIS,OAAOC,OAAP,KAAmB,EAAvB,EAA2B;AACvB,oBAAIV,SAASM,SAAb,EAAwB;AACpB,yBAAKK,mBAAL,CAAyBX,QAAzB;AACH;AACJ;AACJ;;;4CAEmBA,Q,EAAU;AAC1B;AACA,iBAAKY,mBAAL,CAAyB,EAACC,GAAGb,QAAJ,EAAzB;AACH;;;uCAEcc,I,EAAM;AACjB,gBAAIA,IAAJ,EAAU;AACN,qBAAKC,QAAL,GAAgB,IAAhB;AACH,aAFD,MAEO;AACH,qBAAKA,QAAL,GAAgB,CAAC,KAAKA,QAAtB;AACH;;AAED,gBAAI,KAAKA,QAAT,EAAmB;AACf,oBAAIC,SAASC,EAAE,KAAKC,OAAP,EAAgBC,IAAhB,CAAqB,4BAArB,CAAb;AACAC,2BAAW,YAAY;AACnBJ,2BAAOK,OAAP,CAAe,EAACC,WAAWN,OAAOO,MAAP,EAAZ,EAAf,EAA6C,GAA7C;AACH,iBAFD,EAEG,GAFH;AAGH;AACJ;;;6CAEoBC,I,EAAM;AACvB,mBAAO,KAAK1B,aAAL,CAAmB2B,wBAAnB,CAA4CD,IAA5C,CAAP;AACH;;;;;;AAGL9B,wBAAwBgC,OAAxB,GAAkC,CAAC,QAAD,EAAU,UAAV,EAAqB,sBAArB,EAA4C,eAA5C,CAAlC;;AAEA,IAAMC,gCAAgC;AAClCC,cAAU;AACN5B,kBAAU,GADJ;AAENY,6BAAqB,GAFf;AAGNiB,4BAAoB;AAHd,KADwB;AAMlCC,iBAAa,gDANqB;AAOlCC,gBAAY;AAPsB,CAAtC;;QAUSrC,uB,GAAAA,uB;QAAyBiC,6B,GAAAA,6B","file":"classResponse.js","sourcesContent":["'use strict';\n\nclass ClassResponseController {\n    constructor($scope, $element, StudentStatusService, ConfigService) {\n        this.$scope = $scope;\n        this.$element = $element;\n        this.StudentStatusService = StudentStatusService;\n        this.ConfigService = ConfigService;\n\n        this.$scope.$watch(\n            () => { return this.response.replies.length; },\n            (oldValue, newValue) => {\n                if (newValue !== oldValue) {\n                    this.toggleExpanded(true);\n                    this.response.replyText = '';\n                }\n            }\n        );\n    }\n\n    getAvatarColorForWorkgroupId(workgroupId) {\n        return this.ConfigService.getAvatarColorForWorkgroupId(workgroupId);\n    }\n\n    replyEntered($event, response) {\n        if ($event.keyCode === 13) {\n            if (response.replyText) {\n                this.submitButtonClicked(response);\n            }\n        }\n    }\n\n    submitButtonClicked(response) {\n        // call the callback function in discussionController\n        this.submitbuttonclicked({r: response});\n    }\n\n    toggleExpanded(open) {\n        if (open) {\n            this.expanded = true;\n        } else {\n            this.expanded = !this.expanded;\n        }\n\n        if (this.expanded) {\n            var $clist = $(this.element).find('.discussion-comments__list');\n            setTimeout(function () {\n                $clist.animate({scrollTop: $clist.height()}, 250);\n            }, 250);\n        }\n    }\n\n    adjustClientSaveTime(time) {\n        return this.ConfigService.convertToClientTimestamp(time);\n    }\n}\n\nClassResponseController.$inject = ['$scope','$element','StudentStatusService','ConfigService'];\n\nconst ClassResponseComponentOptions = {\n    bindings: {\n        response: '=',\n        submitbuttonclicked: '&',\n        studentdatachanged: '&'\n    },\n    templateUrl: 'wise5/components/discussion/classResponse.html',\n    controller: 'ClassResponseController as classResponseCtrl'\n};\n\nexport { ClassResponseController, ClassResponseComponentOptions };\n"]}