<html>
    <head>
    <style>
    .attachment {
        width: auto;
        height: auto;
        max-width: 200px;
        max-height: 200px;
        padding: 10px;
        margin: 5px;
        border: 3px solid #DDD;
    }
    </style>
    </head>
    <body>
        <div class='openResponse' ng-controller='OpenResponseController as openResponseController'>
            <style>
            {{openResponseController.nodeContent.style}}
            </style>

            <md-input-container class="input-container md-block input-container--open-response md-no-float">
                <label class="input-label md-no-float" ng-disabled="openResponseController.isDisabled"
                       compile="openResponseController.getPrompt()" ng-if="openResponseController.getPrompt()"></label>
                <div class="input-wrapper" ng-class="{'input-wrapper--richtext': openResponseController.isRichTextEnabled}">
                    <textarea ng-if="openResponseController.isRichTextEnabled && !openResponseController.isDisabled"
                              ui-tinymce="openResponseController.tinymceOptions"
                              ng-model="openResponseController.studentResponse"
                              ng-change="openResponseController.studentDataChanged()"></textarea>
                    <div ng-if="openResponseController.isRichTextEnabled && openResponseController.isDisabled"
                         class="input--textarea input--textarea--disabled">
                        <componentstatehtml componentstate="{{componentState}}"></componentstatehtml>
                    </div>
                    <textarea ng-if="!openResponseController.isRichTextEnabled"
                              class="input--textarea input--textarea--hasaction"
                              rows="{{openResponseController.getNumRows() || 3}}"
                              ng-model="openResponseController.studentResponse"
                              ng-disabled="openResponseController.isDisabled"
                              ng-change="openResponseController.studentDataChanged()"></textarea>
                    <md-button class="input--textarea__action input--textarea__action--notebook md-icon-button"
                               ng-click='nodeCtrl.addStudentWorkItemToNotebook(component.id)'
                               ng-disabled="!openResponseController.getStudentResponse()">
                        <md-icon> book </md-icon>
                        <md-tooltip md-direction="left">Add to Notebook</md-tooltip>
                    </md-button>
                    <md-button class="input--textarea__action input--textarea__action--revision md-icon-button"
                               ng-click='nodeCtrl.showRevisions($event, component.id, openResponseController.isDisabled)'
                               ng-disabled="nodeCtrl.getRevisions(component.id).length == 0">
                        <md-icon> history </md-icon>
                        <md-tooltip md-direction="left">{{nodeCtrl.getRevisions(component.id).length}} Revisions</md-tooltip>
                    </md-button>
                </div>
                <div id="attachments" ng-show="openResponseController.isStudentAttachmentEnabled">
                    <span ng-repeat="attachment in openResponseController.attachments">
                        <img src="{{attachment.iconURL}}" class="attachment" />
                        <button ng-click='openResponseController.removeAttachment(attachment)'>X</button>
                    </span>
                    <button ng-click='nodeCtrl.showNotebook($event, component.id, openResponseController.isDisabled)'>
                        Add attachment...
                    </button>
                </div>
            </md-input-container>

            <div class="component-content__actions" layout="row">
                <md-button class="md-raised md-primary"
                           ng-click="openResponseController.saveButtonClicked()"
                           ng-disabled="openResponseController.isDisabled"
                           ng-if="openResponseController.showSaveButton()">Save</md-button>
                <md-button class="md-raised md-primary"
                        ng-click="openResponseController.submitButtonClicked()"
                        ng-disabled="openResponseController.isDisabled"
                        ng-if="openResponseController.showSubmitButton()">Submit</md-button>
            </div>
        </div>
    </body>
</html>
