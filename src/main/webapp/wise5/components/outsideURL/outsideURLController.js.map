{"version":3,"sources":["outsideURLController.es6"],"names":["OutsideURLController","$filter","$mdDialog","$q","$rootScope","$sce","$scope","AnnotationService","ConfigService","NodeService","NotebookService","OutsideURLService","ProjectService","StudentAssetService","StudentDataService","UtilService","url","maxWidth","maxHeight","originalComponentContent","componentContent","setURL","$parent","nodeController","registerComponentController","getComponentState","deferred","defer","resolve","promise","bind","$broadcast","nodeId","componentId","trustedURL","trustAsResourceUrl","exitListener","$on","event","args","$inject"],"mappings":"AAAA;;;;;;;;AAEA;;;;;;;;;;;;IAEMA,oB;;;AACJ,gCAAYC,OAAZ,EACIC,SADJ,EAEIC,EAFJ,EAGIC,UAHJ,EAIIC,IAJJ,EAKIC,MALJ,EAMIC,iBANJ,EAOIC,aAPJ,EAQIC,WARJ,EASIC,eATJ,EAUIC,iBAVJ,EAWIC,cAXJ,EAYIC,mBAZJ,EAaIC,kBAbJ,EAcIC,WAdJ,EAciB;AAAA;;AAAA,4IACTd,OADS,EACAC,SADA,EACWE,UADX,EACuBE,MADvB,EAEXC,iBAFW,EAEQC,aAFR,EAEuBC,WAFvB,EAGXC,eAHW,EAGME,cAHN,EAGsBC,mBAHtB,EAIXC,kBAJW,EAISC,WAJT;;AAKf,UAAKZ,EAAL,GAAUA,EAAV;AACA,UAAKE,IAAL,GAAYA,IAAZ;AACA,UAAKM,iBAAL,GAAyBA,iBAAzB;;AAEA;AACA,UAAKK,GAAL,GAAW,IAAX;;AAEA;AACA,UAAKC,QAAL,GAAgB,IAAhB;;AAEA;AACA,UAAKC,SAAL,GAAiB,IAAjB;;AAEA;;;;AAIA,UAAKC,wBAAL,GAAgC,MAAKb,MAAL,CAAYa,wBAA5C;;AAEA,QAAI,MAAKC,gBAAL,IAAyB,IAA7B,EAAmC;AACjC;AACA,YAAKC,MAAL,CAAY,MAAKD,gBAAL,CAAsBJ,GAAlC;AACD;;AAED;AACA,UAAKC,QAAL,GAAgB,MAAKG,gBAAL,CAAsBH,QAAtB,GAAiC,MAAKG,gBAAL,CAAsBH,QAAvD,GAAkE,MAAlF;;AAEA;AACA,UAAKC,SAAL,GAAiB,MAAKE,gBAAL,CAAsBF,SAAtB,GAAkC,MAAKE,gBAAL,CAAsBF,SAAxD,GAAoE,MAArF;;AAEA,QAAI,MAAKZ,MAAL,CAAYgB,OAAZ,CAAoBC,cAApB,IAAsC,IAA1C,EAAgD;AAC9C;AACA,YAAKjB,MAAL,CAAYgB,OAAZ,CAAoBC,cAApB,CAAmCC,2BAAnC,CAA+D,MAAKlB,MAApE,EAA4E,MAAKc,gBAAjF;AACD;;AAED;;;;;;AAMA,UAAKd,MAAL,CAAYmB,iBAAZ,GAAgC,YAAW;AACzC,UAAIC,WAAW,KAAKvB,EAAL,CAAQwB,KAAR,EAAf;;AAEA;;;;;AAKAD,eAASE,OAAT;;AAEA,aAAOF,SAASG,OAAhB;AACD,KAX+B,CAW9BC,IAX8B,OAAhC;;AAaA,UAAK1B,UAAL,CAAgB2B,UAAhB,CAA2B,wBAA3B,EAAqD,EAAEC,QAAQ,MAAKA,MAAf,EAAuBC,aAAa,MAAKA,WAAzC,EAArD;AA3De;AA4DhB;;AAED;;;;;;;;2BAIOjB,G,EAAK;AACV,UAAIA,OAAO,IAAX,EAAiB;AACf,YAAIkB,aAAa,KAAK7B,IAAL,CAAU8B,kBAAV,CAA6BnB,GAA7B,CAAjB;AACA,aAAKA,GAAL,GAAWkB,UAAX;AACD;AACF;;;;;AAED;;;;2CAIuB;;AAErB;;;;AAIA,WAAKE,YAAL,GAAoB,KAAK9B,MAAL,CAAY+B,GAAZ,CAAgB,MAAhB,EAAwB,UAACC,KAAD,EAAQC,IAAR,EAAiB,CAE5D,CAFmB,CAApB;AAGD;;;;;;AAGHvC,qBAAqBwC,OAArB,GAA+B,CAC7B,SAD6B,EAE7B,WAF6B,EAG7B,IAH6B,EAI7B,YAJ6B,EAK7B,MAL6B,EAM7B,QAN6B,EAO7B,mBAP6B,EAQ7B,eAR6B,EAS7B,aAT6B,EAU7B,iBAV6B,EAW7B,mBAX6B,EAY7B,gBAZ6B,EAa7B,qBAb6B,EAc7B,oBAd6B,EAe7B,aAf6B,CAA/B;;kBAkBexC,oB","file":"outsideURLController.js","sourcesContent":["'use strict';\n\nimport ComponentController from \"../componentController\";\n\nclass OutsideURLController extends ComponentController {\n  constructor($filter,\n      $mdDialog,\n      $q,\n      $rootScope,\n      $sce,\n      $scope,\n      AnnotationService,\n      ConfigService,\n      NodeService,\n      NotebookService,\n      OutsideURLService,\n      ProjectService,\n      StudentAssetService,\n      StudentDataService,\n      UtilService) {\n    super($filter, $mdDialog, $rootScope, $scope,\n        AnnotationService, ConfigService, NodeService,\n        NotebookService, ProjectService, StudentAssetService,\n        StudentDataService, UtilService);\n    this.$q = $q;\n    this.$sce = $sce;\n    this.OutsideURLService = OutsideURLService;\n\n    // the url to the web page to display\n    this.url = null;\n\n    // the max width of the iframe\n    this.maxWidth = null;\n\n    // the max height of the iframe\n    this.maxHeight = null;\n\n    /*\n     * get the original component content. this is used when showing\n     * previous work from another component.\n     */\n    this.originalComponentContent = this.$scope.originalComponentContent;\n\n    if (this.componentContent != null) {\n      // set the url\n      this.setURL(this.componentContent.url);\n    }\n\n    // get the max width\n    this.maxWidth = this.componentContent.maxWidth ? this.componentContent.maxWidth : 'none';\n\n    // get the max height\n    this.maxHeight = this.componentContent.maxHeight ? this.componentContent.maxHeight : 'none';\n\n    if (this.$scope.$parent.nodeController != null) {\n      // register this component with the parent node\n      this.$scope.$parent.nodeController.registerComponentController(this.$scope, this.componentContent);\n    }\n\n    /**\n     * Get the component state from this component. The parent node will\n     * call this function to obtain the component state when it needs to\n     * save student data.\n     * @return a promise of a component state containing the student data\n     */\n    this.$scope.getComponentState = function() {\n      var deferred = this.$q.defer();\n\n      /*\n       * the student does not have any unsaved changes in this component\n       * so we don't need to save a component state for this component.\n       * we will immediately resolve the promise here.\n       */\n      deferred.resolve();\n\n      return deferred.promise;\n    }.bind(this);\n\n    this.$rootScope.$broadcast('doneRenderingComponent', { nodeId: this.nodeId, componentId: this.componentId });\n  }\n\n  /**\n   * Set the url\n   * @param url the url\n   */\n  setURL(url) {\n    if (url != null) {\n      var trustedURL = this.$sce.trustAsResourceUrl(url);\n      this.url = trustedURL;\n    }\n  };\n\n  /**\n   * Register the the listener that will listen for the exit event\n   * so that we can perform saving before exiting.\n   */\n  registerExitListener() {\n\n    /*\n     * Listen for the 'exit' event which is fired when the student exits\n     * the VLE. This will perform saving before the VLE exits.\n     */\n    this.exitListener = this.$scope.$on('exit', (event, args) => {\n\n    });\n  };\n}\n\nOutsideURLController.$inject = [\n  '$filter',\n  '$mdDialog',\n  '$q',\n  '$rootScope',\n  '$sce',\n  '$scope',\n  'AnnotationService',\n  'ConfigService',\n  'NodeService',\n  'NotebookService',\n  'OutsideURLService',\n  'ProjectService',\n  'StudentAssetService',\n  'StudentDataService',\n  'UtilService'\n];\n\nexport default OutsideURLController;\n"]}