{"version":3,"sources":["summaryAuthoringController.es6"],"names":["SummaryAuthoringController","$filter","$mdDialog","$q","$rootScope","$scope","AnnotationService","ConfigService","NodeService","NotebookService","NotificationService","ProjectService","StudentAssetService","StudentDataService","SummaryService","UtilService","authoringComponentContent","summaryComponentId","components","getComponentsByNodeId","summaryNodeId","numberOfAllowedComponents","allowedComponent","component","isComponentTypeAllowed","type","id","componentId","authoringViewComponentChanged","componentType","SummaryController","$inject"],"mappings":"AAAA;;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;IAEMA,0B;;;;;AACJ,sCAAYC,OAAZ,EACIC,SADJ,EAEIC,EAFJ,EAGIC,UAHJ,EAIIC,MAJJ,EAKIC,iBALJ,EAMIC,aANJ,EAOIC,WAPJ,EAQIC,eARJ,EASIC,mBATJ,EAUIC,cAVJ,EAWIC,mBAXJ,EAYIC,kBAZJ,EAaIC,cAbJ,EAcIC,WAdJ,EAciB;AAAA;;AAAA,mGACTd,OADS,EAEXC,SAFW,EAGXC,EAHW,EAIXC,UAJW,EAKXC,MALW,EAMXC,iBANW,EAOXC,aAPW,EAQXC,WARW,EASXC,eATW,EAUXE,cAVW,EAWXC,mBAXW,EAYXC,kBAZW,EAaXC,cAbW,EAcXC,WAdW;AAehB;;;;oDAE+B;AAC9B,WAAKC,yBAAL,CAA+BC,kBAA/B,GAAoD,IAApD;AACA,UAAMC,UAAU,GAAG,KAAKC,qBAAL,CAA2B,KAAKH,yBAAL,CAA+BI,aAA1D,CAAnB;AACA,UAAIC,yBAAyB,GAAG,CAAhC;AACA,UAAIC,gBAAgB,GAAG,IAAvB;AAJ8B;AAAA;AAAA;;AAAA;AAK9B,6BAAsBJ,UAAtB,8HAAkC;AAAA,cAAzBK,SAAyB;;AAChC,cAAI,KAAKC,sBAAL,CAA4BD,SAAS,CAACE,IAAtC,KAA+CF,SAAS,CAACG,EAAV,IAAgB,KAAKC,WAAxE,EAAqF;AACnFN,YAAAA,yBAAyB,IAAI,CAA7B;AACAC,YAAAA,gBAAgB,GAAGC,SAAnB;AACD;AACF;AAV6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAW9B,UAAIF,yBAAyB,IAAI,CAAjC,EAAoC;AAClC,aAAKL,yBAAL,CAA+BC,kBAA/B,GAAoDK,gBAAgB,CAACI,EAArE;AACD;;AACD,WAAKE,6BAAL;AACD;;;2CAEsBC,a,EAAe;AACpC,aAAO,KAAKf,cAAL,CAAoBU,sBAApB,CAA2CK,aAA3C,CAAP;AACD;;;;EAnDsCC,6B;;AAsDzC9B,0BAA0B,CAAC+B,OAA3B,GAAqC,CACnC,SADmC,EAEnC,WAFmC,EAGnC,IAHmC,EAInC,YAJmC,EAKnC,QALmC,EAMnC,mBANmC,EAOnC,eAPmC,EAQnC,aARmC,EASnC,iBATmC,EAUnC,qBAVmC,EAWnC,gBAXmC,EAYnC,qBAZmC,EAanC,oBAbmC,EAcnC,gBAdmC,EAenC,aAfmC,CAArC;eAkBe/B,0B","sourcesContent":["'use strict';\n\nimport SummaryController from \"./summaryController\";\n\nclass SummaryAuthoringController extends SummaryController {\n  constructor($filter,\n      $mdDialog,\n      $q,\n      $rootScope,\n      $scope,\n      AnnotationService,\n      ConfigService,\n      NodeService,\n      NotebookService,\n      NotificationService,\n      ProjectService,\n      StudentAssetService,\n      StudentDataService,\n      SummaryService,\n      UtilService) {\n    super($filter,\n        $mdDialog,\n        $q,\n        $rootScope,\n        $scope,\n        AnnotationService,\n        ConfigService,\n        NodeService,\n        NotebookService,\n        ProjectService,\n        StudentAssetService,\n        StudentDataService,\n        SummaryService,\n        UtilService);\n  }\n\n  authoringSummaryNodeIdChanged() {\n    this.authoringComponentContent.summaryComponentId = null;\n    const components = this.getComponentsByNodeId(this.authoringComponentContent.summaryNodeId);\n    let numberOfAllowedComponents = 0;\n    let allowedComponent = null;\n    for (let component of components) {\n      if (this.isComponentTypeAllowed(component.type) && component.id != this.componentId) {\n        numberOfAllowedComponents += 1;\n        allowedComponent = component;\n      }\n    }\n    if (numberOfAllowedComponents == 1) {\n      this.authoringComponentContent.summaryComponentId = allowedComponent.id;\n    }\n    this.authoringViewComponentChanged();\n  }\n\n  isComponentTypeAllowed(componentType) {\n    return this.SummaryService.isComponentTypeAllowed(componentType);\n  }\n}\n\nSummaryAuthoringController.$inject = [\n  '$filter',\n  '$mdDialog',\n  '$q',\n  '$rootScope',\n  '$scope',\n  'AnnotationService',\n  'ConfigService',\n  'NodeService',\n  'NotebookService',\n  'NotificationService',\n  'ProjectService',\n  'StudentAssetService',\n  'StudentDataService',\n  'SummaryService',\n  'UtilService'\n];\n\nexport default SummaryAuthoringController;\n"],"file":"summaryAuthoringController.js"}