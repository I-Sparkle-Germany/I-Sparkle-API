{"version":3,"sources":["summaryController.es6"],"names":["SummaryController","$filter","$mdDialog","$rootScope","$scope","AnnotationService","ConfigService","NodeService","NotebookService","ProjectService","StudentAssetService","StudentDataService","SummaryService","UtilService","summaryNodeId","componentContent","summaryComponentId","summaryStudentDataType","chartType","prompt","showPromptFromOtherComponent","otherPrompt","getOtherPrompt","isStudent","isPreview","isStudentRun","otherStepTitle","getOtherStepTitle","studentHasWork","isStudentHasWork","setPeriodIdIfNecessary","nodeId","componentId","otherComponent","getComponentByNodeIdAndComponentId","componentStates","getComponentStatesByNodeIdAndComponentId","length","getNodePositionAndTitleByNodeId","summarySource","periodId","getPeriodId","ComponentController","$inject"],"mappings":"AAAA;;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;IAEMA,iB;;;;;AACJ,6BAAYC,OAAZ,EACIC,SADJ,EAEIC,UAFJ,EAGIC,MAHJ,EAIIC,iBAJJ,EAKIC,aALJ,EAMIC,WANJ,EAOIC,eAPJ,EAQIC,cARJ,EASIC,mBATJ,EAUIC,kBAVJ,EAWIC,cAXJ,EAYIC,WAZJ,EAYiB;AAAA;;AAAA;;AACf,2FAAMZ,OAAN,EACIC,SADJ,EAEIC,UAFJ,EAGIC,MAHJ,EAIIC,iBAJJ,EAKIC,aALJ,EAMIC,WANJ,EAOIC,eAPJ,EAQIC,cARJ,EASIC,mBATJ,EAUIC,kBAVJ,EAWIE,WAXJ;AAYA,UAAKD,cAAL,GAAsBA,cAAtB;AACA,UAAKE,aAAL,GAAqB,MAAKC,gBAAL,CAAsBD,aAA3C;AACA,UAAKE,kBAAL,GAA0B,MAAKD,gBAAL,CAAsBC,kBAAhD;AACA,UAAKC,sBAAL,GAA8B,MAAKF,gBAAL,CAAsBE,sBAApD;AACA,UAAKC,SAAL,GAAiB,MAAKH,gBAAL,CAAsBG,SAAvC;AACA,UAAKC,MAAL,GAAc,MAAKJ,gBAAL,CAAsBI,MAApC;;AACA,QAAI,MAAKJ,gBAAL,CAAsBK,4BAA1B,EAAwD;AACtD,YAAKC,WAAL,GAAmB,MAAKC,cAAL,CAAoB,MAAKR,aAAzB,EAAwC,MAAKE,kBAA7C,CAAnB;AACD;;AACD,UAAKO,SAAL,GAAiB,MAAKjB,aAAL,CAAmBkB,SAAnB,MAAkC,MAAKlB,aAAL,CAAmBmB,YAAnB,EAAnD;;AACA,QAAI,MAAKF,SAAT,EAAoB;AAClB,YAAKG,cAAL,GAAsB,MAAKC,iBAAL,EAAtB;AACA,YAAKC,cAAL,GAAsB,MAAKC,gBAAL,EAAtB;AACD;;AACD,UAAKC,sBAAL;;AA3Be;AA4BhB;;;;mCAEcC,M,EAAQC,W,EAAa;AAClC,UAAMC,cAAc,GAAG,KAAKxB,cAAL,CAAoByB,kCAApB,CACnBH,MADmB,EACXC,WADW,CAAvB;;AAEA,UAAIC,cAAc,IAAI,IAAtB,EAA4B;AAC1B,eAAOA,cAAc,CAACd,MAAtB;AACD;;AACD,aAAO,IAAP;AACD;;;uCAEkB;AACjB,UAAMgB,eAAe,GAAG,KAAKxB,kBAAL,CAAwByB,wCAAxB,CACpB,KAAKtB,aADe,EACA,KAAKE,kBADL,CAAxB;AAEA,aAAOmB,eAAe,CAACE,MAAhB,GAAyB,CAAhC;AACD;;;wCAEmB;AAClB,aAAO,KAAK5B,cAAL,CAAoB6B,+BAApB,CAAoD,KAAKxB,aAAzD,CAAP;AACD;;;6CAEwB;AACvB,UAAI,KAAKR,aAAL,CAAmBmB,YAAnB,EAAJ,EAAuC;AACrC,YAAI,KAAKV,gBAAL,CAAsBwB,aAAtB,KAAwC,QAA5C,EAAsD;AACpD,eAAKC,QAAL,GAAgB,KAAKlC,aAAL,CAAmBmC,WAAnB,EAAhB;AACD,SAFD,MAEO,IAAI,KAAK1B,gBAAL,CAAsBwB,aAAtB,KAAwC,YAA5C,EAA0D;AAC/D,eAAKC,QAAL,GAAgB,IAAhB;AACD;AACF;AACF;;;;EAtE6BE,+B;;AAyEhC1C,iBAAiB,CAAC2C,OAAlB,GAA4B,CACxB,SADwB,EAExB,WAFwB,EAGxB,YAHwB,EAIxB,QAJwB,EAKxB,mBALwB,EAMxB,eANwB,EAOxB,aAPwB,EAQxB,iBARwB,EASxB,gBATwB,EAUxB,qBAVwB,EAWxB,oBAXwB,EAYxB,gBAZwB,EAaxB,aAbwB,CAA5B;eAgBe3C,iB","sourcesContent":["'use strict';\n\nimport ComponentController from '../componentController';\n\nclass SummaryController extends ComponentController {\n  constructor($filter,\n      $mdDialog,\n      $rootScope,\n      $scope,\n      AnnotationService,\n      ConfigService,\n      NodeService,\n      NotebookService,\n      ProjectService,\n      StudentAssetService,\n      StudentDataService,\n      SummaryService,\n      UtilService) {\n    super($filter,\n        $mdDialog,\n        $rootScope,\n        $scope,\n        AnnotationService,\n        ConfigService,\n        NodeService,\n        NotebookService,\n        ProjectService,\n        StudentAssetService,\n        StudentDataService,\n        UtilService);\n    this.SummaryService = SummaryService;\n    this.summaryNodeId = this.componentContent.summaryNodeId;\n    this.summaryComponentId = this.componentContent.summaryComponentId;\n    this.summaryStudentDataType = this.componentContent.summaryStudentDataType;\n    this.chartType = this.componentContent.chartType;\n    this.prompt = this.componentContent.prompt;\n    if (this.componentContent.showPromptFromOtherComponent) {\n      this.otherPrompt = this.getOtherPrompt(this.summaryNodeId, this.summaryComponentId);\n    }\n    this.isStudent = this.ConfigService.isPreview() || this.ConfigService.isStudentRun();\n    if (this.isStudent) {\n      this.otherStepTitle = this.getOtherStepTitle();\n      this.studentHasWork = this.isStudentHasWork();\n    }\n    this.setPeriodIdIfNecessary();\n  }\n\n  getOtherPrompt(nodeId, componentId) {\n    const otherComponent = this.ProjectService.getComponentByNodeIdAndComponentId(\n        nodeId, componentId);\n    if (otherComponent != null) {\n      return otherComponent.prompt;\n    }\n    return null;\n  }\n\n  isStudentHasWork() {\n    const componentStates = this.StudentDataService.getComponentStatesByNodeIdAndComponentId(\n        this.summaryNodeId, this.summaryComponentId);\n    return componentStates.length > 0;\n  }\n\n  getOtherStepTitle() {\n    return this.ProjectService.getNodePositionAndTitleByNodeId(this.summaryNodeId);\n  }\n\n  setPeriodIdIfNecessary() {\n    if (this.ConfigService.isStudentRun()) {\n      if (this.componentContent.summarySource === 'period') {\n        this.periodId = this.ConfigService.getPeriodId();\n      } else if (this.componentContent.summarySource === 'allPeriods') {\n        this.periodId = null;\n      }\n    }\n  }\n}\n\nSummaryController.$inject = [\n    '$filter',\n    '$mdDialog',\n    '$rootScope',\n    '$scope',\n    'AnnotationService',\n    'ConfigService',\n    'NodeService',\n    'NotebookService',\n    'ProjectService',\n    'StudentAssetService',\n    'StudentDataService',\n    'SummaryService',\n    'UtilService'\n];\n\nexport default SummaryController;"],"file":"summaryController.js"}