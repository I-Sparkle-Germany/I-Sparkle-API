{"version":3,"sources":["tableService.es6"],"names":["TableService","StudentDataService","UtilService","component","id","generateKey","type","showSaveButton","showSubmitButton","globalCellSize","numRows","numColumns","tableData","componentToCopy","createComponent","prompt","componentStateFromOtherComponent","componentState","createComponentState","otherComponentType","componentType","studentData","studentDataCopy","makeCopyOfJSONObject","componentStates","componentEvents","nodeEvents","node","result","length","submitRequired","c","l","isSubmit","$inject"],"mappings":"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","file":"tableService.js","sourcesContent":["import NodeService from '../../services/nodeService';\n\nclass TableService extends NodeService {\n\n    constructor(StudentDataService,\n                UtilService) {\n        super();\n        this.StudentDataService = StudentDataService;\n        this.UtilService = UtilService;\n    }\n\n    /**\n     * Create an Table component object\n     * @returns a new Table component object\n     */\n    createComponent() {\n        var component = {};\n        component.id = this.UtilService.generateKey();\n        component.type = 'Table';\n        component.showSaveButton = false;\n        component.showSubmitButton = false;\n        component.globalCellSize = 10;\n        component.numRows = 3;\n        component.numColumns = 3;\n        component.tableData = [\n            [\n                {\n                    \"text\": \"\",\n                    \"editable\": true,\n                    \"size\": null\n                },\n                {\n                    \"text\": \"\",\n                    \"editable\": true,\n                    \"size\": null\n                },\n                {\n                    \"text\": \"\",\n                    \"editable\": true,\n                    \"size\": null\n                }\n            ],\n            [\n                {\n                    \"text\": \"\",\n                    \"editable\": true,\n                    \"size\": null\n                },\n                {\n                    \"text\": \"\",\n                    \"editable\": true,\n                    \"size\": null\n                },\n                {\n                    \"text\": \"\",\n                    \"editable\": true,\n                    \"size\": null\n                }\n            ],\n            [\n                {\n                    \"text\": \"\",\n                    \"editable\": true,\n                    \"size\": null\n                },\n                {\n                    \"text\": \"\",\n                    \"editable\": true,\n                    \"size\": null\n                },\n                {\n                    \"text\": \"\",\n                    \"editable\": true,\n                    \"size\": null\n                }\n            ]\n        ];\n\n        return component;\n    }\n\n    /**\n     * Copies an existing Table component object\n     * @returns a copied Table component object\n     */\n    copyComponent(componentToCopy) {\n        var component = this.createComponent();\n        component.prompt = componentToCopy.prompt;\n        component.showSaveButton = componentToCopy.showSaveButton;\n        component.showSubmitButton = componentToCopy.showSubmitButton;\n        component.globalCellSize = componentToCopy.globalCellSize;\n        component.numRows = componentToCopy.numRows;\n        component.numColumns = componentToCopy.numColumns;\n        component.tableData = componentToCopy.tableData;\n        return component;\n    }\n\n    /**\n     * Populate a component state with the data from another component state\n     * @param componentStateFromOtherComponent the component state to obtain the data from\n     * @return a new component state that contains the student data from the other\n     * component state\n     */\n    populateComponentState(componentStateFromOtherComponent) {\n        var componentState = null;\n\n        if (componentStateFromOtherComponent != null) {\n\n            // create an empty component state\n            componentState = this.StudentDataService.createComponentState();\n\n            // get the component type of the other component state\n            var otherComponentType = componentStateFromOtherComponent.componentType;\n\n            if (otherComponentType === 'Table') {\n                // the other component is an Table component\n\n                // get the student data from the other component state\n                var studentData = componentStateFromOtherComponent.studentData;\n\n                // create a copy of the student data\n                var studentDataCopy = this.UtilService.makeCopyOfJSONObject(studentData);\n\n                // set the student data into the new component state\n                componentState.studentData = studentDataCopy;\n            }\n        }\n\n        return componentState;\n    };\n\n    /**\n     * Check if the component was completed\n     * @param component the component object\n     * @param componentStates the component states for the specific component\n     * @param componentEvents the events for the specific component\n     * @param nodeEvents the events for the parent node of the component\n     * @param node parent node of the component\n     * @returns whether the component was completed\n     */\n    isCompleted(component, componentStates, componentEvents, nodeEvents, node) {\n        let result = false;\n\n        if (componentStates && componentStates.length) {\n            let submitRequired = node.showSubmitButton || (component.showSubmitButton && !node.showSaveButton);\n\n            // loop through all the component states\n            for (let c = 0, l = componentStates.length; c < l; c++) {\n\n                // the component state\n                let componentState = componentStates[c];\n\n                // get the student data from the component state\n                let studentData = componentState.studentData;\n\n                if (studentData != null) {\n                    let tableData = studentData.tableData;\n\n                    if (tableData != null) {\n                        // there is a table data so the component has saved work\n                        // TODO: check for actual student data from the table (compare to starting state)\n                        if (submitRequired) {\n                            // completion requires a submission, so check for isSubmit\n                            if (componentState.isSubmit) {\n                                result = true;\n                                break;\n                            }\n                        } else {\n                            result = true;\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    };\n}\n\nTableService.$inject = [\n    'StudentDataService',\n    'UtilService'\n];\n\nexport default TableService;\n"]}