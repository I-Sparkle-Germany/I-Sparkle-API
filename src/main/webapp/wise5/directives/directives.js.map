{"version":3,"sources":["directives.es6"],"names":[],"mappings":"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","file":"directives.js","sourcesContent":["'use strict';\n\nimport AnnotationController from './annotation/annotationController';\nimport ComponentAnnotationsController from './componentAnnotations/componentAnnotationsController';\nimport PossibleScoreController from './possibleScore/possibleScoreController';\nimport WiselinkController from './wiselink/wiselinkController';\n\nclass ComponentDirective {\n    constructor($injector, $compile, ConfigService, NodeService, NotebookService, ProjectService, StudentDataService) {\n        this.restrict = 'E';\n        this.$injector = $injector;\n        this.$compile = $compile;\n        this.ConfigService = ConfigService;\n        this.NodeService = NodeService;\n        this.NotebookService = NotebookService;\n        this.ProjectService = ProjectService;\n        this.StudentDataService = StudentDataService;\n    }\n\n    static directiveFactory($injector, $compile, ConfigService, NodeService, NotebookService, ProjectService, StudentDataService) {\n        ComponentDirective.instance = new ComponentDirective($injector, $compile, ConfigService, NodeService, NotebookService, ProjectService, StudentDataService);\n        return ComponentDirective.instance;\n    }\n\n    link($scope, element, attrs) {\n        var nodeId = attrs.nodeid;\n        var componentId = attrs.componentid;\n        var componentState = attrs.componentstate;\n        var workgroupId = null;\n        var teacherWorkgroupId = null;\n        var originalNodeId = attrs.originalnodeid;\n        var originalComponentId = attrs.originalcomponentid;\n\n        $scope.mode = \"student\";\n        if (attrs.mode) {\n            $scope.mode = attrs.mode;\n        }\n\n        if (attrs.workgroupid != null) {\n            try {\n                workgroupId = parseInt(attrs.workgroupid);\n            } catch(e) {\n\n            }\n        }\n\n        if (attrs.teacherworkgroupid) {\n            try {\n                teacherWorkgroupId = parseInt(attrs.teacherworkgroupid);\n            } catch(e) {\n\n            }\n        }\n\n        if (componentState == null || componentState === '') {\n            componentState = ComponentDirective.instance.StudentDataService.getLatestComponentStateByNodeIdAndComponentId(nodeId, componentId);\n        } else {\n            componentState = angular.fromJson(componentState);\n            nodeId = componentState.nodeId;\n            componentId = componentState.componentId;\n\n        }\n\n        var authoringComponentContent = ComponentDirective.instance.ProjectService.getComponentByNodeIdAndComponentId(nodeId, componentId);\n        var componentContent = ComponentDirective.instance.ProjectService.injectAssetPaths(authoringComponentContent);\n\n        // replace any student names in the component content\n        componentContent = ComponentDirective.instance.ConfigService.replaceStudentNames(componentContent);\n\n        if (this.NotebookService.isNotebookEnabled()) {\n            // inject the click attribute that will snip the image when the image is clicked\n            componentContent = ComponentDirective.instance.ProjectService.injectClickToSnipImage(componentContent);\n        }\n\n        $scope.componentContent = componentContent;\n        $scope.authoringComponentContent = authoringComponentContent;\n        $scope.componentState = componentState;\n        $scope.componentTemplatePath = ComponentDirective.instance.NodeService.getComponentTemplatePath(componentContent.type);\n        $scope.nodeId = nodeId;\n        $scope.workgroupId = workgroupId;\n        $scope.teacherWorkgroupId = teacherWorkgroupId;\n        $scope.type = componentContent.type;\n\n        if (originalNodeId != null && originalComponentId != null) {\n            /*\n             * set the original node id and component id. this is used\n             * when we are showing previous work from another component.\n             */\n            $scope.originalNodeId = originalNodeId;\n            $scope.originalComponentId = originalComponentId;\n\n            // get the original component\n            var originalComponentContent = ComponentDirective.instance.ProjectService.getComponentByNodeIdAndComponentId(originalNodeId, originalComponentId);\n            $scope.originalComponentContent = originalComponentContent;\n        }\n\n        var componentHTML = '<div id=\"{{component.id}}\" class=\"component-wrapper\">' +\n            '<div ng-include=\"componentTemplatePath\" class=\"component component--{{type}}\"></div></div>';\n\n        if (componentHTML != null) {\n            element.html(componentHTML);\n            ComponentDirective.instance.$compile(element.contents())($scope);\n        }\n    }\n}\n\nclass ClassResponseDirective {\n    constructor(StudentStatusService, ConfigService) {\n        this.restrict = 'E';\n        this.scope = {\n            response: '=',\n            submitbuttonclicked: '&',\n            studentdatachanged: '&'\n        };\n        this.templateUrl = 'wise5/components/discussion/classResponse.html';\n        this.StudentStatusService = StudentStatusService;\n        this.ConfigService = ConfigService;\n    }\n\n    static directiveFactory(StudentStatusService, ConfigService) {\n        ClassResponseDirective.instance = new ClassResponseDirective(StudentStatusService, ConfigService);\n        return ClassResponseDirective.instance;\n    }\n\n    link($scope, $element, attrs) {\n        $scope.element = $element[0];\n\n        $scope.getAvatarColorForWorkgroupId = function (workgroupId) {\n            return ClassResponseDirective.instance.StudentStatusService.getAvatarColorForWorkgroupId(workgroupId);\n        };\n\n        $scope.replyEntered = function($event, response) {\n            if ($event.keyCode === 13) {\n                if (response.replyText) {\n                    $scope.submitButtonClicked(response);\n                }\n            }\n        }\n\n        // handle the submit button click\n        $scope.submitButtonClicked = function(response) {\n            $scope.submitbuttonclicked({r: response});\n        };\n\n        $scope.expanded = false;\n\n        $scope.$watch(\n            function () { return $scope.response.replies.length; },\n            function (oldValue, newValue) {\n                if (newValue !== oldValue) {\n                    $scope.toggleExpanded(true);\n                    $scope.response.replyText = '';\n                }\n            }\n        );\n\n        $scope.toggleExpanded = function (open) {\n            if (open) {\n                $scope.expanded = true;\n            } else {\n                $scope.expanded = !$scope.expanded;\n            }\n\n            if ($scope.expanded) {\n                var $clist = $($scope.element).find('.discussion-comments__list');\n                setTimeout(function () {\n                    $clist.animate({scrollTop: $clist.height()}, 250);\n                }, 250);\n            }\n        };\n\n        $scope.adjustClientSaveTime = function(time) {\n            return ClassResponseDirective.instance.ConfigService.convertToClientTimestamp(time);\n        };\n    };\n}\n\nclass CompileDirective {\n    constructor($compile) {\n\n        this.$compile = $compile;\n    }\n\n    static directiveFactory($compile) {\n        CompileDirective.instance = new CompileDirective($compile);\n        return CompileDirective.instance;\n    }\n\n    link(scope, ele, attrs) {\n        scope.$watch(\n            function(scope) {\n                return scope.$eval(attrs.compile);\n            },\n            function(value) {\n                ele.html(value);\n                CompileDirective.instance.$compile(ele.contents())(scope);\n            }\n        );\n    }\n}\n\n/**\n * A directive that asks the user if they are sure they want to change a\n * number input value to a lower value. We will not ask the user if they\n * change the number to a higher value. This directive is intended to\n * be used in cases when changing to a lower value will have a destructive\n * effect such as setting the number of rows in the authoring view of the\n * table component.\n */\nclass ConfirmNumberDecrease {\n    constructor() {\n        this.priority = -1;\n        this.restrict = 'A';\n        this.require = 'ngModel';\n    }\n\n    static directiveFactory() {\n        ConfirmNumberDecrease.instance = new ConfirmNumberDecrease();\n        return ConfirmNumberDecrease.instance;\n    }\n\n    link($scope, element, attrs, modelCtrl) {\n\n        // get the message\n        var message = attrs.confirmNumberDecrease;\n\n        modelCtrl.$parsers.push(function (newValue) {\n\n            // get the old value\n            var oldValue = modelCtrl.$modelValue;\n\n            // check if the new value is less than the old value\n            if (newValue < oldValue) {\n                /*\n                 * the new value is less than the old value so we will ask them to confirm\n                 * the change since it may be destructive\n                 */\n                var answer = confirm(message);\n\n                if (answer) {\n                    // the user wants to change the value\n                    return newValue;\n                } else {\n                    // the user does not want to change the value so we will roll it back\n                    modelCtrl.$setViewValue(oldValue);\n                    modelCtrl.$render();\n                    return oldValue;\n                }\n            } else {\n                /*\n                 * the new value is equal or greater than the old value so we do\n                 * not need the user to confirm the change\n                 */\n                return newValue;\n            }\n        });\n    }\n}\n\n/**\n * Disable the backspace key so that it does not navigate the user back\n * in their browser history.\n */\nclass DisableDeleteKeypress {\n    constructor($document) {\n        this.restrict = 'A';\n        this.$document = $document;\n    }\n\n    static directiveFactory($document) {\n        DisableDeleteKeypress.instance = new DisableDeleteKeypress($document);\n        return DisableDeleteKeypress.instance;\n    }\n\n    link($document) {\n        DisableDeleteKeypress.instance.$document.bind('keydown', function(e) {\n\n            // check for the delete key press\n            if (e.keyCode === 8) {\n                // the delete key was pressed\n\n                // get the name of the node e.g. body, input, div, etc.\n                let nodeName = e.target.nodeName;\n\n                // get the type if applicable e.g. text, password, file, etc.\n                let targetType = e.target.type;\n\n                if (nodeName != null) {\n                    nodeName = nodeName.toLowerCase();\n                }\n\n                if (targetType != null) {\n                    targetType = targetType.toLowerCase();\n                }\n\n                let contentEditable = e.target.contentEditable === 'true';\n\n                if ((nodeName === 'input' && targetType === 'text') ||\n                    (nodeName === 'input' && targetType === 'password') ||\n                    (nodeName === 'input' && targetType === 'file') ||\n                    (nodeName === 'input' && targetType === 'search') ||\n                    (nodeName === 'input' && targetType === 'email') ||\n                    (nodeName === 'input' && targetType === 'number') ||\n                    (nodeName === 'input' && targetType === 'date') ||\n                    nodeName === 'textarea' || contentEditable) {\n                    /*\n                     * the user is typing in a valid input element so we will\n                     * allow the delete key press\n                     */\n                } else {\n                    /*\n                     * the user is not typing in an input element so we will\n                     * not allow the delete key press\n                     */\n                    e.preventDefault();\n                }\n            }\n        });\n    }\n}\n\n/**\n * Listen for the backspace key press so we can perform special processing\n * specific for components such as deleting a point in a graph component.\n */\nclass ListenForDeleteKeypress {\n    constructor($document) {\n        this.restrict = 'A';\n        this.$document = $document;\n    }\n\n    static directiveFactory($document) {\n        ListenForDeleteKeypress.instance = new ListenForDeleteKeypress($document);\n        return ListenForDeleteKeypress.instance;\n    }\n\n    link($scope) {\n        ListenForDeleteKeypress.instance.$document.bind('keydown', function(e) {\n\n            // check for the delete key press\n            if (e.keyCode === 8) {\n                // the delete key was pressed\n\n                // fire the deleteKeyPressed event\n                $scope.$broadcast('deleteKeyPressed');\n            }\n        })\n    }\n}\n\n/**\n * Make the element draggable\n */\nclass DraggableDirective {\n    constructor($document) {\n        this.restrict = 'A';\n        this.$document = $document;\n    }\n\n    static directiveFactory($document) {\n        DraggableDirective.instance = new DraggableDirective($document);\n        return DraggableDirective.instance;\n    }\n\n    /**\n     * Set up the element\n     */\n    link(scope, element, attr) {\n\n        var $document = this.$document;\n\n        /*\n         * used to remember the start x and y coordinate of the top left corner\n         * of the element\n         */\n        var startX = 0;\n        var startY = 0;\n\n        // set the attributes into the element so we can access them later\n        this.attributes = attr;\n\n        /*\n         * listen for the mouse down event so we can set up the variables\n         * to start dragging\n         */\n        element.on('mousedown', (event) => {\n\n            // Prevent default dragging of selected content\n            event.preventDefault();\n\n            var leftString = null;\n            var topString = null;\n            var left = null;\n            var top = null;\n\n            if (element != null && element.length > 0) {\n                /*\n                 * get the pixel location of the top left corner relative to its\n                 * parent container\n                 */\n                leftString = element[0].style.left;\n                topString = element[0].style.top;\n\n                if (leftString != null) {\n                    // get the integer value of the left\n                    left = parseInt(leftString.replace('px', ''));\n                }\n\n                if (topString != null) {\n                    // get the integer value of the top\n                    top = parseInt(topString.replace('px', ''));\n                }\n\n                /*\n                 * get the position of the mouse and subtract the distance from\n                 * the upper left corner of the parent container to the upper\n                 * left corner of the element.\n                 * this will be equal to the sum of two values.\n                 * the first value is the x and y difference between the upper\n                 * left corner of the browser screen to the upper left corner\n                 * of the parent container.\n                 * the second value is the x and y difference between the upper\n                 * left corner of the element to the mouse position.\n                 * we will use the sum of these two values later to calculate\n                 * where to place the element when it is being dragged.\n                 */\n                startX = event.pageX - left;\n                startY = event.pageY - top;\n\n                // add mouse listeners to handle moving the element\n                $document.on('mousemove', mousemove);\n                $document.on('mouseup', mouseup);\n            }\n        });\n\n        /**\n         * Called when the user is dragging the element\n         * @param event the event\n         */\n        function mousemove(event) {\n\n            var linkTypeChooserWidth = null;\n            var linkTypeChooserHeight = null;\n\n            // get the width and height of the element we are dragging\n            var linkTypeChooserWidthString = angular.element(element[0]).css('width');\n            var linkTypeChooserHeightString = angular.element(element[0]).css('height');\n\n            if (linkTypeChooserWidthString != null && linkTypeChooserHeightString != null) {\n                // get the integer values of the width and height\n                linkTypeChooserWidth = parseInt(linkTypeChooserWidthString.replace('px', ''));\n                linkTypeChooserHeight = parseInt(linkTypeChooserHeightString.replace('px', ''));\n            }\n\n            /*\n             * get the width and height of the container that we want to restrict\n             * the element within. the user will not be able to drag the element\n             * outside of these boundaries.\n             */\n            var overlayWidth = element.scope().$eval(element[0].attributes['container-width'].value);\n            var overlayHeight = element.scope().$eval(element[0].attributes['container-height'].value);\n\n            /*\n             * calculate the x and y position of where the element should be\n             * placed. we will calculate the position by taking the mouse\n             * position and subtracting the value we previously calculated\n             * in the mousedown event. performing the subtraction will give\n             * us the x and y difference between the upper left corner of the\n             * parent container and the upper left corner of the element.\n             */\n            var x = event.pageX - startX;\n            var y = event.pageY - startY;\n\n            var top = 0;\n\n            if (element.scope().conceptMapController.mode == 'authoring') {\n                /*\n                 * if we are in authoring mode we need to include the offset of\n                 * the container for some reason.\n                 * TODO: figure out why the offset is required in authoring mode\n                 * but not in student mode.\n                 */\n\n                // get the concept map container\n                var conceptMapContainer = angular.element('#conceptMapContainer');\n\n                // get the offset of the container relative to the whole page\n                var offset = conceptMapContainer.offset();\n\n                // get the top offset\n                var offsetTop = offset.top;\n\n                // set the top to the offset\n                top = offsetTop;\n            }\n\n            if (x < 0) {\n                /*\n                 * the x position that we have calculated for the left\n                 * side of the element is past the left side of the parent\n                 * container so we will set the x position to 0 so that the\n                 * element is up against the left side of the parent container\n                 */\n                x = 0;\n            } else if((x + linkTypeChooserWidth) > overlayWidth) {\n                /*\n                 * the x position that we have calculated for the right\n                 * side of the element is past the right side of the parent\n                 * container so we will set the x position so that the element\n                 * is up against the right side of the parent container\n                 */\n                x = overlayWidth - linkTypeChooserWidth;\n            }\n\n            if (y < top) {\n                /*\n                 * the y position that we have calculated for the top\n                 * side of the element is past the top side of the parent\n                 * container so we will set the y position to 0 so that the\n                 * element is up against the top side of the parent container\n                 */\n                y = top;\n            } else if ((y + linkTypeChooserHeight) > (overlayHeight + top)) {\n                /*\n                 * the y position that we have calculated for the bottom\n                 * side of the element is past the bottom side of the parent\n                 * container so we will set the y position so that the element\n                 * is up against the bottom side of the parent container\n                 */\n                y = (overlayHeight + top) - linkTypeChooserHeight;\n            }\n\n            // move the element to the new position\n            element.css({\n                top: y + 'px',\n                left:  x + 'px'\n            });\n        }\n\n        /**\n         * Called when the user has released the mouse button\n         */\n        function mouseup() {\n            // remove the mousemove listener\n            $document.off('mousemove', mousemove);\n\n            // remove the mouseup listener\n            $document.off('mouseup', mouseup);\n        }\n    };\n}\n\n/**\n * Creates a link or button that the student can click on to navigate to\n * another step or activity in the project.\n */\nconst Wiselink = {\n    bindings: {\n        nodeId: '@',\n        linkText: '@',\n        tooltip: '@',\n        linkClass: '@',\n        type: '@'\n    },\n    templateUrl: 'wise5/directives/wiselink/wiselink.html',\n    controller: 'WiselinkController as wiselinkCtrl'\n}\n\nconst Annotation = {\n    bindings: {\n        annotation: '<',\n        type: '@',\n        mode: '<',\n        nodeId: '<',\n        componentId: '<',\n        fromWorkgroupId: '<',\n        toWorkgroupId: '<',\n        componentStateId: '<',\n        active: '<',\n        maxScore: '<'\n    },\n    templateUrl: 'wise5/directives/annotation/annotation.html',\n    controller: 'AnnotationController as annotationController'\n}\n\nconst ComponentAnnotations = {\n    bindings: {\n        annotations: '<',\n        maxScore: '<'\n    },\n    templateUrl: 'wise5/directives/componentAnnotations/componentAnnotations.html',\n    controller: 'ComponentAnnotationsController as componentAnnotationsCtrl'\n}\n\nconst PossibleScore = {\n    bindings: {\n        maxScore: '<'\n    },\n    templateUrl: 'wise5/directives/possibleScore/possibleScore.html',\n    controller: 'PossibleScoreController as possibleScoreCtrl'\n}\n\nlet Directives = angular.module('directives', []);\n\nClassResponseDirective.directiveFactory.$inject = ['StudentStatusService', 'ConfigService'];\nCompileDirective.directiveFactory.$inject = ['$compile'];\nComponentDirective.directiveFactory.$inject = ['$injector', '$compile', 'ConfigService', 'NodeService', 'NotebookService', 'ProjectService', 'StudentDataService'];\nConfirmNumberDecrease.directiveFactory.$inject = [];\nDisableDeleteKeypress.directiveFactory.$inject = ['$document'];\nListenForDeleteKeypress.directiveFactory.$inject = ['$document'];\nDraggableDirective.directiveFactory.$inject = ['$document'];\n\nDirectives.controller('AnnotationController', AnnotationController);\nDirectives.component('annotation', Annotation);\nDirectives.controller('ComponentAnnotationsController', ComponentAnnotationsController);\nDirectives.component('componentAnnotations', ComponentAnnotations);\nDirectives.controller('PossibleScoreController', PossibleScoreController);\nDirectives.component('wiselink', Wiselink);\nDirectives.controller('WiselinkController', WiselinkController);\nDirectives.component('possibleScore', PossibleScore);\nDirectives.directive('classResponse', ClassResponseDirective.directiveFactory);\nDirectives.directive('compile', CompileDirective.directiveFactory);\nDirectives.directive('component', ComponentDirective.directiveFactory);\nDirectives.directive('confirmNumberDecrease', ConfirmNumberDecrease.directiveFactory);\nDirectives.directive('disableDeleteKeypress', DisableDeleteKeypress.directiveFactory);\nDirectives.directive('draggable', DraggableDirective.directiveFactory);\nDirectives.directive('listenForDeleteKeypress', ListenForDeleteKeypress.directiveFactory);\n\nexport default Directives;\n"]}