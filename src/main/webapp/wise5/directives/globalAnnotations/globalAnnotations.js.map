{"version":3,"sources":["globalAnnotations.es6"],"names":["GlobalAnnotationsController","$mdDialog","$rootScope","$scope","$translate","AnnotationService","active","$onInit","setModel","$on","event","args","show","activeGlobalAnnotationGroups","getActiveGlobalAnnotationGroups","length","visible","$event","targetEvent","template","controller","GlobalAnnotationsDialogController","close","hide","$inject","GlobalAnnotations","bindings"],"mappings":"AAAA;;;;;;;;;;IAEMA,2B;AACF,yCAAYC,SAAZ,EACYC,UADZ,EAEYC,MAFZ,EAGYC,UAHZ,EAIYC,iBAJZ,EAI+B;AAAA;;AAAA;;AAC3B,aAAKJ,SAAL,GAAiBA,SAAjB;AACA,aAAKC,UAAL,GAAkBA,UAAlB;AACA,aAAKC,MAAL,GAAcA,MAAd;AACA,aAAKC,UAAL,GAAkBA,UAAlB;AACA,aAAKC,iBAAL,GAAyBA,iBAAzB;;AAEA,aAAKC,MAAL,GAAc,KAAd;;AAEA,aAAKC,OAAL,GAAe,YAAM;AACjB,kBAAKC,QAAL;AACH,SAFD;;AAIA;AACA,aAAKL,MAAL,CAAYM,GAAZ,CAAgB,yBAAhB,EAA2C,UAACC,KAAD,EAAQC,IAAR,EAAiB;AACxD,kBAAKH,QAAL;AACH,SAFD;;AAIA;AACA,aAAKN,UAAL,CAAgBO,GAAhB,CAAoB,qBAApB,EAA2C,UAACC,KAAD,EAAQC,IAAR,EAAiB;AACxD,kBAAKH,QAAL;AACH,SAFD;;AAIA;AACA,aAAKN,UAAL,CAAgBO,GAAhB,CAAoB,0BAApB,EAAgD,UAACC,KAAD,EAAQC,IAAR,EAAiB;AAC7D,kBAAKC,IAAL,CAAUF,KAAV;AACH,SAFD;AAGH;;;;mCAEU;AACP,gBAAIG,+BAA+B,KAAKR,iBAAL,CAAuBS,+BAAvB,EAAnC;;AAEA,gBAAID,6BAA6BE,MAAjC,EAAyC;AACrC,qBAAKC,OAAL,GAAe,IAAf;AACH,aAFD,MAEO;AACH,qBAAKA,OAAL,GAAe,KAAf;AACH;AACJ;;;6BAEIC,M,EAAQ;AACT;AACI,iBAAKhB,SAAL,CAAeW,IAAf,CAAoB;AAChBM,6BAAaD,MADG;AAEhBE,ynCAFgB;AAuBhBC,4BAAYC;AAvBI,aAApB;;AA0BA,qBAASA,iCAAT,CAA2ClB,MAA3C,EAAmDF,SAAnD,EAA8D;AAC1DE,uBAAOmB,KAAP,GAAe,YAAW;AACtBrB,8BAAUsB,IAAV;AACH,iBAFD;AAGH;;AAEDF,8CAAkCG,OAAlC,GAA4C,CAAC,QAAD,EAAW,WAAX,CAA5C;AACJ;AACH;;;;;;AAGLxB,4BAA4BwB,OAA5B,GAAsC,CAClC,WADkC,EAElC,YAFkC,EAGlC,QAHkC,EAIlC,YAJkC,EAKlC,mBALkC,CAAtC;;AAQA,IAAMC,oBAAoB;AACtBC,cAAU,EADY;AAEtBP,oVAFsB;AAStBC,gBAAYpB;AATU,CAA1B;;kBAYeyB,iB","file":"globalAnnotations.js","sourcesContent":["\"use strict\";\n\nclass GlobalAnnotationsController {\n    constructor($mdDialog,\n                $rootScope,\n                $scope,\n                $translate,\n                AnnotationService) {\n        this.$mdDialog = $mdDialog;\n        this.$rootScope = $rootScope;\n        this.$scope = $scope;\n        this.$translate = $translate;\n        this.AnnotationService = AnnotationService;\n\n        this.active = false;\n\n        this.$onInit = () => {\n            this.setModel();\n        }\n\n        // list for new annotations or updates\n        this.$scope.$on('annotationSavedToServer', (event, args) => {\n            this.setModel();\n        });\n\n        // listen for node status changes\n        this.$rootScope.$on('nodeStatusesChanged', (event, args) => {\n            this.setModel();\n        });\n\n        // listen for the display global annotation event\n        this.$rootScope.$on('displayGlobalAnnotations', (event, args) => {\n            this.show(event);\n        });\n    };\n\n    setModel() {\n        let activeGlobalAnnotationGroups = this.AnnotationService.getActiveGlobalAnnotationGroups();\n\n        if (activeGlobalAnnotationGroups.length) {\n            this.visible = true;\n        } else {\n            this.visible = false;\n        }\n    }\n\n    show($event) {\n        //this.$translate(['itemLocked', 'ok']).then((translations) => {\n            this.$mdDialog.show({\n                targetEvent: $event,\n                template:\n                    `<md-dialog aria-label=\"Global Feedback Dialog\">\n                        <!--<md-toolbar md-theme=\"light\">\n                            <div class=\"md-toolbar-tools\">\n                                <h2>Feedback</h2>\n                                <span flex></span>\n                                <md-button class=\"md-icon-button\" ng-click=\"close()\">\n                                    <md-icon aria-label=\"Close dialog\"> close </md-icon>\n                                </md-button>\n                            </div>\n                        </md-toolbar>-->\n                        <md-dialog-content class=\"md-dialog-content\">\n                            <h2 class=\"md-title\">Feedback</h2>\n                            <global-annotations-list></global-annotations-list>\n                        </md-dialog-content>\n                        <md-dialog-actions>\n                            <md-button ng-click=\"close()\" class=\"md-primary\">\n                                Close\n                            </md-button>\n                        </md-dialog-actions>\n                    </md-dialog>`,\n                controller: GlobalAnnotationsDialogController\n            });\n\n            function GlobalAnnotationsDialogController($scope, $mdDialog) {\n                $scope.close = function() {\n                    $mdDialog.hide();\n                }\n            }\n\n            GlobalAnnotationsDialogController.$inject = [\"$scope\", \"$mdDialog\"];\n        //})\n    }\n}\n\nGlobalAnnotationsController.$inject = [\n    '$mdDialog',\n    '$rootScope',\n    '$scope',\n    '$translate',\n    'AnnotationService'\n];\n\nconst GlobalAnnotations = {\n    bindings: {},\n    template:\n        `<md-button class=\"md-fab md-fab-bottom-right animate-fade\"\n                    aria-label=\"View Messages\"\n                    ng-if=\"$ctrl.visible && !$ctrl.active\" ng-click=\"$ctrl.show($event)\">\n            <md-icon>forum</md-icon>\n            <md-tooltip md-direction=\"left\">Feedback</md-tooltip>\n        </md-button>`,\n    controller: GlobalAnnotationsController\n};\n\nexport default GlobalAnnotations;\n"]}