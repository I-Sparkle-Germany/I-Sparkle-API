{"version":3,"sources":["notebookController.es6"],"names":["NotebookController","$injector","$rootScope","$scope","$filter","ConfigService","NotebookService","ProjectService","StudentAssetService","StudentDataService","mode","getMode","$translate","notebook","itemId","item","notebookConfig","config","$on","event","args","logOutListener","$broadcast","getNotebookByWorkgroup","workgroupId","templateUrl","studentAsset","alert","ev","$event","notebookItem","selectedNotebookItem","componentController","attachNotebookItemToComponent","stopPropagation","notes","notebookItems","getNotebook","items","notebookItemKey","last","type","push","$inject"],"mappings":"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","file":"notebookController.js","sourcesContent":["'use strict';\n\nclass NotebookController {\n  constructor($injector,\n              $rootScope,\n              $scope,\n              $filter,\n              ConfigService,\n              NotebookService,\n              ProjectService,\n              StudentAssetService,\n              StudentDataService) {\n    this.$injector = $injector;\n    this.$rootScope = $rootScope;\n    this.$scope = $scope;\n    this.$filter = $filter;\n    this.ConfigService = ConfigService;\n    this.mode = this.ConfigService.getMode();\n    this.NotebookService = NotebookService;\n    this.ProjectService = ProjectService;\n    this.StudentAssetService = StudentAssetService;\n    this.StudentDataService = StudentDataService;\n    this.$translate = this.$filter('translate');\n    this.notebook = null;\n    this.itemId = null;\n    this.item = null;\n    this.notebookConfig = this.NotebookService.config;\n\n    $scope.$on('notebookUpdated', (event, args) => {\n      this.notebook = args.notebook;\n    });\n\n    this.logOutListener = $scope.$on('logOut', (event, args) => {\n      this.logOutListener();\n      this.$rootScope.$broadcast('componentDoneUnloading');\n    });\n\n    // by this time, the notebook and student assets have been retrieved.\n    this.notebook = this.NotebookService.getNotebookByWorkgroup(this.workgroupId);\n  }\n\n  getTemplateUrl() {\n    return this.templateUrl;\n  }\n\n  deleteStudentAsset(studentAsset) {\n    alert(this.$translate('deleteStudentAssetFromNotebookNotImplementedYet'));\n  }\n\n  deleteItem(ev, itemId) {\n    this.$rootScope.$broadcast('deleteNote', {itemId: itemId, ev: ev});\n  }\n\n  editItem(ev, itemId) {\n    this.$rootScope.$broadcast('editNote', {itemId: itemId, ev: ev});\n  }\n\n  reviveItem(ev, itemId) {\n    this.$rootScope.$broadcast('reviveNote', {itemId: itemId, ev: ev});\n  }\n\n  notebookItemSelected($event, notebookItem) {\n    this.selectedNotebookItem = notebookItem;\n  }\n\n  attachNotebookItemToComponent($event, notebookItem) {\n    this.componentController.attachNotebookItemToComponent(notebookItem);\n    this.selectedNotebookItem = null;  // reset selected notebook item\n    // TODO: add some kind of unobtrusive confirmation to let student know that the notebook item has been added to current component\n    $event.stopPropagation();  // prevents parent notebook list item from getting the onclick event so this item won't be re-selected.\n  }\n\n  getNotebook() {\n    return this.notebook;\n  }\n\n  getNotes() {\n    let notes = [];\n    let notebookItems = this.getNotebook().items;\n    for (let notebookItemKey in notebookItems) {\n      let notebookItem = notebookItems[notebookItemKey];\n      if (notebookItem.last().type === 'note') {\n        notes.push(notebookItem);\n      }\n    }\n    return notes;\n  }\n}\n\nNotebookController.$inject = [\n  \"$injector\",\n  \"$rootScope\",\n  \"$scope\",\n  \"$filter\",\n  \"ConfigService\",\n  \"NotebookService\",\n  \"ProjectService\",\n  \"StudentAssetService\",\n  \"StudentDataService\"\n];\n\nexport default NotebookController;\n"]}