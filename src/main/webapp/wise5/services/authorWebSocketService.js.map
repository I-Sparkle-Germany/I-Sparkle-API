{"version":3,"sources":["authorWebSocketService.es6"],"names":["AuthorWebSocketService","$rootScope","$stomp","ConfigService","projectId","connect","getWebSocketURL","then","frame","subscribe","authors","headers","res","$broadcast","disconnect","$inject"],"mappings":";;;;;;;;;;IAAMA,sB;AACJ,kCAAYC,UAAZ,EAAwBC,MAAxB,EAAgCC,aAAhC,EAA+C;AAAA;;AAC7C,SAAKF,UAAL,GAAkBA,UAAlB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,aAAL,GAAqBA,aAArB;AACD;;;;8CAEyBC,S,EAAW;AAAA;;AACnC,aAAO,KAAKF,MAAL,CAAYG,OAAZ,CAAoB,KAAKF,aAAL,CAAmBG,eAAnB,EAApB,EAA0DC,IAA1D,CAA+D,UAACC,KAAD,EAAW;AAC/E,cAAKN,MAAL,CAAYO,SAAZ,6BAAgDL,SAAhD,EAA6D,UAACM,OAAD,EAAUC,OAAV,EAAmBC,GAAnB,EAA2B;AACtF,gBAAKX,UAAL,CAAgBY,UAAhB,CAA2B,wBAA3B,EAAqD,EAAEH,SAASA,OAAX,EAArD;AACD,SAFD,EAEG,EAFH;AAGD,OAJM,CAAP;AAKD;;;kDAE6BN,S,EAAW;AACvC,aAAO,KAAKF,MAAL,CAAYY,UAAZ,EAAP;AACD;;;;;;AAGHd,uBAAuBe,OAAvB,GAAiC,CAC/B,YAD+B,EAE/B,QAF+B,EAG/B,eAH+B,CAAjC;;kBAMef,sB","file":"authorWebSocketService.js","sourcesContent":["class AuthorWebSocketService {\n  constructor($rootScope, $stomp, ConfigService) {\n    this.$rootScope = $rootScope;\n    this.$stomp = $stomp;\n    this.ConfigService = ConfigService;\n  }\n\n  subscribeToCurrentAuthors(projectId) {\n    return this.$stomp.connect(this.ConfigService.getWebSocketURL()).then((frame) => {\n      this.$stomp.subscribe(`/topic/current-authors/${projectId}`, (authors, headers, res) => {\n        this.$rootScope.$broadcast('currentAuthorsReceived', { authors: authors });\n      }, {});\n    });\n  }\n\n  unSubscribeFromCurrentAuthors(projectId) {\n    return this.$stomp.disconnect();\n  }\n}\n\nAuthorWebSocketService.$inject = [\n  '$rootScope',\n  '$stomp',\n  'ConfigService'\n];\n\nexport default AuthorWebSocketService;\n"]}