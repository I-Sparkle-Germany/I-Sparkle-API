{"version":3,"sources":["studentStatusService.es6"],"names":["StudentStatusService","$http","AnnotationService","ConfigService","ProjectService","studentStatuses","config","studentStatusURL","getStudentStatusURL","runId","getRunId","requestConfig","params","get","then","result","data","workgroupId","nodePositionAndTitle","studentStatus","getStudentStatusForWorkgroupId","currentNodeId","getNodePositionAndTitleByNodeId","getStudentStatuses","x","length","tempStudentStatus","tempWorkgroupId","splice","avatarColors","modulo","completionPercentage","projectCompletion","completionPct","nodeId","periodId","workgroupIds","ss","push","isGroupNode","currentNode","getNodeById","group","isNodeDescendentOfGroup","numCompleted","numTotal","nodeStatuses","nodeStatus","progress","totalItems","completedItems","isCompleted","Math","floor","workgroupsOnline","workgroupsOnlineInPeriod","n","i","workgroup","pId","workgroupsOnNode","getWorkgroupIdsOnNode","some","indexOf","w","studentScoreSum","numStudentsWithScore","score","getScore","averageScore","$inject"],"mappings":"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","file":"studentStatusService.js","sourcesContent":["class StudentStatusService {\n    constructor($http,\n                AnnotationService,\n                ConfigService,\n                ProjectService) {\n        this.$http = $http;\n        this.AnnotationService = AnnotationService;\n        this.ConfigService = ConfigService;\n        this.ProjectService = ProjectService;\n        this.studentStatuses = null;\n    }\n\n    retrieveStudentStatuses(config) {\n        var studentStatusURL = this.ConfigService.getStudentStatusURL();\n        var runId = this.ConfigService.getRunId();\n\n        var requestConfig = {\n            params: {\n                runId: runId\n            }\n        };\n\n        return this.$http.get(studentStatusURL, requestConfig).then((result) => {\n            var studentStatuses = result.data;\n\n            this.studentStatuses = studentStatuses;\n\n            return studentStatuses;\n        });\n    };\n\n    getStudentStatuses() {\n        return this.studentStatuses;\n    };\n\n    /**\n     * Get the current node position and title for a workgroup\n     * e.g. 2.2: Newton Scooter Concepts\n     * @param workgroupId the workgroup id\n     * @returns the node position and title\n     */\n    getCurrentNodePositionAndNodeTitleForWorkgroupId(workgroupId) {\n        var nodePositionAndTitle = null;\n\n        var studentStatus = this.getStudentStatusForWorkgroupId(workgroupId);\n\n        if(studentStatus != null) {\n            var currentNodeId = studentStatus.currentNodeId;\n            nodePositionAndTitle = this.ProjectService.getNodePositionAndTitleByNodeId(currentNodeId);\n        }\n\n        return nodePositionAndTitle;\n    };\n\n    getStudentStatusForWorkgroupId(workgroupId) {\n\n        var studentStatus = null;\n        var studentStatuses = this.getStudentStatuses();\n\n        for (var x = 0; x < studentStatuses.length; x++) {\n            var tempStudentStatus = studentStatuses[x];\n\n            if (tempStudentStatus != null) {\n                var tempWorkgroupId = tempStudentStatus.workgroupId;\n\n                if (workgroupId == tempWorkgroupId) {\n                    studentStatus = tempStudentStatus;\n                    break;\n                }\n            }\n        }\n\n        return studentStatus;\n    };\n\n    setStudentStatusForWorkgroupId(workgroupId, studentStatus) {\n\n        var studentStatuses = this.getStudentStatuses();\n\n        for (var x = 0; x < studentStatuses.length; x++) {\n            var tempStudentStatus = studentStatuses[x];\n\n            if (tempStudentStatus != null) {\n                var tempWorkgroupId = tempStudentStatus.workgroupId;\n\n                if (workgroupId === tempWorkgroupId) {\n                    studentStatuses.splice(x, 1, studentStatus);\n                    break;\n                }\n            }\n        }\n    };\n\n    getAvatarColorForWorkgroupId(workgroupId) {\n        var avatarColors = ['#E91E63', '#9C27B0', '#CDDC39', '#2196F3', '#FDD835', '#43A047', '#795548', '#EF6C00', '#C62828', '#607D8B'];\n        var modulo = workgroupId % 10;\n        return avatarColors[modulo];\n    };\n\n    /**\n     * Get the student project completion by workgroup id\n     * @param workgroupId the workgroup id\n     * @returns the project completion percentage for the given workgroup\n     */\n    getStudentProjectCompletion(workgroupId) {\n\n        var completionPercentage = null;\n\n        // get the student status for the workgroup\n        var studentStatus = this.getStudentStatusForWorkgroupId(workgroupId);\n\n        if (studentStatus != null) {\n\n            if (studentStatus != null) {\n\n                // get the project completion object\n                var projectCompletion = studentStatus.projectCompletion;\n\n                if (projectCompletion != null) {\n                    // get the project completion percentage\n                    completionPercentage = projectCompletion.completionPct;\n                }\n            }\n        }\n\n        return completionPercentage;\n    }\n\n    /**\n     * Get the workgroups on a node in the given period\n     * @param nodeId the node id\n     * @param periodId the period id. pass in -1 to select all periods.\n     * @returns an array of workgroup ids on a node in a period\n     */\n    getWorkgroupIdsOnNode(nodeId, periodId) {\n        let workgroupIds = [];\n        let studentStatuses = this.studentStatuses;\n\n        // loop through all the student statuses\n        for (var ss = 0; ss < studentStatuses.length; ss++) {\n            var studentStatus = studentStatuses[ss];\n\n            if (studentStatus != null) {\n\n                if (periodId == -1 || periodId == studentStatus.periodId) {\n                    // the period matches the one we are looking for\n                    let currentNodeId = studentStatus.currentNodeId;\n                    if (nodeId === currentNodeId) {\n                        // the node id matches the one we are looking for\n                        workgroupIds.push(studentStatus.workgroupId);\n                    } else if (this.ProjectService.isGroupNode(nodeId)) {\n                        let currentNode = this.ProjectService.getNodeById(currentNodeId);\n                        let group = this.ProjectService.getNodeById(nodeId);\n\n                        if (this.ProjectService.isNodeDescendentOfGroup(currentNode, group)) {\n                            // the node id is a descendent of the group we're looking for\n                            workgroupIds.push(studentStatus.workgroupId);\n                        }\n                    }\n                }\n            }\n        }\n\n        return workgroupIds;\n    }\n\n    /**\n     * Get the percentage of the period that has completed the node\n     * @param nodeId the node id\n     * @param periodId the period id. pass in -1 to select all periods.\n     * @returns the percentage of the period that has completed the node.\n     * this value will be an integer between 0-100.\n     */\n    getNodeCompletion(nodeId, periodId) {\n        let numCompleted = 0;\n        let numTotal = 0;\n        let isGroupNode = this.ProjectService.isGroupNode(nodeId);\n\n        let studentStatuses = this.studentStatuses;\n\n        // loop through all the student statuses\n        for (let ss = 0; ss < studentStatuses.length; ss++) {\n            let studentStatus = studentStatuses[ss];\n\n            if (studentStatus) {\n\n                if (periodId == -1 || periodId == studentStatus.periodId) {\n                    // the period matches the one we are looking for\n\n                    let nodeStatuses = studentStatus.nodeStatuses;\n\n                    if (nodeStatuses) {\n                        // get the node status for the node\n                        let nodeStatus = nodeStatuses[nodeId];\n\n                        if (nodeStatus != null) {\n                            if (isGroupNode) {\n                                let progress = nodeStatus.progress;\n                                if (progress) {\n                                    numTotal += progress.totalItems;\n                                    numCompleted += progress.completedItems;\n                                }\n                            } else {\n                                numTotal++;\n\n                                if (nodeStatus.isCompleted) {\n                                    // the student has completed the node\n                                    numCompleted++;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        /*\n         * generate the percentage number rounded down to the nearest integer.\n         * the value will be between 0-100\n         */\n        let completionPercentage = (numTotal > 0 ? Math.floor(100 * numCompleted / numTotal) : 0);\n\n        return completionPercentage;\n    }\n\n    /**\n     * Get the total number of steps that are descendants of a given node\n     * @param nodeId the node id\n     * @returns the total number of step (application node) descendants; returns\n     * @param periodId the period id. pass in -1 to select all periods.\n     * an average for all students in the selected period if the group is a\n     * planning activity\n     */\n    /*getTotalApplicationNodeDescendents(nodeId, periodId) {\n        let numTotal = 0;\n        let numWorkgroups = 0;\n\n        let isGroupNode = this.ProjectService.isGroupNode(nodeId);\n\n        if (isGroupNode) {\n            let isPlanning = this.ProjectService.isPlanning(nodeId);\n            let studentStatuses = this.studentStatuses;\n\n            // loop through all the student statuses\n            for (let ss = 0; ss < studentStatuses.length; ss++) {\n                let studentStatus = studentStatuses[ss];\n\n                if (studentStatus) {\n\n                    if (periodId == -1 || periodId == studentStatus.periodId) {\n                        // the period matches the one we are looking for\n\n                        let nodeStatuses = studentStatus.nodeStatuses;\n\n                        if (nodeStatuses) {\n                            // get the node status for the node\n                            let nodeStatus = nodeStatuses[nodeId];\n\n                            if (nodeStatus) {\n                                let progress = nodeStatus.progress;\n                                if (progress) {\n                                    let totalItems = progress.totalItems;\n                                    if (totalItems) {\n                                        numWorkgroups++;\n\n                                        if (isPlanning) {\n                                            numTotal += progress.totalItems;\n                                        } else {\n                                            // this is not a planning activity, so we can assume the total number of items is the same for all students\n                                            numTotal = progress.totalItems;\n                                            break;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return (numWorkgroups > 0 ? numTotal/numWorkgroups : 0);\n    };*/\n\n    /**\n     * Check if there is a workgroup that is online and on the node\n     * @param workgroupsOnline the workgroup ids that are online\n     * @param nodeId the node id\n     * @param periodId the period id. pass in -1 to select all periods.\n     * @returns whether there is a workgroup that is online and on the node\n     */\n    isWorkgroupOnlineOnNode(workgroupsOnline, nodeId, periodId) {\n        let result = false;\n\n        // find workgroups online in the given period\n        let workgroupsOnlineInPeriod = [];\n        let n = workgroupsOnline.length;\n        for (let i = 0; i < n; i++) {\n            let workgroup = workgroupsOnline[i];\n            let studentStatus = this.getStudentStatusForWorkgroupId(workgroup);\n            if (studentStatus) {\n                let pId = studentStatus.periodId;\n                if (periodId == -1 || pId == periodId) {\n                    workgroupsOnlineInPeriod.push(workgroup);\n                }\n            }\n        }\n\n        if (workgroupsOnlineInPeriod.length) {\n            // get workgroups on the given node\n            let workgroupsOnNode = this.getWorkgroupIdsOnNode(nodeId, periodId);\n\n            // check if any online workgroups in the current period are on this node\n            result = workgroupsOnNode.some(w => {\n                return workgroupsOnlineInPeriod.indexOf(w) > -1;\n            });\n        }\n\n        return result;\n    }\n\n    /**\n     * Get the average score for a node for a period\n     * @param nodeId the node id\n     * @param periodId the period id. pass in -1 to select all periods.\n     * @returns the average score for the node for the period\n     */\n    getNodeAverageScore(nodeId, periodId) {\n        var studentScoreSum = 0;\n        var numStudentsWithScore = 0;\n\n        var studentStatuses = this.studentStatuses;\n\n        // loop through all the student statuses\n        for (var ss = 0; ss < studentStatuses.length; ss++) {\n            var studentStatus = studentStatuses[ss];\n\n            if (studentStatus != null) {\n\n                if (periodId == -1 || periodId == studentStatus.periodId) {\n                    // the period matches the one we are looking for\n\n                    var workgroupId = studentStatus.workgroupId;\n\n                    // get the workgroups score on the node\n                    var score = this.AnnotationService.getScore(workgroupId, nodeId);\n\n                    if (score != null) {\n                        // increment the counter of students with a score for this node\n                        numStudentsWithScore++;\n\n                        // accumulate the sum of the scores for this node\n                        studentScoreSum += score;\n                    }\n                }\n            }\n        }\n\n        var averageScore = null;\n\n        if (numStudentsWithScore != 0) {\n            // calculate the average score for this node rounded down to the nearest hundredth\n            averageScore = Math.floor(100 * studentScoreSum / numStudentsWithScore) / 100;\n        }\n\n        return averageScore;\n    }\n}\n\nStudentStatusService.$inject = [\n    '$http',\n    'AnnotationService',\n    'ConfigService',\n    'ProjectService'\n];\n\nexport default StudentStatusService;\n"]}