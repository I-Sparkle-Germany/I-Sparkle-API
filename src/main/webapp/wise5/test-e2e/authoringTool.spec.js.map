{"version":3,"sources":["authoringTool.spec.es6"],"names":["describe","waitForUrlToChangeTo","urlRegex","currentUrl","browser","getCurrentUrl","then","storeCurrentUrl","url","wait","compareCurrentUrl","test","projectHomeButton","element","by","xpath","createNewStepButton","$","createNewProjectButton","chooseStepDropDown","previousButton","nextButton","projectId","it","ignoreSynchronization","get","expect","getTitle","toEqual","sendKeys","click","refresh","RegExp","isPresent","toBeTruthy","createProjectButton","cancelCreateProjectButton","clear","toMatch","substring","lastIndexOf","cssContainingText","isDisplayed","all","repeater","nodeItem","getText","toBe","isEnabled","createNodeTitle","model","toBeFalsy","css","insertInsideAct1Button","EC","protractor","ExpectedConditions","alertIsPresent","switchTo","alert","accept","insertAfterStep1Button","addComponentButton","cancelAddComponentButton","orComponentChoice","insertAsFirstComponentButton","components","length","htmlComponentChoice","mcComponentChoice","insertAfterORButton","stepSelectOptions","activity1TitleInput","getAttribute","step1TitleInput","enableNotebookCheckbox","metadataField","titleInput","summaryTextarea","projectTitle","getAllWindowHandles","handles","window","toContain","driver","close","projectItems","projectItemSpans"],"mappings":"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","file":"authoringTool.spec.js","sourcesContent":["// E2E test for Authoring Tool\ndescribe('WISE Authoring Tool', () => {\n\n    /**\n     * @name waitForUrlToChangeTo\n     * @description Wait until the URL changes to match a provided regex\n     * @param {RegExp} urlRegex wait until the URL changes to match this regex\n     * @returns {!webdriver.promise.Promise} Promise\n     */\n    function waitForUrlToChangeTo(urlRegex) {\n        let currentUrl;\n\n        return browser.getCurrentUrl().then(function storeCurrentUrl(url) {\n                currentUrl = url;\n            }\n        ).then(function waitForUrlToChangeTo() {\n                return browser.wait(function waitForUrlToChangeTo() {\n                    return browser.getCurrentUrl().then(function compareCurrentUrl(url) {\n                        return urlRegex.test(url);\n                    });\n                });\n            }\n        );\n    }\n\n    let projectHomeButton = element(by.xpath('//side-menu/div/a[@aria-label=\"Project Home\"]'));\n    let createNewStepButton = $(\"#createNewStepButton\");\n    let createNewProjectButton = $(\"#createNewProjectButton\");\n    let chooseStepDropDown = element(by.xpath('//step-tools/div/md-select[@ng-model=\"$ctrl.nodeId\"]'));\n    let previousButton = element(by.xpath('//button[@ng-click=\"$ctrl.goToPrevNode()\"]'));\n    let nextButton = element(by.xpath('//button[@ng-click=\"$ctrl.goToNextNode()\"]'));\n    let projectId = null;  // this will be set when we create a new project.\n\n    it('should require user to log in to use the authoring tool', () => {\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        browser.get('http://localhost:8080/wise/login');\n\n        expect(browser.getTitle()).toEqual('Sign In');\n    });\n\n    it('should log in using preview username and password and open the authoring tool', () => {\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        $('#username').sendKeys('preview');\n        $('#password').sendKeys('wise');\n        $('#signInButton').click();\n\n        browser.ignoreSynchronization = false;  // uses Angular\n        browser.get('http://localhost:8080/wise/author');\n        browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n        waitForUrlToChangeTo(new RegExp('http://localhost:8080/wise/author#/', 'gi'));\n\n        // check that the create new project button is displayed\n        expect(browser.getTitle()).toEqual('WISE Authoring Tool');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/');\n        expect(createNewProjectButton.isPresent()).toBeTruthy();\n    });\n\n    it('should create a new project and open it', () => {\n        createNewProjectButton.click();  // click button to create a new project\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/'); // url should stay the same\n        let createProjectButton = $('#createProjectButton');\n        expect(createProjectButton.isPresent()).toBeTruthy();\n        let cancelCreateProjectButton = $('#cancelCreateProjectButton');\n        expect(cancelCreateProjectButton.isPresent()).toBeTruthy();\n        cancelCreateProjectButton.click();  // cancel create. url should stay the same\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/');\n\n        createNewProjectButton.click();  // click button to create a new project\n        $('#newProjectTitle').clear();  // clear out what's there.\n        $('#newProjectTitle').sendKeys('My Science Project');\n        createProjectButton.click();\n        expect(browser.getCurrentUrl()).toMatch('http://localhost:8080/wise/author#/project/[0-9]+');  // should open the project editing view.\n\n        // get the new project id and set it in the global variable\n        browser.getCurrentUrl().then((url) => {\n            projectId = url.substring(url.lastIndexOf(\"/\") + 1);\n        });\n    });\n\n    it('should have elements on the page in project view', () => {\n        expect(element(by.cssContainingText('top-bar',\"My Science Project\")).isDisplayed()).toBeTruthy();\n\n        element.all(by.repeater(\"item in projectController.items\")).then((nodeItem) => {\n            expect(nodeItem[1].getText()).toBe(\"1 First Activity\");  // should have one default activity\n        });\n\n        // check that move, delete buttons are disabled and other buttons are enabled.\n        expect(chooseStepDropDown.isEnabled()).toBe(true);\n        expect(previousButton.isEnabled()).toBe(false);\n        expect(nextButton.isEnabled()).toBe(false);\n        expect($(\"#moveButton\").isEnabled()).toBe(false);\n        expect($(\"#copyButton\").isEnabled()).toBe(false);\n        expect($(\"#deleteButton\").isEnabled()).toBe(false);\n        expect($(\"#createNewActivityButton\").isEnabled()).toBe(true);\n        expect(createNewStepButton.isEnabled()).toBe(true);\n        expect($(\"#previewProjectButton\").isEnabled()).toBe(true);\n        // look for side-menu items\n        expect(projectHomeButton.isDisplayed()).toBe(true);\n        expect(element(by.xpath('//side-menu/div/a[@aria-label=\"Notebook Settings\"]')).isDisplayed()).toBe(true);\n        expect(element(by.xpath('//side-menu/div/a[@aria-label=\"File Manager\"]')).isDisplayed()).toBe(true);\n        expect(element(by.xpath('//side-menu/div/a[@aria-label=\"Project Info\"]')).isDisplayed()).toBe(true);\n    });\n\n    it('should create new steps', () => {\n        // test adding a new step to an empty project\n        createNewStepButton.click();\n        let createNodeTitle = element(by.model('projectController.createNodeTitle'));\n        expect(createNodeTitle.isDisplayed()).toBeTruthy();\n        expect($(\"#createNodeCreateButton\").isDisplayed()).toBeTruthy();\n        expect($(\"#createNodeCancelButton\").isDisplayed()).toBeTruthy();\n        // clicking on cancel should hide the create node input and buttons\n        $(\"#createNodeCancelButton\").click();\n        expect(createNodeTitle.isDisplayed()).toBeFalsy();\n        expect($(\"#createNodeCreateButton\").isDisplayed()).toBeFalsy();\n        expect($(\"#createNodeCancelButton\").isDisplayed()).toBeFalsy();\n\n        createNewStepButton.click();\n        createNodeTitle.clear();  // clear out what's there.\n        createNodeTitle.sendKeys('Step 1');\n        $(\"#createNodeCreateButton\").click();\n\n        element.all(by.repeater(\"item in projectController.items\")).then((nodeItem) => {\n            expect(nodeItem[1].element(by.css('.groupHeader h6')).getText()).toBe(\"1 First Activity\");\n            let insertInsideAct1Button = nodeItem[1].element(by.css('button.insertButton[aria-label=\"Insert As First Step\"]'));\n            expect(insertInsideAct1Button.isDisplayed()).toBeTruthy();\n            insertInsideAct1Button.click();\n            let EC = protractor.ExpectedConditions;\n            browser.wait(EC.alertIsPresent(), 3000);  // Wait for an alert pops up asking if it should this should be the first step in the project.\n            browser.switchTo().alert().accept();      // accept the alert\n        });\n\n        element.all(by.repeater(\"item in projectController.items\")).then((nodeItem) => {\n            expect(nodeItem[1].element(by.css('.groupHeader h6')).getText()).toBe(\"1 First Activity\");  // should have one default activity\n            expect(nodeItem[2].element(by.css('.stepHeader h6')).getText()).toBe(\"1.1 Step 1\");  // should now have the newly added step\n        });\n\n        // now test adding another step after the first step. This time the alert should not show.\n        createNewStepButton.click();\n        createNodeTitle.clear();  // clear out what's there.\n        createNodeTitle.sendKeys('Step 2');\n        $(\"#createNodeCreateButton\").click();\n\n        element.all(by.repeater(\"item in projectController.items\")).then((nodeItem) => {\n            let insertAfterStep1Button = nodeItem[2].element(by.css('button.insertButton[aria-label=\"Insert After\"]'));\n            expect(insertAfterStep1Button.isDisplayed()).toBeTruthy();\n            insertAfterStep1Button.click();\n        });\n\n        element.all(by.repeater(\"item in projectController.items\")).then((nodeItem) => {\n            expect(nodeItem[1].element(by.css('.groupHeader h6')).getText()).toBe(\"1 First Activity\");  // should have one default activity\n            expect(nodeItem[2].element(by.css('.stepHeader h6')).getText()).toBe(\"1.1 Step 1\");  // should have step 1\n            expect(nodeItem[3].element(by.css('.stepHeader h6')).getText()).toBe(\"1.2 Step 2\");  // should now have the newly added step\n        });\n    });\n\n    it('should create new components', () => {\n        // test adding a new component to step 1.1\n        element(by.cssContainingText(\"h6\", \"Step 1\")).click();  // click on step 1\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/node/node1');\n        // the navigation drop-down should show the step title\n        expect(chooseStepDropDown.getText()).toBe(\"1.1: Step 1\");\n\n        let addComponentButton = element(by.xpath('//button[@ng-click=\"nodeAuthoringController.addComponentButtonClicked()\"]'));\n        expect(addComponentButton.isEnabled()).toBeTruthy();\n        addComponentButton.click();\n        expect(addComponentButton.isEnabled()).toBeFalsy();\n        // test that we can cancel adding new component\n        let cancelAddComponentButton = element(by.xpath('//button[@ng-click=\"nodeAuthoringController.cancelCreateComponentClicked()\"]'));\n        cancelAddComponentButton.click();\n\n        expect(addComponentButton.isEnabled()).toBeTruthy();\n        addComponentButton.click();  // click on add component button again\n        expect(addComponentButton.isEnabled()).toBeFalsy();\n        let orComponentChoice = element(by.cssContainingText('md-grid-tile', 'Open Response'));\n        orComponentChoice.click(); // choose the open response component\n        let insertAsFirstComponentButton = element(by.xpath('//button[@ng-click=\"nodeAuthoringController.insertComponentAsFirst()\"]'));\n        insertAsFirstComponentButton.click();\n        expect(addComponentButton.isEnabled()).toBeTruthy(); // user should be able to add more components again\n\n        // check that the new Open Response component has been added to the step\n        element.all(by.repeater(\"(componentIndex, component) in nodeAuthoringController.components\")).then((components) => {\n            expect(components.length).toEqual(1);\n            expect(components[0].element(by.css('md-checkbox')).getText()).toBe(\"1. Open Response\");\n        });\n\n        // add a new HTML component above the Open Response component\n        addComponentButton.click();  // click on add component button again\n        expect(addComponentButton.isEnabled()).toBeFalsy();\n        let htmlComponentChoice = element(by.cssContainingText('md-grid-tile', 'HTML'));\n        htmlComponentChoice.click(); // choose the open response component\n        insertAsFirstComponentButton.click();\n        expect(addComponentButton.isEnabled()).toBeTruthy(); // user should be able to add more components again\n\n        // check that the new HTML component has been added to the step above the Open Response component\n        element.all(by.repeater(\"(componentIndex, component) in nodeAuthoringController.components\")).then((components) => {\n            expect(components.length).toEqual(2);\n            expect(components[0].element(by.css('md-checkbox')).getText()).toBe(\"1. HTML\");\n            expect(components[1].element(by.css('md-checkbox')).getText()).toBe(\"2. Open Response\");\n        });\n\n        // add a new MC component below the Open Response component, as the third component\n        addComponentButton.click();  // click on add component button again\n        expect(addComponentButton.isEnabled()).toBeFalsy();\n        let mcComponentChoice = element(by.cssContainingText('md-grid-tile', 'Multiple Choice'));\n        mcComponentChoice.click(); // choose the open response component\n        element.all(by.repeater(\"(componentIndex, component) in nodeAuthoringController.components\")).then((components) => {\n            let insertAfterORButton = components[1].element(by.css('button[aria-label=\"Insert After\"]'));\n            expect(insertAfterORButton.isDisplayed()).toBeTruthy();\n            insertAfterORButton.click();\n        });\n        expect(addComponentButton.isEnabled()).toBeTruthy(); // user should be able to add more components again\n\n        // check that the new MC component has been added to the step after the Open Response component\n        element.all(by.repeater(\"(componentIndex, component) in nodeAuthoringController.components\")).then((components) => {\n            expect(components.length).toEqual(3);\n            expect(components[0].element(by.css('md-checkbox')).getText()).toBe(\"1. HTML\");\n            expect(components[1].element(by.css('md-checkbox')).getText()).toBe(\"2. Open Response\");\n            expect(components[2].element(by.css('md-checkbox')).getText()).toBe(\"3. Multiple Choice\");\n        });\n    });\n\n    // TODO: test deleting a component\n\n    it('should allow author to jump to step authoring using the navigation drop-down menu', () => {\n        chooseStepDropDown.click();\n        element.all(by.repeater(\"item in $ctrl.idToOrder | toArray | orderBy : 'order'\")).then((stepSelectOptions) => {\n            expect(stepSelectOptions[0].element(by.css('.node-select__text')).getText()).toBe(\"1: First Activity\");\n            expect(stepSelectOptions[1].element(by.css('.node-select__text')).getText()).toBe(\"1.1: Step 1\");\n            expect(stepSelectOptions[2].element(by.css('.node-select__text')).getText()).toBe(\"1.2: Step 2\");\n            stepSelectOptions[2].element(by.css('.node-select__text')).click();  // Click on step 1.2 in the step select menu\n            expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/node/node2');\n        });\n\n        chooseStepDropDown.click();\n        element.all(by.repeater(\"item in $ctrl.idToOrder | toArray | orderBy : 'order'\")).then((stepSelectOptions) => {\n            stepSelectOptions[0].element(by.css('.node-select__text')).click();  // Click on activity 1 in the step select menu\n            expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/node/group1');\n        });\n\n        projectHomeButton.click(); // click on the project view button\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId);\n    });\n\n    it('should allow editing of activity and step titles', () => {\n        element(by.cssContainingText(\"h6\", \"First Activity\")).click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/node/group1');\n        // the navigation drop-down should show the activity title\n        expect(chooseStepDropDown.getText()).toBe(\"1: First Activity\");\n        let activity1TitleInput = element(by.model(\"nodeAuthoringController.node.title\"));\n        expect(activity1TitleInput.isPresent()).toBeTruthy();\n        expect(activity1TitleInput.getAttribute('value')).toBe(\"First Activity\");\n        activity1TitleInput.clear();  // clear out what's there.\n        activity1TitleInput.sendKeys('Act One');  // change the title to \"Act One\"\n        element(by.css('button[ng-click=\"nodeAuthoringController.backButtonClicked()\"]')).click();  // click on the home button to go back to main view.\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId);\n\n        // now check that the activity title has been updated in the project view\n        element.all(by.repeater(\"item in projectController.items\")).then((nodeItem) => {\n            expect(nodeItem[1].element(by.css('.groupHeader h6')).getText()).toBe(\"1 Act One\");\n        });\n\n        element(by.cssContainingText(\"h6\", \"Step 1\")).click();  // click on step 1\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/node/node1');\n        // the navigation drop-down should show the step title\n        expect(chooseStepDropDown.getText()).toBe(\"1.1: Step 1\");\n        expect(previousButton.isEnabled()).toBe(false); // previous button should be disabled\n        expect(nextButton.isEnabled()).toBe(true); // next button should be enabled\n        let step1TitleInput = element(by.model(\"nodeAuthoringController.node.title\"));\n        expect(step1TitleInput.isPresent()).toBeTruthy();\n        expect(step1TitleInput.getAttribute('value')).toBe(\"Step 1\");\n        step1TitleInput.clear();  // clear out what's there.\n        step1TitleInput.sendKeys('One Small Step for Man');  // change the title to \"One Small Step for Man\"\n        element(by.css('button[ng-click=\"nodeAuthoringController.backButtonClicked()\"]')).click();  // click on the home button to go back to main view.\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId);\n        // now check that the step title has been updated in the project view\n        element.all(by.repeater(\"item in projectController.items\")).then((nodeItem) => {\n            expect(nodeItem[2].element(by.css('.stepHeader h6')).getText()).toBe(\"1.1 One Small Step for Man\");\n        });\n    });\n\n    it('should allow navigating between steps with arrows', () => {\n        element(by.cssContainingText(\"h6\", \"One Small Step for Man\")).click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/node/node1');\n        expect(chooseStepDropDown.getText()).toBe(\"1.1: One Small Step for Man\");\n        expect(previousButton.isEnabled()).toBe(false); // previous button should be disabled\n        expect(nextButton.isEnabled()).toBe(true); // next button should be enabled\n        nextButton.click(); // go to next node, node2.\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/node/node2');\n        expect(chooseStepDropDown.getText()).toBe(\"1.2: Step 2\");\n        expect(previousButton.isEnabled()).toBe(true); // previous button should be enabled\n        expect(nextButton.isEnabled()).toBe(false); // next button should be disabled, because this is the last step\n        previousButton.click(); // go back to node1\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/node/node1');\n    });\n\n    it('should display my assets', () => {\n        element(by.xpath('//side-menu/div/a[@aria-label=\"File Manager\"]')).click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/asset');\n        expect($(\".drop-box\").isPresent()).toBeTruthy();  // the drop box for uploading assets should exist.\n        projectHomeButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId); // should go back to the project editing view.\n    });\n\n    it('should allow user to edit notebook settings', () => {\n        element(by.xpath('//side-menu/div/a[@aria-label=\"Notebook Settings\"]')).click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/notebook');\n\n        let enableNotebookCheckbox = $(\"#enableNotebookCheckbox\");\n        expect(enableNotebookCheckbox.isPresent()).toBeTruthy();  // the checkbox for enabling/disabling notebook should exist.\n        $(\"#closeNotebookSettingsButton\").click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId); // should go back to the project editing view.\n    });\n\n    it('should allow user to edit project info', () => {\n        // TODO add more tests here\n        element(by.xpath('//side-menu/div/a[@aria-label=\"Project Info\"]')).click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId + '/info');\n\n        // check that there are inputs for metadata items\n        element.all(by.repeater(\"metadataField in projectInfoController.metadataAuthoring.fields\")).then((metadataField) => {\n            let titleInput = metadataField[0].element(by.model('projectInfoController.metadata[metadataField.key]'));\n            expect(titleInput.getAttribute('value')).toBe(\"My Science Project\");  // should show the title of the project\n            titleInput.clear();  // clear out what's there.\n            titleInput.sendKeys('My Awesome Science Project');  // change the title to \"My Awesome Science Project\"\n            let summaryTextarea = metadataField[1].element(by.model('projectInfoController.metadata[metadataField.key]'));\n            expect(summaryTextarea.getAttribute('value')).toBe(\"\");  // should show the summary of the project, which is empty to start with\n            summaryTextarea.sendKeys('This is my science project summary.');\n        });\n\n        projectHomeButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId); // should go back to the project editing view.\n        let projectTitle = element(by.css('[ng-if=\"$ctrl.projectTitle\"]'));\n        expect(element(by.cssContainingText('top-bar',\"My Awesome Science Project\")).isDisplayed()).toBeTruthy();  // check that the title has been updated\n    });\n\n    it('should allow user to preview the project', () => {\n        // Clicking on the preview project button should open the preview in a new window\n        $(\"#previewProjectButton\").click();\n        browser.getAllWindowHandles().then((handles) => {\n            browser.switchTo().window(handles[1]).then(() => {\n                browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n                expect(browser.getCurrentUrl()).toContain('http://localhost:8080/wise/project/' + projectId + '#/vle/');\n                // close the current window\n                browser.driver.close().then(() => {\n                    // switch to the main authoring window\n                    browser.switchTo().window(handles[0]);\n                });\n            });\n        });\n    });\n\n    it('should allow user to preview the project without constraints', () => {\n        // Clicking on the preview project button should open the preview in a new window\n        $(\"#previewProjectWithoutConstraintsButton\").click();\n        browser.getAllWindowHandles().then((handles) => {\n            browser.switchTo().window(handles[1]).then(() => {\n                browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n                expect(browser.getCurrentUrl()).toContain('http://localhost:8080/wise/project/' + projectId + '?constraints=false#/vle/');\n                // close the current window\n                browser.driver.close().then(() => {\n                    // switch to the main authoring window\n                    browser.switchTo().window(handles[0]);\n                });\n            });\n        });\n    });\n\n    it('should show the new project in the project listing view', () => {\n        browser.get('http://localhost:8080/wise/author');\n        browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n        waitForUrlToChangeTo(new RegExp('http://localhost:8080/wise/author#/', 'gi'));\n        expect(browser.getTitle()).toEqual('WISE Authoring Tool');\n\n        element.all(by.repeater(\"project in authoringToolMainController.projects\")).then((projectItems) => {\n            projectItems[0].all(by.css('span')).then((projectItemSpans) => {\n                expect(projectItemSpans[0].getText()).toBe(\"pageview\");\n                expect(projectItemSpans[1].getText()).toBe(\"content_copy\");\n                expect(projectItemSpans[2].getText()).toBe(\"file_download\");\n                expect(projectItemSpans[3].getText()).toBe(\"mode_edit\");\n                expect(projectItemSpans[4].getText()).toBe(projectId + \" - My Awesome Science Project\");\n            })\n        });\n    });\n\n    it('should open the project authoring from project listing view', () => {\n        element.all(by.repeater(\"project in authoringToolMainController.projects\")).then((projectItems) => {\n            projectItems[0].all(by.css('span')).then((projectItemSpans) => {\n                projectItemSpans[3].click(); // open Project authoring view by clicking on mode_edit icon\n            });\n        });\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId);\n\n        browser.get('http://localhost:8080/wise/author');\n        browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n        waitForUrlToChangeTo(new RegExp('http://localhost:8080/wise/author#/', 'gi'));\n        expect(browser.getTitle()).toEqual('WISE Authoring Tool');\n\n        element.all(by.repeater(\"project in authoringToolMainController.projects\")).then((projectItems) => {\n            projectItems[0].all(by.css('span')).then((projectItemSpans) => {\n                projectItemSpans[4].click(); // open Project authoring view by clicking on project title\n            });\n        });\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/project/' + projectId);\n    });\n\n/*\n    it('should exit the authoring tool from project listing view and go to teacher home', () => {\n        browser.get('http://localhost:8080/wise/author');\n        browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n        waitForUrlToChangeTo(new RegExp('http://localhost:8080/wise/author#/', 'gi'));\n        expect(browser.getTitle()).toEqual('WISE Authoring Tool');\n\n        browser.ignoreSynchronization = true;  // doesn't use Angular, disable synchronization\n        $(\"#goHomeButton\").click();\n     });\n*/\n    // TODO: add test for copying a project\n    // TODO: add test for copying a step\n\n});"]}