{"version":3,"sources":["authoringTool.spec.es6"],"names":[],"mappings":"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","file":"authoringTool.spec.js","sourcesContent":["// E2E test for Authoring Tool\ndescribe('WISE Authoring Tool', () => {\n\n    function hasClass(element, cls) {\n        return element.getAttribute('class').then((classes) => {\n            return classes.split(' ').indexOf(cls) !== -1;\n        });\n    };\n\n    /**\n     * @name waitForUrlToChangeTo\n     * @description Wait until the URL changes to match a provided regex\n     * @param {RegExp} urlRegex wait until the URL changes to match this regex\n     * @returns {!webdriver.promise.Promise} Promise\n     */\n    function waitForUrlToChangeTo(urlRegex) {\n        var currentUrl;\n\n        return browser.getCurrentUrl().then(function storeCurrentUrl(url) {\n                currentUrl = url;\n            }\n        ).then(function waitForUrlToChangeTo() {\n                return browser.wait(function waitForUrlToChangeTo() {\n                    return browser.getCurrentUrl().then(function compareCurrentUrl(url) {\n                        return urlRegex.test(url);\n                    });\n                });\n            }\n        );\n    };\n\n    var exitAuthoringToolButton;\n    var createNewProjectButton;\n\n    it('should require user to log in to use the authoring tool', () => {\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        browser.get('http://localhost:8080/wise/login');\n\n        expect(browser.getTitle()).toEqual('Sign In');\n    });\n\n    it('should log in using preview username and password and open the authoring tool', () => {\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        element(by.id('username')).sendKeys('preview');\n        element(by.id('password')).sendKeys('wise');\n        element(by.id('signInButton')).click();\n\n        browser.ignoreSynchronization = false;  // uses Angular\n        browser.get('http://localhost:8080/wise/author');\n        browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n        waitForUrlToChangeTo(new RegExp('http://localhost:8080/wise/author#/', 'gi'));\n\n        // check that the exitAuthoringTool button and create new project buttons are displayed\n        expect(browser.getTitle()).toEqual('WISE Authoring');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/');\n        exitAuthoringToolButton = element(by.id('exitAuthoringToolButton'));\n        expect(exitAuthoringToolButton.isPresent()).toBeTruthy();\n        createNewProjectButton = element(by.id('createNewProjectButton'));\n        expect(createNewProjectButton.isPresent()).toBeTruthy();\n    });\n\n    it('should create a new project', () => {\n        createNewProjectButton.click();  // click button to create a new project\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/new');\n        let createProjectButton = element(by.id('createProjectButton'));\n        expect(createProjectButton.isPresent()).toBeTruthy();\n        let cancelCreateProjectButton = element(by.id('cancelCreateProjectButton'));\n        expect(cancelCreateProjectButton.isPresent()).toBeTruthy();\n        cancelCreateProjectButton.click();  // cancel create. We should go back to main authoring page.\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/');\n\n        createNewProjectButton.click();  // click button to create a new project\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/new');\n        element(by.id('newProjectTitle')).clear();  // clear out what's there.\n        element(by.id('newProjectTitle')).sendKeys('My Science Project');\n        createProjectButton.click();\n        expect(element(by.id(\"projectTitle\")).getText()).toEqual(\"My Science Project\");\n    });\n\n    it('should have elements on the page in project view', () => {\n        // check that move, delete buttons are disabled and other buttons are enabled.\n        expect(element(by.id(\"moveButton\")).isEnabled()).toBe(false);\n        expect(element(by.id(\"deleteButton\")).isEnabled()).toBe(false);\n        expect(element(by.id(\"saveProjectButton\")).isEnabled()).toBe(true);\n        expect(element(by.id(\"closeProjectButton\")).isEnabled()).toBe(true);\n        expect(element(by.id(\"createNewActivityButton\")).isEnabled()).toBe(true);\n        expect(element(by.id(\"createNewStepButton\")).isEnabled()).toBe(true);\n        expect(element(by.id(\"previewProjectButton\")).isEnabled()).toBe(true);\n        expect(element(by.id(\"manageAssetsButton\")).isEnabled()).toBe(true);\n        expect(element(by.id(\"viewHistoryButton\")).isEnabled()).toBe(true);\n    });\n\n    // TODO: add test for opening newly-created project\n\n    it('should exit the authoring tool and then sign out', () => {\n        exitAuthoringToolButton.click();\n\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        expect(browser.getTitle()).toEqual('WISE Teacher Dashboard');\n        var signOutButton = element(by.id('signOut'));\n        expect(signOutButton.isPresent()).toBeTruthy();\n        signOutButton.click();\n        expect(browser.getTitle()).toEqual('Web-based Inquiry Science Environment (WISE)');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/');\n    });\n});"]}