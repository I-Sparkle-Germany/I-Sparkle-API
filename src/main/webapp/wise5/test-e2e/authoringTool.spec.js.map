{"version":3,"sources":["authoringTool.spec.es6"],"names":[],"mappings":";;;AACA,SAAS,6BAAT,EAAwC,YAAM;;AAE1C,aAAS,QAAT,CAAkB,OAAlB,EAA2B,GAA3B,EAAgC;AAC5B,eAAO,QAAQ,YAAR,CAAqB,OAArB,EAA8B,IAA9B,CAAmC,UAAC,OAAD,EAAa;AACnD,mBAAO,QAAQ,KAAR,CAAc,GAAd,EAAmB,OAAnB,CAA2B,GAA3B,MAAoC,CAAC,CAAD,CADQ;SAAb,CAA1C,CAD4B;KAAhC;;;;;;;;AAF0C,aAcjC,kBAAT,CAA4B,WAA5B,EAAyC,OAAzC,EAAkD;AAC9C,YAAI,SAAS,KAAT,CAD0C;;AAG9C,gBAAQ,IAAR,CAAa,YAAY;AACrB,oBAAQ,aAAR,CAAsB,YAAY;AAC9B,uBAAO;AACH,yBAAK,OAAO,QAAP,CAAgB,IAAhB;AACL,iCAAa,CAAC,CAAC,OAAO,OAAP;iBAFnB,CAD8B;aAAZ,CAAtB,CAKG,IALH,CAKQ,UAAU,GAAV,EAAe;AACnB,yBAAU,IAAI,GAAJ,IAAW,WAAX,IAA0B,IAAI,WAAJ,CADjB;aAAf,CALR,CADqB;;AAUrB,mBAAO,MAAP,CAVqB;SAAZ,EAWV,OAXH,EAH8C;KAAlD,CAd0C;;AA+B1C,QAAI,uBAAJ,CA/B0C;AAgC1C,QAAI,sBAAJ,CAhC0C;;AAkC1C,OAAG,yDAAH,EAA8D,YAAM;AAChE,gBAAQ,qBAAR,GAAgC,IAAhC;AADgE,eAEhE,CAAQ,GAAR,CAAY,mCAAZ,EAFgE;;AAIhE,eAAO,QAAQ,QAAR,EAAP,EAA2B,OAA3B,CAAmC,SAAnC,EAJgE;KAAN,CAA9D,CAlC0C;;AAyC1C,OAAG,+EAAH,EAAoF,YAAM;AACtF,gBAAQ,qBAAR,GAAgC,IAAhC;AADsF,eAEtF,CAAQ,GAAG,EAAH,CAAM,UAAN,CAAR,EAA2B,QAA3B,CAAoC,aAApC,EAFsF;AAGtF,gBAAQ,GAAG,EAAH,CAAM,UAAN,CAAR,EAA2B,QAA3B,CAAoC,MAApC,EAHsF;AAItF,gBAAQ,GAAG,EAAH,CAAM,cAAN,CAAR,EAA+B,KAA/B,GAJsF;;AAMtF,2BAAmB,qCAAnB,EAA0D,IAA1D,EANsF;;AAQtF,gBAAQ,qBAAR,GAAgC,KAAhC;;AARsF,cAUtF,CAAO,QAAQ,QAAR,EAAP,EAA2B,OAA3B,CAAmC,gBAAnC,EAVsF;AAWtF,eAAO,QAAQ,aAAR,EAAP,EAAgC,OAAhC,CAAwC,qCAAxC,EAXsF;AAYtF,kCAA0B,QAAQ,GAAG,EAAH,CAAM,yBAAN,CAAR,CAA1B,CAZsF;AAatF,eAAO,wBAAwB,SAAxB,EAAP,EAA4C,UAA5C,GAbsF;AActF,iCAAyB,QAAQ,GAAG,EAAH,CAAM,wBAAN,CAAR,CAAzB,CAdsF;AAetF,eAAO,uBAAuB,SAAvB,EAAP,EAA2C,UAA3C,GAfsF;KAAN,CAApF;;;;;;AAzC0C,MA+D1C,CAAG,kDAAH,EAAuD,YAAM;AACzD,gCAAwB,KAAxB,GADyD;;AAGzD,gBAAQ,qBAAR,GAAgC,IAAhC;AAHyD,cAIzD,CAAO,QAAQ,QAAR,EAAP,EAA2B,OAA3B,CAAmC,wBAAnC,EAJyD;AAKzD,YAAI,gBAAgB,QAAQ,GAAG,EAAH,CAAM,SAAN,CAAR,CAAhB,CALqD;AAMzD,eAAO,cAAc,SAAd,EAAP,EAAkC,UAAlC,GANyD;AAOzD,sBAAc,KAAd,GAPyD;AAQzD,eAAO,QAAQ,QAAR,EAAP,EAA2B,OAA3B,CAAmC,8CAAnC,EARyD;AASzD,eAAO,QAAQ,aAAR,EAAP,EAAgC,OAAhC,CAAwC,6BAAxC,EATyD;KAAN,CAAvD,CA/D0C;CAAN,CAAxC","file":"authoringTool.spec.js","sourcesContent":["// E2E test for VLE running preview mode\ndescribe('WISE Classroom Monitor Tool', () => {\n\n    function hasClass(element, cls) {\n        return element.getAttribute('class').then((classes) => {\n            return classes.split(' ').indexOf(cls) !== -1;\n        });\n    };\n\n    /**\n     * @name waitForUrlToChange\n     * @description Wait until the URL changes to match a provided regex\n     * @param {RegExp} urlRegex wait until the URL changes to match this regex\n     * @returns {!webdriver.promise.Promise} Promise\n     */\n    function waitForUrlToChange(expectedUrl, timeout) {\n        var loaded = false;\n\n        browser.wait(function () {\n            browser.executeScript(function () {\n                return {\n                    url: window.location.href,\n                    haveAngular: !!window.angular\n                };\n            }).then(function (obj) {\n                loaded = (obj.url == expectedUrl && obj.haveAngular);\n            });\n\n            return loaded;\n        }, timeout);\n    };\n\n    var exitAuthoringToolButton;\n    var createNewProjectButton;\n\n    it('should require user to log in to use the authoring tool', () => {\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        browser.get('http://localhost:8080/wise/author');\n\n        expect(browser.getTitle()).toEqual('Sign In');\n    });\n\n    it('should log in using preview username and password and open the authoring tool', () => {\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        element(by.id('username')).sendKeys('previewuser');\n        element(by.id('password')).sendKeys('pass');\n        element(by.id('signInButton')).click();\n\n        waitForUrlToChange('http://localhost:8080/wise/author#/', 2000);\n\n        browser.ignoreSynchronization = false;  // uses Angular\n        // check that the exitAuthoringTool button and create new project buttons are displayed\n        expect(browser.getTitle()).toEqual('WISE Authoring');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/author#/');\n        exitAuthoringToolButton = element(by.id('exitAuthoringToolButton'));\n        expect(exitAuthoringToolButton.isPresent()).toBeTruthy();\n        createNewProjectButton = element(by.id('createNewProjectButton'));\n        expect(createNewProjectButton.isPresent()).toBeTruthy();\n    });\n\n    // TODO: add test for creating new project\n\n    // TODO: add test for opening newly-created project\n\n    it('should exit the authoring tool and then sign out', () => {\n        exitAuthoringToolButton.click();\n\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        expect(browser.getTitle()).toEqual('WISE Teacher Dashboard');\n        var signOutButton = element(by.id('signOut'));\n        expect(signOutButton.isPresent()).toBeTruthy();\n        signOutButton.click();\n        expect(browser.getTitle()).toEqual('Web-based Inquiry Science Environment (WISE)');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/');\n    });\n});"]}