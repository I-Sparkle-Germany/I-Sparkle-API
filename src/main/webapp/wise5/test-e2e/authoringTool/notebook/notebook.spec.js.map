{"version":3,"sources":["notebook.spec.es6"],"names":["common","describe","projectId","browser","params","authoringProjectId","beforeAll","page","ignoreSynchronization","get","$","sendKeys","login","user","password","click","beforeEach","refresh","wait","projectTitleSpan","isPresent","it","isNotebookEnabled","then","isEnabled","clickEnableNotebookCheckbox","shouldBeHidden","notebookLabel","shouldBeDisplayed","ms","Date","getTime","setNotebookLabel","clickProjectHomeButton","clickNotebookButton","expect","getAttribute","toEqual"],"mappings":";;AAAA;;IAAYA,M;;AACZ;;;;;;;;AAEA;;;AAGAC,SAAS,mCAAT,EAA8C,YAAM;;AAElD,MAAMC,YAAYC,QAAQC,MAAR,CAAeC,kBAAjC;;AAEAC,YAAU,YAAM;AACd,QAAMC,OAAO,4BAAb;AACA,QAAMH,SAASD,QAAQC,MAAvB;AACAD,YAAQK,qBAAR,GAAgC,IAAhC,CAHc,CAGyB;AACvCL,YAAQM,GAAR,CAAY,kCAAZ;AACAC,MAAE,WAAF,EAAeC,QAAf,CAAwBP,OAAOQ,KAAP,CAAaC,IAArC;AACAH,MAAE,WAAF,EAAeC,QAAf,CAAwBP,OAAOQ,KAAP,CAAaE,QAArC;AACAJ,MAAE,eAAF,EAAmBK,KAAnB;AACD,GARD;;AAUAC,aAAW,YAAM;AACf,QAAMT,OAAO,4BAAb;AACAJ,YAAQK,qBAAR,GAAgC,KAAhC,CAFe,CAEyB;AACxCL,YAAQM,GAAR,CAAY,gDAAgDP,SAAhD,GAA4D,WAAxE;AACAC,YAAQc,OAAR,GAJe,CAIK;AACpBd,YAAQe,IAAR,CAAa,YAAW;AACtB,aAAOX,KAAKY,gBAAL,CAAsBC,SAAtB,EAAP;AACD,KAFD,EAEG,IAFH,EAES,sCAFT;AAGD,GARD;;AAUAC,KAAG,8CAAH,EAAmD,YAAM;AACvD,QAAMd,OAAO,4BAAb;AACAA,SAAKe,iBAAL,GAAyBC,IAAzB,CAA8B,UAACC,SAAD,EAAe;AAC3C,UAAIA,SAAJ,EAAe;AACbjB,aAAKkB,2BAAL;AACD;AACDzB,aAAO0B,cAAP,CAAsBnB,KAAKoB,aAA3B;AACApB,WAAKkB,2BAAL;AACAzB,aAAO4B,iBAAP,CAAyBrB,KAAKoB,aAA9B;AACD,KAPD;AAQD,GAVD;;AAYAN,KAAG,oDAAH,EAAyD,YAAM;AAC7D,QAAMd,OAAO,4BAAb;AACA,QAAMsB,KAAK,IAAIC,IAAJ,GAAWC,OAAX,EAAX;AACAxB,SAAKe,iBAAL,GAAyBC,IAAzB,CAA8B,UAACC,SAAD,EAAe;AAC3C,UAAI,CAACA,SAAL,EAAgB;AACdjB,aAAKkB,2BAAL;AACD;AACDzB,aAAO4B,iBAAP,CAAyBrB,KAAKoB,aAA9B;AACApB,WAAKyB,gBAAL,CAAsB,cAAcH,EAApC;AACAtB,WAAK0B,sBAAL;AACA1B,WAAK2B,mBAAL;AACAC,aAAO5B,KAAKoB,aAAL,CAAmBS,YAAnB,CAAgC,OAAhC,CAAP,EAAiDC,OAAjD,CAAyD,cAAcR,EAAvE;AACD,KATD;AAUD,GAbD;AAeD,CAnDD","file":"notebook.spec.js","sourcesContent":["import * as common from '../../common.js';\nimport NotebookPage from './notebook.page.js';\n\n/**\n * E2E tests for the notebook view in the Authoring Tool\n */\ndescribe('WISE Authoring Tool Notebook View', () => {\n\n  const projectId = browser.params.authoringProjectId;\n\n  beforeAll(() => {\n    const page = new NotebookPage();\n    const params = browser.params;\n    browser.ignoreSynchronization = true;  // doesn't use Angular\n    browser.get('http://localhost:8080/wise/login');\n    $('#username').sendKeys(params.login.user);\n    $('#password').sendKeys(params.login.password);\n    $('#signInButton').click();\n  });\n\n  beforeEach(() => {\n    const page = new NotebookPage();\n    browser.ignoreSynchronization = false;  // uses Angular\n    browser.get('http://localhost:8080/wise/author#/project/' + projectId + '/notebook');\n    browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n    browser.wait(function() {\n      return page.projectTitleSpan.isPresent()\n    }, 5000, 'Authoring Tool didn\\'t load properly');\n  });\n\n  it('should allow the user to enable the notebook', () => {\n    const page = new NotebookPage();\n    page.isNotebookEnabled().then((isEnabled) => {\n      if (isEnabled) {\n        page.clickEnableNotebookCheckbox();\n      }\n      common.shouldBeHidden(page.notebookLabel);\n      page.clickEnableNotebookCheckbox();\n      common.shouldBeDisplayed(page.notebookLabel);\n    });\n  });\n\n  it('should allow the user to change the notebook label', () => {\n    const page = new NotebookPage();\n    const ms = new Date().getTime();\n    page.isNotebookEnabled().then((isEnabled) => {\n      if (!isEnabled) {\n        page.clickEnableNotebookCheckbox();\n      }\n      common.shouldBeDisplayed(page.notebookLabel);\n      page.setNotebookLabel('Notebook ' + ms);\n      page.clickProjectHomeButton();\n      page.clickNotebookButton();\n      expect(page.notebookLabel.getAttribute('value')).toEqual('Notebook ' + ms);\n    });\n  });\n\n});\n"]}