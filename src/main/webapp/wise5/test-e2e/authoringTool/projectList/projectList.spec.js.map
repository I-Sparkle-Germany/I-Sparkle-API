{"version":3,"sources":["projectList.spec.es6"],"names":["common","describe","projectId","beforeAll","params","browser","ignoreSynchronization","get","$","sendKeys","login","user","password","click","beforeEach","page","refresh","wait","createNewProjectButton","isPresent","it","createNewProject","shouldBeDisplayed","newProjectTitleInput","cancelCreateProject","shouldBeAbsent","urlShouldBe","setNewProjectTitle","createProject","urlShouldMatch","getCurrentUrl","then","url","substring","lastIndexOf","projects"],"mappings":";;AAAA;;IAAYA,M;;AACZ;;;;;;;;AAEA;;;AAGAC,SAAS,uCAAT,EAAkD,YAAM;AACtD,MAAIC,YAAY,IAAhB,CADsD,CAChC;;AAEtBC,YAAU,YAAM;AACd,QAAMC,SAASC,QAAQD,MAAvB;AACAC,YAAQC,qBAAR,GAAgC,IAAhC,CAFc,CAEwB;AACtCD,YAAQE,GAAR,CAAY,kCAAZ;AACAC,MAAE,WAAF,EAAeC,QAAf,CAAwBL,OAAOM,KAAP,CAAaC,IAArC;AACAH,MAAE,WAAF,EAAeC,QAAf,CAAwBL,OAAOM,KAAP,CAAaE,QAArC;AACAJ,MAAE,eAAF,EAAmBK,KAAnB;AACD,GAPD;;AASAC,aAAW,YAAM;AACf,QAAMC,OAAO,+BAAb;AACAV,YAAQC,qBAAR,GAAgC,KAAhC,CAFe,CAEwB;AACvCD,YAAQE,GAAR,CAAY,mCAAZ;AACAF,YAAQW,OAAR,GAJe,CAII;AACnBX,YAAQY,IAAR,CAAa,YAAW;AACtB,aAAOF,KAAKG,sBAAL,CAA4BC,SAA5B,EAAP;AACD,KAFD,EAEG,IAFH,EAES,sCAFT;AAGD,GARD;;AAUAC,KAAG,sCAAH,EAA2C,YAAM;AAC/C,QAAML,OAAO,+BAAb;AACAA,SAAKM,gBAAL;AACArB,WAAOsB,iBAAP,CAAyBP,KAAKQ,oBAA9B;AACAR,SAAKS,mBAAL;AACAxB,WAAOyB,cAAP,CAAsBV,KAAKQ,oBAA3B;AACAvB,WAAO0B,WAAP,CAAmB,qCAAnB;AACD,GAPD;;AASAN,KAAG,yCAAH,EAA8C,YAAM;AAClD,QAAML,OAAO,+BAAb;AACAA,SAAKM,gBAAL;AACArB,WAAOsB,iBAAP,CAAyBP,KAAKQ,oBAA9B;AACAR,SAAKY,kBAAL,CAAwB,oBAAxB;AACAZ,SAAKa,aAAL;AACA5B,WAAO6B,cAAP,CAAsB,mDAAtB;;AAEA;AACAxB,YAAQyB,aAAR,GAAwBC,IAAxB,CAA6B,UAACC,GAAD,EAAS;AAClC3B,cAAQD,MAAR,CAAeF,SAAf,GAA2B8B,IAAIC,SAAJ,CAAcD,IAAIE,WAAJ,CAAgB,GAAhB,IAAuB,CAArC,CAA3B;AACH,KAFD;AAGD,GAZD;;AAcAd,KAAG,iCAAH,EAAsC,YAAM;AAC1C,QAAML,OAAO,+BAAb;AACA,QAAMoB,WAAWpB,KAAKoB,QAAtB;AACAA,aAAS5B,GAAT,CAAa,CAAb,EAAgBM,KAAhB;AACAb,WAAO6B,cAAP,CAAsB,mDAAtB;AACD,GALD;;AAOA;AACD,CArDD","file":"projectList.spec.js","sourcesContent":["import * as common from '../../common.js';\nimport ProjectListPage from './projectList.page.js';\n\n/*\n * E2E tests for the project list view in the Authoring Tool\n */\ndescribe('WISE Authoring Tool Project List View', () => {\n  let projectId = null; // this will be set when we create a new project.\n\n  beforeAll(() => {\n    const params = browser.params;\n    browser.ignoreSynchronization = true; // doesn't use Angular\n    browser.get('http://localhost:8080/wise/login');\n    $('#username').sendKeys(params.login.user);\n    $('#password').sendKeys(params.login.password);\n    $('#signInButton').click();\n  });\n\n  beforeEach(() => {\n    const page = new ProjectListPage();\n    browser.ignoreSynchronization = false; // uses Angular\n    browser.get('http://localhost:8080/wise/author');\n    browser.refresh(); // needed for this issue https://github.com/angular/protractor/issues/2643\n    browser.wait(function() {\n      return page.createNewProjectButton.isPresent()\n    }, 5000, 'Authoring Tool didn\\'t load properly');\n  });\n\n  it('should cancel creating a new project', () => {\n    const page = new ProjectListPage();\n    page.createNewProject();\n    common.shouldBeDisplayed(page.newProjectTitleInput);\n    page.cancelCreateProject();\n    common.shouldBeAbsent(page.newProjectTitleInput);\n    common.urlShouldBe('http://localhost:8080/wise/author#/');\n  });\n\n  it('should create a new project and open it', () => {\n    const page = new ProjectListPage();\n    page.createNewProject();\n    common.shouldBeDisplayed(page.newProjectTitleInput);\n    page.setNewProjectTitle('My Science Project');\n    page.createProject();\n    common.urlShouldMatch('http://localhost:8080/wise/author#/project/[0-9]+');\n\n    // get the new project id and set it in the global variable\n    browser.getCurrentUrl().then((url) => {\n        browser.params.projectId = url.substring(url.lastIndexOf(\"/\") + 1);\n    });\n  });\n\n  it('should open an existing project', () => {\n    const page = new ProjectListPage();\n    const projects = page.projects;\n    projects.get(0).click();\n    common.urlShouldMatch('http://localhost:8080/wise/author#/project/[0-9]+');\n  });\n\n  // TODO: add test for copying a project\n});\n"]}