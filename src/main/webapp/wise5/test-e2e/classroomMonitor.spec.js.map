{"version":3,"sources":["classroomMonitor.spec.es6"],"names":["describe","hasClass","element","cls","getAttribute","then","classes","split","indexOf","waitForUrlToChangeTo","urlRegex","currentUrl","browser","getCurrentUrl","storeCurrentUrl","url","wait","compareCurrentUrl","test","it","ignoreSynchronization","get","expect","getTitle","toEqual","$","sendKeys","click","classroomMonitorLink","isPresent","toBeTruthy","getAllWindowHandles","handles","switchTo","window","refresh","waitForAngular","toContain","driver","close","signOutButton"],"mappings":"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","file":"classroomMonitor.spec.js","sourcesContent":["// E2E test for Classroom Monitor\ndescribe('WISE Classroom Monitor', () => {\n\n    function hasClass(element, cls) {\n        return element.getAttribute('class').then((classes) => {\n            return classes.split(' ').indexOf(cls) !== -1;\n        });\n    };\n\n    /**\n     * @name waitForUrlToChangeTo\n     * @description Wait until the URL changes to match a provided regex\n     * @param {RegExp} urlRegex wait until the URL changes to match this regex\n     * @returns {!webdriver.promise.Promise} Promise\n     */\n    function waitForUrlToChangeTo(urlRegex) {\n        var currentUrl;\n\n        return browser.getCurrentUrl().then(function storeCurrentUrl(url) {\n                currentUrl = url;\n            }\n        ).then(function waitForUrlToChangeTo() {\n                return browser.wait(function waitForUrlToChangeTo() {\n                    return browser.getCurrentUrl().then(function compareCurrentUrl(url) {\n                        return urlRegex.test(url);\n                    });\n                });\n            }\n        );\n    };\n\n    it('should log in using preview username and password and open the classroom monitor tool', () => {\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        browser.get('http://localhost:8080/wise/login');\n        expect(browser.getTitle()).toEqual('Sign In');\n        $('#username').sendKeys('preview');\n        $('#password').sendKeys('wise');\n        $('#signInButton').click();\n\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/teacher');\n        expect(browser.getTitle()).toEqual('WISE Teacher Dashboard');\n        // Find and click on the classroom monitor link\n        let classroomMonitorLink = $(\".classroomMonitor\");\n        expect(classroomMonitorLink.isPresent()).toBeTruthy();\n        classroomMonitorLink.click();\n\n        // Clicking on the classroom monitor link should open the classroom monitor in a new window\n        browser.getAllWindowHandles().then((handles) => {\n            browser.switchTo().window(handles[1]).then(() => {\n                browser.ignoreSynchronization = false;  // uses Angular\n                browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n                browser.waitForAngular();   // wait for Angular to load\n                expect(browser.getCurrentUrl()).toContain('http://localhost:8080/wise/classroomMonitor/');\n                expect(browser.getTitle()).toEqual('WISE Classroom Monitor');\n\n                // check for elements on the page\n                expect($(\"#gradeByWorkgroupButton\").isPresent()).toBeTruthy();\n                expect($(\"#gradeByStepButton\").isPresent()).toBeTruthy();\n                expect($(\"#pauseScreensButton\").isPresent()).toBeTruthy();\n                expect($(\"#downloadStudentWorkButton\").isPresent()).toBeTruthy();\n\n                // close the current window\n                browser.driver.close().then(() => {\n                    // switch to the main authoring window\n                    browser.switchTo().window(handles[0]);\n                });\n            });\n        });\n\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        expect(browser.getTitle()).toEqual('WISE Teacher Dashboard');\n        var signOutButton = $(\"#signOut\");\n        expect(signOutButton.isPresent()).toBeTruthy();\n        signOutButton.click();\n        expect(browser.getTitle()).toEqual('Web-based Inquiry Science Environment (WISE)');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/');\n    });\n});"]}