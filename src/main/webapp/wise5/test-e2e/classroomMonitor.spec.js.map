{"version":3,"sources":["classroomMonitor.spec.es6"],"names":[],"mappings":"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","file":"classroomMonitor.spec.js","sourcesContent":["// E2E test for Classroom Monitor\ndescribe('WISE Classroom Monitor', () => {\n\n    function hasClass(element, cls) {\n        return element.getAttribute('class').then((classes) => {\n            return classes.split(' ').indexOf(cls) !== -1;\n        });\n    };\n\n    /**\n     * @name waitForUrlToChangeTo\n     * @description Wait until the URL changes to match a provided regex\n     * @param {RegExp} urlRegex wait until the URL changes to match this regex\n     * @returns {!webdriver.promise.Promise} Promise\n     */\n    function waitForUrlToChangeTo(urlRegex) {\n        var currentUrl;\n\n        return browser.getCurrentUrl().then(function storeCurrentUrl(url) {\n                currentUrl = url;\n            }\n        ).then(function waitForUrlToChangeTo() {\n                return browser.wait(function waitForUrlToChangeTo() {\n                    return browser.getCurrentUrl().then(function compareCurrentUrl(url) {\n                        return urlRegex.test(url);\n                    });\n                });\n            }\n        );\n    };\n\n    it('should log in using preview username and password and open the classroom monitor tool', () => {\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        browser.get('http://localhost:8080/wise/login');\n        expect(browser.getTitle()).toEqual('Sign In');\n        $('#username').sendKeys('preview');\n        $('#password').sendKeys('wise');\n        $('#signInButton').click();\n\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/teacher');\n        expect(browser.getTitle()).toEqual('WISE Teacher Dashboard');\n        // Find and click on the classroom monitor link\n        let classroomMonitorLink = $(\".classroomMonitor\");\n        expect(classroomMonitorLink.isPresent()).toBeTruthy();\n        classroomMonitorLink.click();\n\n        // Clicking on the classroom monitor link should open the classroom monitor in a new window\n        browser.getAllWindowHandles().then((handles) => {\n            browser.switchTo().window(handles[1]).then(() => {\n                browser.ignoreSynchronization = false;  // uses Angular\n                browser.refresh();  // needed for this issue https://github.com/angular/protractor/issues/2643\n                browser.waitForAngular();   // wait for Angular to load\n                expect(browser.getCurrentUrl()).toContain('http://localhost:8080/wise/classroomMonitor/');\n                expect(browser.getTitle()).toEqual('WISE Classroom Monitor');\n\n                // check for elements on the page\n                expect($(\"#gradeByWorkgroupButton\").isPresent()).toBeTruthy();\n                expect($(\"#gradeByStepButton\").isPresent()).toBeTruthy();\n                expect($(\"#pauseScreensButton\").isPresent()).toBeTruthy();\n                expect($(\"#downloadStudentWorkButton\").isPresent()).toBeTruthy();\n\n                // close the current window\n                browser.driver.close().then(() => {\n                    // switch to the main authoring window\n                    browser.switchTo().window(handles[0]);\n                });\n            });\n        });\n\n        browser.ignoreSynchronization = true;  // doesn't use Angular\n        expect(browser.getTitle()).toEqual('WISE Teacher Dashboard');\n        var signOutButton = $(\"#signOut\");\n        expect(signOutButton.isPresent()).toBeTruthy();\n        signOutButton.click();\n        expect(browser.getTitle()).toEqual('Web-based Inquiry Science Environment (WISE)');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/');\n    });\n});"]}