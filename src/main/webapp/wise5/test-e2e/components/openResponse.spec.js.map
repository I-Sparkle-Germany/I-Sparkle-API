{"version":3,"sources":["openResponse.spec.es6"],"names":["common","VLEPage","require","OpenResponsePage","describe","shouldDisplayDefaultElements","vle","or","nodeSelectMenuShouldSay","shouldBePresent","textarea","saveButton","submitButton","shouldBeAbsent","saveMessage","shouldBeDisabled","prompt","getPrompt","expect","getText","toEqual","save","shouldBeEnabled","toContain","submit","submitMessage","beforeEach","get","wait","nodeDropDownMenu","isPresent","it","firstSentence","typeResponse","textareaShouldSay","secondSentence","thirdSentence","seaShellsSentence","goToPreviousStep","urlShouldBe","goToNextStep"],"mappings":"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","file":"openResponse.spec.js","sourcesContent":["import {browser, element} from 'protractor';\nimport * as common from '../common.js';\nlet VLEPage = require('../vlePage.js');\nlet OpenResponsePage = require('./openResponsePage.js');\n\ndescribe('WISE5 Open Response Component', () => {\n  function shouldDisplayDefaultElements(vle, or) {\n    vle.nodeSelectMenuShouldSay('1.2: Open Response Step');\n    common.shouldBePresent([or.textarea, or.saveButton, or.submitButton]);\n    common.shouldBeAbsent([or.saveMessage]);\n    common.shouldBeDisabled([or.saveButton, or.submitButton]);\n\n    let prompt = or.getPrompt();\n    common.shouldBePresent([prompt]);\n    expect(prompt.getText())\n        .toEqual('This is a step where students enter text.');\n  }\n\n  function save(or) {\n    or.save();\n    common.shouldBeDisabled([or.saveButton]);\n    common.shouldBeEnabled([or.submitButton]);\n    expect(or.saveMessage.getText()).toContain(\"Saved\");\n  }\n\n  function submit(or) {\n    or.submit();\n    common.shouldBeDisabled([or.saveButton, or.saveButton]);\n    expect(or.submitMessage.getText()).toContain(\"Submitted\");\n  }\n\n  beforeEach(() => {\n    let vle = new VLEPage();\n    browser.get('http://localhost:8080/wise/project/demo#/vle/node2');\n    browser.wait(function() {\n      return vle.nodeDropDownMenu.isPresent()\n    }, 5000);\n  });\n\n  it('should allow students to type text and edit', () => {\n    let vle = new VLEPage();\n    let or = new OpenResponsePage();\n    shouldDisplayDefaultElements(vle, or);\n\n    let firstSentence = 'Here is my first sentence. ';\n    or.typeResponse(firstSentence);\n    or.textareaShouldSay(firstSentence);\n    common.shouldBeEnabled([or.saveButton, or.submitButton]);\n\n    save(or);\n    common.shouldBeDisabled([or.saveButton]);\n    common.shouldBeEnabled([or.submitButton]);\n\n    // should be able to edit response text even after saving\n    let secondSentence = 'Here is my second sentence. ';\n    or.typeResponse(secondSentence);\n    or.textareaShouldSay(firstSentence + secondSentence);\n\n    submit(or);\n    common.shouldBeDisabled([or.saveButton, or.submitButton]);\n\n    // should be able to edit response text even after submitting\n    let thirdSentence = 'Here is my third sentence.';\n    or.typeResponse(thirdSentence);\n    or.textareaShouldSay(firstSentence + secondSentence + thirdSentence);\n  });\n\n  it('should auto-save on exit and show previously-entered response on revisit',\n      () => {\n    let vle = new VLEPage();\n    let or = new OpenResponsePage();\n    shouldDisplayDefaultElements(vle, or);\n\n    let seaShellsSentence = 'She sells seashells by the seashore.';\n    or.typeResponse(seaShellsSentence);\n    or.textareaShouldSay(seaShellsSentence);\n    common.shouldBeEnabled([or.saveButton, or.submitButton]);\n\n    vle.goToPreviousStep();\n    common.urlShouldBe('http://localhost:8080/wise/project/demo#/vle/node1');\n    vle.nodeSelectMenuShouldSay('1.1: HTML Step');\n\n    vle.goToNextStep();\n    common.urlShouldBe('http://localhost:8080/wise/project/demo#/vle/node2');\n    vle.nodeSelectMenuShouldSay('1.2: Open Response Step');\n    or.textareaShouldSay(seaShellsSentence);\n\n    // auto-save should have occurred, so the save button is disabled.\n    common.shouldBeDisabled([or.saveButton]);\n    common.shouldBeEnabled([or.submitButton]);\n  });\n});\n"]}