{"version":3,"sources":["openResponse.spec.es6"],"names":["saveButton","by","id","saveMessage","binding","submitButton","textarea","model","nodeDropDownMenu","hasClass","element","cls","getAttribute","then","classes","split","indexOf","shouldBeDisabled","elements","expect","shouldBeEnabled","shouldBePresent","isPresent","toBeTruthy","shouldBeAbsent","toBeFalsy","describe","beforeAll","get","wait","it","getText","toBe","nodeContent","cssContainingText","firstSentence","secondSentence","sendKeys","click","toContain","toEqual"],"mappings":"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","file":"openResponse.spec.js","sourcesContent":["import {browser, element} from 'protractor';\n\nlet saveButton = element(by.id('saveButton'));\nlet saveMessage = element(by.binding('openResponseController.saveMessage.text'));\nlet submitButton = element(by.id('submitButton'));\nlet textarea = element(by.model('openResponseController.studentResponse'));\nlet nodeDropDownMenu = element(by.model(\"stepToolsCtrl.toNodeId\"));\n\nfunction hasClass(element, cls) {\n  return element.getAttribute('class').then((classes) => {\n  return classes.split(' ').indexOf(cls) !== -1;\n  });\n}\n\nfunction shouldBeDisabled(elements) {\n  for (let element of elements) {\n    expect(hasClass(element, \"disabled\"));\n  }\n}\n\nfunction shouldBeEnabled(elements) {\n  for (let element of elements) {\n    expect(!hasClass(element, \"disabled\"));\n  }\n}\n\nfunction shouldBePresent(elements) {\n  for (let element of elements) {\n    expect(element.isPresent()).toBeTruthy();\n  }\n}\n\nfunction shouldBeAbsent(elements) {\n  for (let element of elements) {\n    expect(element.isPresent()).toBeFalsy();\n  }\n}\n\ndescribe('WISE5 Open Response Component', () => {\n\n  beforeAll(() => {\n    browser.get('http://localhost:8080/wise/project/demo#/vle/node2');\n    browser.wait(function() {\n      return nodeDropDownMenu.isPresent()\n    }, 5000);\n  });\n\n  it('should show open response component', () => {\n    expect(nodeDropDownMenu.getText()).toBe('1.2: Open Response Step');\n\n    let nodeContent = element(by.cssContainingText(\n      '.node-content','This is a step where students enter text.'));\n    shouldBePresent([nodeContent, textarea, saveButton, submitButton]);\n    shouldBeAbsent([saveMessage]);\n    shouldBeEnabled([textarea]);\n    shouldBeDisabled([saveButton, submitButton]);\n  });\n\n  it('should allow students to type text and edit', () => {\n    let firstSentence = 'Here is my first sentence. ';\n    let secondSentence = 'Here is my second sentence.';\n    textarea.sendKeys(firstSentence);\n    shouldBeEnabled([saveButton, submitButton]);\n\n    saveButton.click();\n    expect(saveMessage.getText()).toContain(\"Saved\");\n    shouldBeDisabled([saveButton]);\n    shouldBeEnabled([submitButton]);\n\n    submitButton.click();\n    expect(saveMessage.getText()).toContain(\"Submitted\");\n    shouldBeEnabled([saveButton, submitButton]);\n\n    // should be able to edit your text even after submitting\n    textarea.sendKeys(secondSentence);\n    expect(textarea.getAttribute('value'))\n        .toEqual(firstSentence + secondSentence);\n  });\n});\n"]}