{"version":3,"sources":["openResponse.spec.es6"],"names":["common","describe","shouldDisplayDefaultElements","vle","or","nodeSelectMenuShouldSay","shouldBePresent","textarea","saveButton","submitButton","shouldBeAbsent","saveMessage","shouldBeDisabled","prompt","getPrompt","expect","getText","toEqual","save","shouldBeEnabled","toContain","submit","submitMessage","textareaShouldSay","expectedTextareaText","getAttribute","beforeEach","get","wait","nodeDropDownMenu","isPresent","then","it","firstSentence","typeResponse","secondSentence","thirdSentence","seaShellsSentence","goToPreviousStep","urlShouldBe","goToNextStep"],"mappings":"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","file":"openResponse.spec.js","sourcesContent":["import {browser, element} from 'protractor';\nimport * as common from '../../common.js';\nimport VLEPage from '../../vlePage.js';\nimport OpenResponsePage from './openResponsePage.js'\n\ndescribe('WISE5 Open Response Component', () => {\n  function shouldDisplayDefaultElements(vle, or) {\n    vle.nodeSelectMenuShouldSay('1.2: Open Response Step');\n    common.shouldBePresent(or.textarea, or.saveButton, or.submitButton);\n    common.shouldBeAbsent(or.saveMessage);\n    common.shouldBeDisabled(or.saveButton, or.submitButton);\n\n    const prompt = or.getPrompt();\n    common.shouldBePresent(prompt);\n    expect(prompt.getText())\n        .toEqual('This is a step where students enter text.');\n  }\n\n  function save(or) {\n    or.save();\n    common.shouldBeDisabled(or.saveButton);\n    common.shouldBeEnabled(or.submitButton);\n    expect(or.saveMessage.getText()).toContain(\"Saved\");\n  }\n\n  function submit(or) {\n    or.submit();\n    common.shouldBeDisabled(or.saveButton, or.saveButton);\n    expect(or.submitMessage.getText()).toContain(\"Submitted\");\n  }\n\n  function textareaShouldSay(or, expectedTextareaText) {\n    expect(or.textarea.getAttribute('value')).toEqual(expectedTextareaText);\n  }\n\n  beforeEach(() => {\n    const vle = new VLEPage();\n    browser.get('http://localhost:8080/wise/project/demo#/vle/node2');\n    browser.wait(function() {\n      return vle.nodeDropDownMenu.isPresent()\n    }, 5000, 'VLE didn\\'t load properly').then(() => {\n      const or = new OpenResponsePage();\n      shouldDisplayDefaultElements(vle, or);\n    });\n  });\n\n  it('should allow students to type text and edit', () => {\n    const or = new OpenResponsePage();\n    const firstSentence = 'Here is my first sentence. ';\n    or.typeResponse(firstSentence);\n    textareaShouldSay(or, firstSentence);\n    common.shouldBeEnabled(or.saveButton, or.submitButton);\n\n    save(or);\n    common.shouldBeDisabled(or.saveButton);\n    common.shouldBeEnabled(or.submitButton);\n\n    // should be able to continue editing response text even after saving\n    const secondSentence = 'Here is my second sentence. ';\n    or.typeResponse(secondSentence);\n    textareaShouldSay(or, firstSentence + secondSentence);\n\n    submit(or);\n    common.shouldBeDisabled(or.saveButton, or.submitButton);\n\n    // should be able to continue editing response text even after submitting\n    const thirdSentence = 'Here is my third sentence.';\n    or.typeResponse(thirdSentence);\n    textareaShouldSay(or, firstSentence + secondSentence + thirdSentence);\n  });\n\n  it('should auto-save on exit and show previously-entered response on revisit',\n      () => {\n    const or = new OpenResponsePage();\n    const seaShellsSentence = 'She sells seashells by the seashore.';\n    or.typeResponse(seaShellsSentence);\n    textareaShouldSay(or, seaShellsSentence);\n    common.shouldBeEnabled(or.saveButton, or.submitButton);\n\n    const vle = new VLEPage();\n    vle.goToPreviousStep();\n    common.urlShouldBe('http://localhost:8080/wise/project/demo#/vle/node1');\n    vle.nodeSelectMenuShouldSay('1.1: HTML Step');\n\n    vle.goToNextStep();\n    common.urlShouldBe('http://localhost:8080/wise/project/demo#/vle/node2');\n    vle.nodeSelectMenuShouldSay('1.2: Open Response Step');\n    textareaShouldSay(or, seaShellsSentence);\n\n    // auto-save should have occurred, so the save button is disabled.\n    common.shouldBeDisabled(or.saveButton);\n    common.shouldBeEnabled(or.submitButton);\n  });\n});\n"]}