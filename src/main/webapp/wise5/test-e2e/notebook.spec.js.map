{"version":3,"sources":["notebook.spec.es6"],"names":["describe","hasClass","element","cls","getAttribute","then","classes","split","indexOf","notebookButton","by","xpath","reportButton","addNoteButton","addNoteDialog","it","browser","get","nodeDropDownMenu","model","wait","isPresent","expect","getTitle","toEqual","getText","toBe","toBeTruthy","toBeFalsy","click","getCurrentUrl","closeNotebookButton","notebookTitle","$","isDisplayed","closeNoteDialogButton"],"mappings":"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","file":"notebook.spec.js","sourcesContent":["// E2E test for working with the notebook in preview mode\ndescribe('WISE5 Notebook in Preview Mode', () => {\n\n    var hasClass = (element, cls) => {\n        return element.getAttribute('class').then((classes) => {\n            return classes.split(' ').indexOf(cls) !== -1;\n        });\n    };\n\n    let notebookButton = element(by.xpath('//md-toolbar/button[@aria-label=\"View Notes\"]'));\n    let reportButton = element(by.xpath('//md-toolbar/button[@aria-label=\"View Report\"]'));\n    let addNoteButton = element(by.xpath('//md-toolbar/button[@aria-label=\"Add Notebook item\"]'));\n    let addNoteDialog = element(by.xpath('//md-dialog[@aria-label=\"Add note\"]'));\n\n    it('should load the vle and go to node 1 and show notebook buttons', () => {\n        browser.get('http://localhost:8080/wise/project/demo#/vle/node1');\n        let nodeDropDownMenu = element(by.model(\"stepToolsCtrl.toNodeId\"));\n        browser.wait((nodeDropDownMenu).isPresent(), 5000);  // give it at most 5 seconds to load.\n        expect(browser.getTitle()).toEqual('WISE');\n        expect(nodeDropDownMenu.getText()).toBe('1.1: HTML Step');\n        expect(notebookButton.isPresent()).toBeTruthy();\n        expect(reportButton.isPresent()).toBeTruthy();\n        expect(addNoteButton.isPresent()).toBeTruthy();\n        expect(addNoteDialog.isPresent()).toBeFalsy();\n    });\n\n    it('should open and close the notebook notes view', () => {\n        // Click on the notebook icon to open the notebook notes view\n        notebookButton.click();\n        // the url should change to /notebook\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/notebook/');\n        // check that UI elements are displayed\n        let closeNotebookButton = element(by.xpath('//md-toolbar/div/button[@aria-label=\"Close Notebook\"]'));\n        expect(closeNotebookButton.isPresent()).toBeTruthy();\n        let notebookTitle = $(\".toolbar-title\");\n        expect(notebookTitle.getText()).toBe(\"Notes\");\n\n        // Clicking on the closeNotebookButton should dismiss the notebook and bring user back to original step\n        closeNotebookButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n    });\n\n    it('should open and close the notebook report view', () => {\n        // Click on the report icon to open the notebook report view\n        reportButton.click();\n        // the url should change to /notebook\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/notebook/');\n        // check that UI elements are displayed\n        let closeNotebookButton = element(by.xpath('//md-toolbar/div/button[@aria-label=\"Close Notebook\"]'));\n        expect(closeNotebookButton.isPresent()).toBeTruthy();\n        let notebookTitle = $(\".toolbar-title\");\n        expect(notebookTitle.getText()).toBe(\"Report\");\n\n        // Clicking on the closeNotebookButton should dismiss the notebook and bring user back to original step\n        closeNotebookButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n    });\n\n    it('should open and close the add note view', () => {\n        // Click on the add note icon to open the add note dialog\n        addNoteButton.click();\n        // the url should stay the same\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n        // check that UI elements are displayed\n        expect(addNoteDialog.isPresent()).toBeTruthy();\n        expect(addNoteDialog.isDisplayed()).toBeTruthy();\n\n        let closeNoteDialogButton = element(by.xpath('//md-dialog-actions/button[@aria-label=\"Cancel\"]'));\n        expect(closeNoteDialogButton.isPresent()).toBeTruthy();\n\n        // Clicking on the closeNoteDialogButton should dismiss the add note dialog and bring user back to original step\n        closeNoteDialogButton.click();\n        expect(addNoteDialog.isPresent()).toBeFalsy();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n    });\n});"]}