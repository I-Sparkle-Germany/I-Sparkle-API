{"version":3,"sources":["notebook.spec.es6"],"names":["describe","hasClass","element","cls","getAttribute","then","classes","split","indexOf","notebookButton","by","xpath","reportButton","addNoteButton","addNoteDialog","it","browser","get","nodeDropDownMenu","model","wait","isPresent","expect","getTitle","toEqual","getText","toBe","toBeTruthy","toBeFalsy","click","getCurrentUrl","closeNotebookButton","notebookTitle","$","isDisplayed","noteTextarea","saveNoteDialogButton","closeNoteDialogButton","sendKeys","newNoteItemDiv","deleteNotebookItemButton","notebookItemContentLocation","cssContainingText"],"mappings":";;AAAA;AACAA,SAAS,gCAAT,EAA2C,YAAM;;AAE7C,QAAIC,WAAW,SAAXA,QAAW,CAACC,OAAD,EAAUC,GAAV,EAAkB;AAC7B,eAAOD,QAAQE,YAAR,CAAqB,OAArB,EAA8BC,IAA9B,CAAmC,UAACC,OAAD,EAAa;AACnD,mBAAOA,QAAQC,KAAR,CAAc,GAAd,EAAmBC,OAAnB,CAA2BL,GAA3B,MAAoC,CAAC,CAA5C;AACH,SAFM,CAAP;AAGH,KAJD;;AAMA,QAAIM,iBAAiBP,QAAQQ,GAAGC,KAAH,CAAS,+CAAT,CAAR,CAArB;AACA,QAAIC,eAAeV,QAAQQ,GAAGC,KAAH,CAAS,gDAAT,CAAR,CAAnB;AACA,QAAIE,gBAAgBX,QAAQQ,GAAGC,KAAH,CAAS,sDAAT,CAAR,CAApB;AACA,QAAIG,gBAAgBZ,QAAQQ,GAAGC,KAAH,CAAS,qCAAT,CAAR,CAApB;;AAEAI,OAAG,gEAAH,EAAqE,YAAM;AACvEC,gBAAQC,GAAR,CAAY,oDAAZ;AACA,YAAIC,mBAAmBhB,QAAQQ,GAAGS,KAAH,CAAS,wBAAT,CAAR,CAAvB;AACAH,gBAAQI,IAAR,CAAcF,gBAAD,CAAmBG,SAAnB,EAAb,EAA6C,IAA7C,EAHuE,CAGlB;AACrDC,eAAON,QAAQO,QAAR,EAAP,EAA2BC,OAA3B,CAAmC,MAAnC;AACAF,eAAOJ,iBAAiBO,OAAjB,EAAP,EAAmCC,IAAnC,CAAwC,gBAAxC;AACAJ,eAAOb,eAAeY,SAAf,EAAP,EAAmCM,UAAnC;AACAL,eAAOV,aAAaS,SAAb,EAAP,EAAiCM,UAAjC;AACAL,eAAOT,cAAcQ,SAAd,EAAP,EAAkCM,UAAlC;AACAL,eAAOR,cAAcO,SAAd,EAAP,EAAkCO,SAAlC;AACH,KAVD;;AAYAb,OAAG,+CAAH,EAAoD,YAAM;AACtD;AACAN,uBAAeoB,KAAf;AACA;AACAP,eAAON,QAAQc,aAAR,EAAP,EAAgCN,OAAhC,CAAwC,oDAAxC;AACA;AACA,YAAIO,sBAAsB7B,QAAQQ,GAAGC,KAAH,CAAS,uDAAT,CAAR,CAA1B;AACAW,eAAOS,oBAAoBV,SAApB,EAAP,EAAwCM,UAAxC;AACA,YAAIK,gBAAgBC,EAAE,gBAAF,CAApB;AACAX,eAAOU,cAAcP,OAAd,EAAP,EAAgCC,IAAhC,CAAqC,OAArC;;AAEA;AACAK,4BAAoBF,KAApB;AACAP,eAAON,QAAQc,aAAR,EAAP,EAAgCN,OAAhC,CAAwC,oDAAxC;AACH,KAdD;;AAgBAT,OAAG,gDAAH,EAAqD,YAAM;AACvD;AACAH,qBAAaiB,KAAb;AACA;AACAP,eAAON,QAAQc,aAAR,EAAP,EAAgCN,OAAhC,CAAwC,oDAAxC;AACA;AACA,YAAIO,sBAAsB7B,QAAQQ,GAAGC,KAAH,CAAS,uDAAT,CAAR,CAA1B;AACAW,eAAOS,oBAAoBV,SAApB,EAAP,EAAwCM,UAAxC;AACA,YAAIK,gBAAgBC,EAAE,gBAAF,CAApB;AACAX,eAAOU,cAAcP,OAAd,EAAP,EAAgCC,IAAhC,CAAqC,QAArC;;AAEA;AACAK,4BAAoBF,KAApB;AACAP,eAAON,QAAQc,aAAR,EAAP,EAAgCN,OAAhC,CAAwC,oDAAxC;AACH,KAdD;;AAgBAT,OAAG,yCAAH,EAA8C,YAAM;AAChD;AACAF,sBAAcgB,KAAd;AACA;AACAP,eAAON,QAAQc,aAAR,EAAP,EAAgCN,OAAhC,CAAwC,oDAAxC;AACA;AACAF,eAAOR,cAAcO,SAAd,EAAP,EAAkCM,UAAlC;AACAL,eAAOR,cAAcoB,WAAd,EAAP,EAAoCP,UAApC;AACA,YAAIQ,eAAejC,QAAQQ,GAAGC,KAAH,CAAS,yCAAT,CAAR,CAAnB;AACAW,eAAOa,aAAad,SAAb,EAAP,EAAiCM,UAAjC;;AAEA,YAAIS,uBAAuBlC,QAAQQ,GAAGC,KAAH,CAAS,gDAAT,CAAR,CAA3B;AACAW,eAAOc,qBAAqBf,SAArB,EAAP,EAAyCM,UAAzC;AACAL,eAAOc,qBAAqBhC,YAArB,CAAkC,UAAlC,CAAP,EAAsDsB,IAAtD,CAA2D,MAA3D,EAbgD,CAaqB;;AAErE,YAAIW,wBAAwBnC,QAAQQ,GAAGC,KAAH,CAAS,kDAAT,CAAR,CAA5B;AACAW,eAAOe,sBAAsBhB,SAAtB,EAAP,EAA0CM,UAA1C;;AAEA;AACAU,8BAAsBR,KAAtB;AACAP,eAAOR,cAAcO,SAAd,EAAP,EAAkCO,SAAlC;AACAN,eAAON,QAAQc,aAAR,EAAP,EAAgCN,OAAhC,CAAwC,oDAAxC;AACH,KAtBD;;AAwBAT,OAAG,sBAAH,EAA2B,YAAM;AAC7B;AACAF,sBAAcgB,KAAd;AACA;AACAP,eAAON,QAAQc,aAAR,EAAP,EAAgCN,OAAhC,CAAwC,oDAAxC;AACA;AACAF,eAAOR,cAAcO,SAAd,EAAP,EAAkCM,UAAlC;AACAL,eAAOR,cAAcoB,WAAd,EAAP,EAAoCP,UAApC;AACA,YAAIQ,eAAejC,QAAQQ,GAAGC,KAAH,CAAS,yCAAT,CAAR,CAAnB;AACAW,eAAOa,aAAad,SAAb,EAAP,EAAiCM,UAAjC;;AAEA,YAAIS,uBAAuBlC,QAAQQ,GAAGC,KAAH,CAAS,gDAAT,CAAR,CAA3B;AACAW,eAAOc,qBAAqBf,SAArB,EAAP,EAAyCM,UAAzC;AACAL,eAAOc,qBAAqBhC,YAArB,CAAkC,UAAlC,CAAP,EAAsDsB,IAAtD,CAA2D,MAA3D,EAb6B,CAawC;;AAErES,qBAAaG,QAAb,CAAsB,uBAAtB;AACAF,6BAAqBP,KAArB;;AAEAP,eAAOR,cAAcO,SAAd,EAAP,EAAkCO,SAAlC,GAlB6B,CAkBmB;AAChDN,eAAON,QAAQc,aAAR,EAAP,EAAgCN,OAAhC,CAAwC,oDAAxC;;AAEA;AACAf,uBAAeoB,KAAf;AACA;AACAP,eAAON,QAAQc,aAAR,EAAP,EAAgCN,OAAhC,CAAwC,oDAAxC;;AAEA;AACA,YAAIe,iBAAiBrC,QAAQQ,GAAGC,KAAH,CAAS,oDAAT,CAAR,CAArB;AACAW,eAAOiB,eAAelB,SAAf,EAAP,EAAmCM,UAAnC;AACAL,eAAOiB,eAAed,OAAf,EAAP,EAAiCC,IAAjC,CAAsC,uBAAtC;AACA,YAAIc,2BAA2BtC,QAAQQ,GAAGC,KAAH,CAAS,8DAAT,CAAR,CAA/B;AACAW,eAAOkB,yBAAyBnB,SAAzB,EAAP,EAA6CM,UAA7C;AACA,YAAIc,8BAA8BvC,QAAQQ,GAAGgC,iBAAH,CAAqB,mCAArB,EAAyD,KAAzD,CAAR,CAAlC;AACApB,eAAOmB,4BAA4BpB,SAA5B,EAAP,EAAgDM,UAAhD;AACH,KAlCD;AAmCH,CApHD","file":"notebook.spec.js","sourcesContent":["// E2E test for working with the notebook in preview mode\ndescribe('WISE5 Notebook in Preview Mode', () => {\n\n    var hasClass = (element, cls) => {\n        return element.getAttribute('class').then((classes) => {\n            return classes.split(' ').indexOf(cls) !== -1;\n        });\n    };\n\n    let notebookButton = element(by.xpath('//md-toolbar/button[@aria-label=\"View Notes\"]'));\n    let reportButton = element(by.xpath('//md-toolbar/button[@aria-label=\"View Report\"]'));\n    let addNoteButton = element(by.xpath('//md-toolbar/button[@aria-label=\"Add Notebook item\"]'));\n    let addNoteDialog = element(by.xpath('//md-dialog[@aria-label=\"Add note\"]'));\n\n    it('should load the vle and go to node 1 and show notebook buttons', () => {\n        browser.get('http://localhost:8080/wise/project/demo#/vle/node1');\n        let nodeDropDownMenu = element(by.model(\"stepToolsCtrl.toNodeId\"));\n        browser.wait((nodeDropDownMenu).isPresent(), 5000);  // give it at most 5 seconds to load.\n        expect(browser.getTitle()).toEqual('WISE');\n        expect(nodeDropDownMenu.getText()).toBe('1.1: HTML Step');\n        expect(notebookButton.isPresent()).toBeTruthy();\n        expect(reportButton.isPresent()).toBeTruthy();\n        expect(addNoteButton.isPresent()).toBeTruthy();\n        expect(addNoteDialog.isPresent()).toBeFalsy();\n    });\n\n    it('should open and close the notebook notes view', () => {\n        // Click on the notebook icon to open the notebook notes view\n        notebookButton.click();\n        // the url should change to /notebook\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/notebook/');\n        // check that UI elements are displayed\n        let closeNotebookButton = element(by.xpath('//md-toolbar/div/button[@aria-label=\"Close Notebook\"]'));\n        expect(closeNotebookButton.isPresent()).toBeTruthy();\n        let notebookTitle = $(\".toolbar-title\");\n        expect(notebookTitle.getText()).toBe(\"Notes\");\n\n        // Clicking on the closeNotebookButton should dismiss the notebook and bring user back to original step\n        closeNotebookButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n    });\n\n    it('should open and close the notebook report view', () => {\n        // Click on the report icon to open the notebook report view\n        reportButton.click();\n        // the url should change to /notebook\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/notebook/');\n        // check that UI elements are displayed\n        let closeNotebookButton = element(by.xpath('//md-toolbar/div/button[@aria-label=\"Close Notebook\"]'));\n        expect(closeNotebookButton.isPresent()).toBeTruthy();\n        let notebookTitle = $(\".toolbar-title\");\n        expect(notebookTitle.getText()).toBe(\"Report\");\n\n        // Clicking on the closeNotebookButton should dismiss the notebook and bring user back to original step\n        closeNotebookButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n    });\n\n    it('should open and close the add note view', () => {\n        // Click on the add note icon to open the add note dialog\n        addNoteButton.click();\n        // the url should stay the same\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n        // check that UI elements are displayed\n        expect(addNoteDialog.isPresent()).toBeTruthy();\n        expect(addNoteDialog.isDisplayed()).toBeTruthy();\n        let noteTextarea = element(by.xpath('//textarea[@placeholder=\"Note text...\"]'));\n        expect(noteTextarea.isPresent()).toBeTruthy();\n\n        let saveNoteDialogButton = element(by.xpath('//md-dialog-actions/button[@aria-label=\"Save\"]'));\n        expect(saveNoteDialogButton.isPresent()).toBeTruthy();\n        expect(saveNoteDialogButton.getAttribute(\"disabled\")).toBe(\"true\");  // the save button should be disabled because user hasn't typed anything.\n\n        let closeNoteDialogButton = element(by.xpath('//md-dialog-actions/button[@aria-label=\"Cancel\"]'));\n        expect(closeNoteDialogButton.isPresent()).toBeTruthy();\n\n        // Clicking on the closeNoteDialogButton should dismiss the add note dialog and bring user back to original step\n        closeNoteDialogButton.click();\n        expect(addNoteDialog.isPresent()).toBeFalsy();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n    });\n\n    it('should add text note', () => {\n        // Click on the add note icon to open the add note dialog\n        addNoteButton.click();\n        // the url should stay the same\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n        // check that UI elements are displayed\n        expect(addNoteDialog.isPresent()).toBeTruthy();\n        expect(addNoteDialog.isDisplayed()).toBeTruthy();\n        let noteTextarea = element(by.xpath('//textarea[@placeholder=\"Note text...\"]'));\n        expect(noteTextarea.isPresent()).toBeTruthy();\n\n        let saveNoteDialogButton = element(by.xpath('//md-dialog-actions/button[@aria-label=\"Save\"]'));\n        expect(saveNoteDialogButton.isPresent()).toBeTruthy();\n        expect(saveNoteDialogButton.getAttribute(\"disabled\")).toBe(\"true\");  // the save button should be disabled because user hasn't typed anything.\n\n        noteTextarea.sendKeys('This is my text note!');\n        saveNoteDialogButton.click();\n\n        expect(addNoteDialog.isPresent()).toBeFalsy();  // clicking on the save button shoud hide the note.\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n\n        // Click on the notebook icon to open the notebook notes view\n        notebookButton.click();\n        // the url should change to /notebook\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/notebook/');\n\n        // Check to see that the new note shows up in the notes view\n        let newNoteItemDiv = element(by.xpath('//notebook-item/ng-include/md-card/md-card-content'));\n        expect(newNoteItemDiv.isPresent()).toBeTruthy();\n        expect(newNoteItemDiv.getText()).toBe('This is my text note!');\n        let deleteNotebookItemButton = element(by.xpath('//md-card-actions/button[@aria-label=\"Delete notebook item\"]'));\n        expect(deleteNotebookItemButton.isPresent()).toBeTruthy();\n        var notebookItemContentLocation = element(by.cssContainingText('.notebook-item__content__location','1.1'));\n        expect(notebookItemContentLocation.isPresent()).toBeTruthy();\n    });\n});"]}