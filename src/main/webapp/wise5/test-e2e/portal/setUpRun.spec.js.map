{"version":3,"sources":["setUpRun.spec.es6"],"names":["hasClass","element","cls","getAttribute","then","classes","split","indexOf","describe","it","isAngularSite","browser","get","expect","getTitle","toEqual","$","sendKeys","click","getCurrentUrl","projectLibraryLink","isPresent","toBeTruthy","keywordFilterInput","protractor","Key","ENTER","ownedSearch","setUpRunLink","nextButton","submitFormButton","newRunId","newRunCode","runCode","getText","value","runId","myClassroomRunLink","by","cssContainingText","signOutButton"],"mappings":"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","file":"setUpRun.spec.js","sourcesContent":["function hasClass(element, cls) {\n    return element.getAttribute('class').then((classes) => {\n        return classes.split(' ').indexOf(cls) !== -1;\n    });\n};\n\n// TODO: this test should not depend on project created in authoringTool.spec.es6\n// E2E test for Setting up a run.\n// The project we created in authoringTool.spec.es6\n// should now be available in the Project Library.\ndescribe('WISE Setting Up a Run', () => {\n\n    it('should require teacher user to log in to view the project library', () => {\n        isAngularSite(false);\n        browser.get('http://localhost:8080/wise/login');\n\n        expect(browser.getTitle()).toEqual('Sign In');\n    });\n\n    it('should log in using preview username and password and open the project library', () => {\n        isAngularSite(false);\n        $('#username').sendKeys('preview');\n        $('#password').sendKeys('wise');\n        $('#signInButton').click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/teacher');\n        expect(browser.getTitle()).toEqual('WISE Teacher Dashboard');\n\n        // click on the project library link\n        let projectLibraryLink = $('#projectLibraryLink');\n        expect(projectLibraryLink.isPresent()).toBeTruthy();\n        projectLibraryLink.click();\n\n        // check that the user is now on the Project Library page and has projects\n        expect(browser.getTitle()).toEqual('Project Library');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/teacher/management/library.html');\n\n        // search for the newly created project\n        let keywordFilterInput = $(\"#activeProjects input[type=text]\");\n        expect(keywordFilterInput.isPresent()).toBeTruthy();\n        keywordFilterInput.sendKeys(\"My Awesome Science Project\");\n        keywordFilterInput.sendKeys(protractor.Key.ENTER);\n\n        // filter by owned project\n        let ownedSearch = $(\"#activeProjects #owned_search_0 a\");\n        expect(ownedSearch.isPresent()).toBeTruthy();\n        ownedSearch.click();\n\n        // get the first project in the filter result, which is the WISE5 project we created earlier.\n        let setUpRunLink = $(\".setupRun\");\n        setUpRunLink.click();\n    });\n\n    it('should display the set up run wizard page 1', () => {\n        // check that the user is now on the set up run wizard page 1\n        expect(browser.getTitle()).toEqual('Setting Up a Project Run - Step 1');\n        let nextButton = $('#nextButt');\n        expect(nextButton.isPresent()).toBeTruthy();\n        nextButton.click();\n    });\n\n    it('should display the set up run wizard page 2', () => {\n        // check that the user is now on the set up run wizard page 2\n        expect(browser.getTitle()).toEqual('Setting Up a Project Run - Step 2');\n        let nextButton = $('#nextButt');\n        expect(nextButton.isPresent()).toBeTruthy();\n        nextButton.click();\n    });\n\n    it('should display the set up run wizard page 3', () => {\n        // check that the user is now on the set up run wizard page 3\n        expect(browser.getTitle()).toEqual('Setting Up a Project Run - Step 3');\n\n        // choose period 1\n        $('#PERIOD_1').click();\n\n        let nextButton = $('#nextButt');\n        expect(nextButton.isPresent()).toBeTruthy();\n        nextButton.click();\n    });\n\n    it('should display the set up run wizard page 4', () => {\n        // check that the user is now on the set up run wizard page 4\n        expect(browser.getTitle()).toEqual('Setting Up a Project Run - Step 4');\n        let nextButton = $('#nextButt');\n        expect(nextButton.isPresent()).toBeTruthy();\n        nextButton.click();\n    });\n\n    it('should display the set up run wizard page 5', () => {\n        // check that the user is now on the set up run wizard page 5\n        expect(browser.getTitle()).toEqual('Setting Up a Project Run - Step 5');\n        let submitFormButton = $('#submit_form');\n        expect(submitFormButton.isPresent()).toBeTruthy();\n        submitFormButton.click();\n    });\n\n    let newRunId;\n    let newRunCode;\n\n    it('should display the classroom run created confirmation page', () => {\n        // check that the user is now on the classroom run created confirmation page\n        expect(browser.getTitle()).toEqual('Classroom Run Created!');\n        let runCode = $('#runCode').getText();\n        runCode.then((value) => {\n            newRunCode = value;\n        });\n        let runId = $('#runId').getText();\n        runId.then((value) => {\n            newRunId = value;\n        });\n        let myClassroomRunLink = $('#myClassroomRunLink');\n        expect(myClassroomRunLink.isPresent()).toBeTruthy();\n        myClassroomRunLink.click();\n    });\n\n    it('should display the my classroom runs page', () => {\n        // check that the user is now on the my classroom runs page and the new run is listed.\n        expect(browser.getTitle()).toEqual('My Classroom Runs');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/teacher/management/classroomruns.html');\n        expect(element(by.cssContainingText('.runRow .accesscode', newRunCode)).isPresent()).toBeTruthy();\n    });\n\n    it('should sign out', () => {\n        isAngularSite(false);\n        let signOutButton = $(\"#signOut\");\n        expect(signOutButton.isPresent()).toBeTruthy();\n        signOutButton.click();\n        expect(browser.getTitle()).toEqual('Web-based Inquiry Science Environment (WISE)');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/');\n    });\n});\n"]}