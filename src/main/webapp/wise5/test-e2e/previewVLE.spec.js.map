{"version":3,"sources":["previewVLE.spec.es6"],"names":["describe","hasClass","element","cls","getAttribute","then","classes","split","indexOf","browser","get","previousButton","by","xpath","nextButton","closeButton","accountButton","accountMenu","all","css","it","nodeDropDownMenu","model","wait","isPresent","expect","getTitle","toEqual","getText","toBe","nodeContent","cssContainingText","toBeTruthy","click","getCurrentUrl","stepSelectMenu","$","repeater","stepSelectOptions","waitForAngular","groupNavItems","activity1","activity2","activity3","className","stepNavItems","toBeFalsy","tagName","workgroupNames","exitButton","logOutButton","actions","sendKeys","protractor","Key","ESCAPE","perform"],"mappings":"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","file":"previewVLE.spec.js","sourcesContent":["// E2E test for VLE running preview mode\ndescribe('WISE5 Student VLE Preview', () => {\n\n    var hasClass = (element, cls) => {\n        return element.getAttribute('class').then((classes) => {\n            return classes.split(' ').indexOf(cls) !== -1;\n        });\n    };\n\n    browser.get('http://localhost:8080/wise/project/demo#/vle/node1');\n    var previousButton = element(by.xpath('//button[@aria-label=\"Previous Item\"]'));\n    var nextButton = element(by.xpath('//button[@aria-label=\"Next Item\"]'));\n    var closeButton = element(by.xpath('//button[@aria-label=\"Go to project plan\"]'));\n    var accountButton = element(by.xpath('//button[@aria-label=\"Open user menu\"]'));\n    var accountMenu = element.all(by.css('._md-open-menu-container')).get(1);\n\n    it('should load the vle and go to node 1', () => {\n        let nodeDropDownMenu = element(by.model(\"stepToolsCtrl.toNodeId\"));\n        browser.wait((nodeDropDownMenu).isPresent(), 5000);  // give it at most 5 seconds to load.\n        expect(browser.getTitle()).toEqual('WISE');\n        expect(nodeDropDownMenu.getText()).toBe('1.1: Introduction to Newton Scooters');\n    });\n\n    it('should have UI elements on the page', () => {\n        // Check that previous, next, close, and account buttons are on the page and have the right md-icons\n        expect(previousButton.getText()).toBe('arrow_back');\n        expect(nextButton.getText()).toBe('arrow_forward');\n        expect(closeButton.getText()).toBe('home');\n        expect(accountButton.getText()).toBe('account_circle');\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Account menu should be hidden\n    });\n\n    it('should show step content on the page', () => {\n        // Check that the html content is displayed on the page\n        var nodeContent = element(by.cssContainingText('.node-content','Why Study Newton Scooters?'));\n        expect(nodeContent.isPresent()).toBeTruthy();\n    });\n\n    it('should navigate next and previous steps using the buttons', () => {\n\n        // Click on the next button and expect to go to the next step\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node2');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.2: Initial Ideas');\n\n        var nodeContent = element(by.cssContainingText('.node-content','Watch a video of a rubber band car!'));\n        expect(nodeContent.isPresent()).toBeTruthy();\n\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node3');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('2.1: Newton Scooter Concepts');\n\n        nodeContent = element(by.cssContainingText('.node-content','When you test your scooter'));\n        expect(nodeContent.isPresent()).toBeTruthy();\n\n        // Click on the previous button and expect to go back to the previous step\n        previousButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node2');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.2: Initial Ideas');\n    });\n\n    it('should allow user to jump to a step using the navigation drop-down menu', () => {\n        let stepSelectMenu = $(\"#stepSelectMenu\");\n        stepSelectMenu.click();\n        element.all(by.repeater(\"item in stepToolsCtrl.idToOrder | toArray | orderBy : 'order'\")).then((stepSelectOptions) => {\n            expect(stepSelectOptions[1].element(by.css('.node-select__text')).getText()).toBe(\"1.1: Introduction to Newton Scooters\");\n            expect(stepSelectOptions[7].element(by.css('.node-select__text')).getText()).toBe(\"2.4: What is potential energy?\");\n            stepSelectOptions[7].element(by.css('.node-select__text')).click();  // Click on step 2.4 in the step select menu\n            expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node6');\n        });\n    });\n\n    it('should display the group view and allow user to collapse/expand group navitems', () => {\n        // Click on the close button and expect to go to the group view\n        closeButton.click();\n        browser.waitForAngular();   // wait for Angular to load\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/group2');\n\n        element.all(by.repeater('id in navCtrl.rootNode.ids')).then((groupNavItems) => {\n            var activity1 = groupNavItems[0];\n            var activity2 = groupNavItems[1];\n            var activity3 = groupNavItems[2];\n\n            expect(activity1.element(by.className('md-title')).getText()).toEqual('1: Introduction to Newton Scooters');\n            expect(activity2.element(by.className('md-title')).getText()).toEqual('2: Powering Your Newton Scooter');\n            expect(activity3.element(by.className('md-title')).getText()).toEqual('3: Planning Your Newton Scooter');\n\n            // Click on activity 1 to expand it\n            expect(hasClass(activity1, 'expanded')).toBe(false);\n            activity1.element(by.className('nav-item--card__content')).click();\n            expect(hasClass(activity1, 'expanded')).toBe(true);\n            expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/group1');\n\n            // Check for completion icons for steps in Activity 1\n            activity1.all(by.repeater('childId in navitemCtrl.item.ids')).then((stepNavItems) => {\n\n                // step 1.1 should be completed because it's an HTML step and we visited it\n                expect(stepNavItems[0].getText()).toBe('chrome_reader_mode\\n1.1: Introduction to Newton Scooters check_circle');\n                expect(stepNavItems[0].element(by.cssContainingText('.material-icons', 'check_circle')).isPresent()).toBeTruthy();\n\n                // step 1.2 should not be completed yet\n                expect(stepNavItems[1].getText()).toBe('assignment\\n1.2: Initial Ideas');\n                expect(stepNavItems[1].element(by.cssContainingText('.material-icons', 'check_circle')).isPresent()).toBeFalsy();\n            });\n\n            // Activity 2 should be expanded because we came to the group view from step 2.4\n            expect(hasClass(activity2, 'expanded')).toBe(true);\n\n            // Check that steps in activity 2 displays the step title and icon\n            activity2.all(by.repeater('childId in navitemCtrl.item.ids')).then((stepNavItems) => {\n                // step 2.1 should be completed because it's an HTML step and we visited it\n                expect(stepNavItems[0].getText()).toBe('chrome_reader_mode\\n2.1: Newton Scooter Concepts check_circle');\n                expect(stepNavItems[0].element(by.cssContainingText('.material-icons', 'check_circle')).isPresent()).toBeTruthy();\n\n                // step 2.4 node6 (the previous step we were on) should be highlighted because we came from it\n                expect(stepNavItems[3].getText()).toBe('assignment\\n2.4: What is potential energy?');\n                expect(hasClass(stepNavItems[3], 'prev')).toBe(true);  // should have 'prev' class\n\n                expect(stepNavItems[2].getText()).toBe('gamepad\\n2.3: Explore the concepts');\n                stepNavItems[2].element(by.tagName('button')).click();   // Go to step 2.3.\n                expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node5');\n            });\n        });\n    });\n\n    it('should allow user to jump to a step by changing the URL path', () => {\n        browser.get('http://localhost:8080/wise/project/demo#/vle/node24');  // User changes the URL\n        let nodeDropDownMenu = element(by.model(\"stepToolsCtrl.toNodeId\"));\n        browser.wait((nodeDropDownMenu).isPresent(), 5000);  // give it at most 5 seconds to load.\n        expect(browser.getTitle()).toEqual('WISE');\n        expect(nodeDropDownMenu.getText()).toBe('3.4: Feature Selection');\n\n        // Click on the next button and expect to go to the next step\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node25');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('4.1: Sketch Your Design');\n\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node26');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('4.2: Scooter Materials List');\n\n        // Click on the previous button and expect to go back to the previous step\n        previousButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node25');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('4.1: Sketch Your Design');\n    });\n\n    it('should allow preview user to view the account menu', () => {\n        accountButton.click();   // Open the Account Menu by clicking on the account button\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"false\");  // Account Menu should be displayed\n\n        // The account menu should have the preview user account icon and the exit and sign out buttons\n        element.all(by.repeater('userName in themeCtrl.workgroupUserNames')).then((workgroupNames) => {\n            expect(workgroupNames[0].getText()).toBe('Preview Team');\n        });\n\n        let exitButton = element(by.xpath('//button[@aria-label=\"Exit\"]'));\n        expect(exitButton.isPresent()).toBeTruthy();\n        expect(exitButton.getText()).toEqual(\"EXIT\");\n        let logOutButton = element(by.xpath('//button[@aria-label=\"Sign Out\"]'));\n        expect(logOutButton.isPresent()).toBeTruthy();\n        expect(logOutButton.getText()).toEqual(\"SIGN OUT\");\n\n        // Hitting the escape key should dismiss the account menu\n        browser.actions().sendKeys(protractor.Key.ESCAPE).perform();\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Account Menu should be hidden\n\n        accountButton.click();  // Open the Account Menu by clicking on the account button\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"false\");  // Account Menu should be displayed\n\n        // Clicking outside of the Account Menu should dismiss the Account Menu\n        element(by.xpath('//body')).click();\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Account Menu should be hidden\n    });\n});"]}