{"version":3,"sources":["previewVLE.spec.es6"],"names":["describe","hasClass","element","cls","getAttribute","then","classes","split","indexOf","browser","get","previousButton","by","xpath","nextButton","closeButton","accountButton","accountMenu","cssContainingText","notificationButton","notificationMenu","it","nodeDropDownMenu","model","wait","isPresent","expect","getTitle","toEqual","getText","toBe","nodeContent","toBeTruthy","click","getCurrentUrl","stepSelectMenu","$","all","repeater","stepSelectOptions","css","waitForAngular","groupNavItems","activity1","activity2","className","stepNavItems","toBeFalsy","tagName","workgroupNames","exitButton","logOutButton","actions","sendKeys","protractor","Key","ESCAPE","perform","notificationDialogTitle","isDisplayed","notificationDialogContent"],"mappings":"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","file":"previewVLE.spec.js","sourcesContent":["// E2E test for VLE running preview mode\ndescribe('WISE5 Student VLE Preview', () => {\n\n    var hasClass = (element, cls) => {\n        return element.getAttribute('class').then((classes) => {\n            return classes.split(' ').indexOf(cls) !== -1;\n        });\n    };\n\n    browser.get('http://localhost:8080/wise/project/demo#/vle/node1');\n    var previousButton = element(by.xpath('//button[@aria-label=\"Previous Item\"]'));\n    var nextButton = element(by.xpath('//button[@aria-label=\"Next Item\"]'));\n    var closeButton = element(by.xpath('//button[@aria-label=\"Project Plan\"]'));\n    var accountButton = element(by.xpath('//button[@aria-label=\"Open account menu\"]'));\n    var accountMenu = element(by.cssContainingText('.md-open-menu-container','Preview Team'));\n    var notificationButton = element(by.xpath('//button[@aria-label=\"View notifications\"]'));\n    var notificationMenu = element(by.cssContainingText('.md-open-menu-container','Alerts'));\n\n    it('should load the vle and go to node 1', () => {\n        let nodeDropDownMenu = element(by.model(\"stepToolsCtrl.toNodeId\"));\n        browser.wait((nodeDropDownMenu).isPresent(), 5000);  // give it at most 5 seconds to load.\n        expect(browser.getTitle()).toEqual('WISE');\n        expect(nodeDropDownMenu.getText()).toBe('1.1: HTML Step');\n    });\n\n    it('should have UI elements on the page', () => {\n        // Check that previous, next, close, and account buttons are on the page and have the right md-icons\n        expect(previousButton.getText()).toBe('arrow_back');\n        expect(nextButton.getText()).toBe('arrow_forward');\n        expect(nextButton.getText()).toBe('arrow_forward');\n        expect(closeButton.getText()).toBe('view_list');\n        expect(accountButton.getText()).toBe('account_circle');\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Account menu should be hidden\n    });\n\n    it('should show step content on the page', () => {\n        // Check that the html content is displayed on the page\n        var nodeContent = element(by.cssContainingText('.node-content','This is a step where authors can enter their own html.'));\n        expect(nodeContent.isPresent()).toBeTruthy();\n        expect(previousButton.getAttribute(\"disabled\")).toBe(\"true\");  // the previous button should be disabled on the first step.\n    });\n\n    it('should navigate next and previous steps using the buttons', () => {\n\n        // Click on the next button and expect to go to the next step\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node2');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.2: Open Response Step');\n        expect(previousButton.getAttribute(\"disabled\")).toBe(null);  // the previous button should be enabled on the second step.\n\n\n        var nodeContent = element(by.cssContainingText('.node-content','This is a step where students enter text.'));\n        expect(nodeContent.isPresent()).toBeTruthy();\n\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node3');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.3: Open Response Step Auto Graded');\n\n        nodeContent = element(by.cssContainingText('.node-content','Explain how the sun helps animals survive.'));\n        expect(nodeContent.isPresent()).toBeTruthy();\n\n        // Click on the previous button and expect to go back to the previous step\n        previousButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node2');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.2: Open Response Step');\n    });\n\n    it('should allow user to jump to a step using the navigation drop-down menu', () => {\n        let stepSelectMenu = $(\"#stepSelectMenu\");\n        stepSelectMenu.click();\n        element.all(by.repeater(\"item in stepToolsCtrl.idToOrder | toArray | orderBy : 'order'\")).then((stepSelectOptions) => {\n            expect(stepSelectOptions[1].element(by.css('.node-select__text')).getText()).toBe(\"1.1: HTML Step\");\n            expect(stepSelectOptions[7].element(by.css('.node-select__text')).getText()).toBe(\"1.7: Challenge Question Step\");\n            stepSelectOptions[7].element(by.css('.node-select__text')).click();  // Click on step 1.7 in the step select menu\n            expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node7');\n        });\n    });\n\n    it('should display the group view and allow user to collapse/expand group navitems', () => {\n        // Click on the close button and expect to go to the group view\n        closeButton.click();\n        browser.waitForAngular();   // wait for Angular to load\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/group1');\n\n        element.all(by.repeater('id in navCtrl.rootNode.ids')).then((groupNavItems) => {\n            var activity1 = groupNavItems[0];\n            var activity2 = groupNavItems[1];\n\n            expect(activity1.element(by.className('md-title')).getText()).toEqual('1: Example Steps');\n            expect(activity2.element(by.className('md-title')).getText()).toEqual('2: Example Features');\n\n            // Activity 1 should be expanded, Activity 2 should be collapsed\n            expect(hasClass(activity1, 'expanded')).toBe(true);\n            expect(hasClass(activity2, 'expanded')).toBe(false);\n            expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/group1');\n\n            // Check for completion icons for steps in Activity 1\n            activity1.all(by.repeater('childId in navitemCtrl.item.ids')).then((stepNavItems) => {\n\n                // step 1.1 should be completed because it's an HTML step and we visited it\n                expect(stepNavItems[0].getText()).toBe('school\\n1.1: HTML Step check_circle');\n                expect(stepNavItems[0].element(by.cssContainingText('.material-icons', 'check_circle')).isPresent()).toBeTruthy();\n\n                // step 1.2 should not be completed yet\n                expect(stepNavItems[1].getText()).toBe('school\\n1.2: Open Response Step');\n                expect(stepNavItems[1].element(by.cssContainingText('.material-icons', 'check_circle')).isPresent()).toBeFalsy();\n\n                // step 1.7 node7 (the previous step we were on) should be highlighted because we came from it\n                expect(stepNavItems[6].getText()).toBe('school\\n1.7: Challenge Question Step');\n                expect(hasClass(stepNavItems[6], 'prev')).toBe(true);  // should have 'prev' class\n                expect(stepNavItems[6].element(by.cssContainingText('.material-icons', 'check_circle')).isPresent()).toBeFalsy();\n            });\n\n            // Activity 2 should not be expanded yet, so expand it\n            activity2.element(by.className('nav-item--card__content')).click();\n            expect(hasClass(activity2, 'expanded')).toBe(true);\n            expect(hasClass(activity1, 'expanded')).toBe(true);  // activity 1 should also be expanded still\n\n            // Check that steps in activity 2 displays the step title and icon\n            activity2.all(by.repeater('childId in navitemCtrl.item.ids')).then((stepNavItems) => {\n\n                expect(stepNavItems[0].getText()).toBe('school\\n2.1: Show Previous Work 1');\n\n                expect(stepNavItems[1].getText()).toBe('school\\n2.2: Show Previous Work 2');\n                expect(stepNavItems[2].getText()).toBe('school\\n2.3: Import Work 1');\n                stepNavItems[2].element(by.tagName('button')).click();   // Go to step 2.3.\n                expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node22');\n            });\n        });\n    });\n\n    it('should allow user to jump to a step by changing the URL path', () => {\n        browser.get('http://localhost:8080/wise/project/demo#/vle/node11');  // User changes the URL\n        let nodeDropDownMenu = element(by.model(\"stepToolsCtrl.toNodeId\"));\n        browser.wait((nodeDropDownMenu).isPresent(), 5000);  // give it at most 5 seconds to load.\n        expect(browser.getTitle()).toEqual('WISE');\n        expect(nodeDropDownMenu.getText()).toBe('1.11: Draw Step');\n\n        // Click on the next button and expect to go to the next step\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node12');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.12: Draw Step Auto Graded');\n\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node13');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.13: Brainstorm Step');\n\n        // Click on the previous button and expect to go back to the previous step\n        previousButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node12');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.12: Draw Step Auto Graded');\n    });\n\n    it('should allow preview user to view the account menu', () => {\n        accountButton.click();   // Open the Account Menu by clicking on the account button\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"false\");  // Account Menu should be displayed\n\n        // The account menu should have the preview user account icon and the exit and sign out buttons\n        element.all(by.repeater('userName in themeCtrl.workgroupUserNames')).then((workgroupNames) => {\n            expect(workgroupNames[0].getText()).toBe('Preview Team');\n        });\n\n        let exitButton = element(by.xpath('//button[@aria-label=\"Go Home\"]'));\n        expect(exitButton.isPresent()).toBeTruthy();\n        expect(exitButton.getText()).toEqual(\"GO HOME\");\n        let logOutButton = element(by.xpath('//button[@aria-label=\"Sign Out\"]'));\n        expect(logOutButton.isPresent()).toBeTruthy();\n        expect(logOutButton.getText()).toEqual(\"SIGN OUT\");\n\n        // Hitting the escape key should dismiss the account menu\n        browser.actions().sendKeys(protractor.Key.ESCAPE).perform();\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Account Menu should be hidden\n\n        accountButton.click();  // Open the Account Menu by clicking on the account button\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"false\");  // Account Menu should be displayed\n\n        // Clicking outside of the Account Menu should dismiss the Account Menu\n        element(by.xpath('//body')).click();\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Account Menu should be hidden\n    });\n\n    it('should allow preview user to view the notification menu', () => {\n        notificationButton.click();   // Open the Notification Menu by clicking on the notification button\n        expect(notificationMenu.getAttribute('aria-hidden')).toEqual(\"false\");  // Notification Menu should be displayed\n\n        // The notification menu should have the Alerts title and say that there are no alerts.\n        let notificationDialogTitle = element(by.xpath('//md-toolbar/span/span[@translate=\"notificationsTitle\"]'));\n        expect(notificationDialogTitle.isDisplayed()).toBeTruthy();\n        expect(notificationDialogTitle.getText()).toEqual(\"Alerts\");\n\n        let notificationDialogContent = element(by.xpath('//md-content/div/span[@translate=\"noAlerts\"]'));\n        expect(notificationDialogContent.isDisplayed()).toBeTruthy();\n        expect(notificationDialogContent.getText()).toEqual(\"Hi there! You currently have no alerts.\");\n\n        // Hitting the escape key should dismiss the notification menu\n        browser.actions().sendKeys(protractor.Key.ESCAPE).perform();\n        expect(notificationMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Notification Menu should be hidden\n\n        notificationButton.click();  // Open the Notification Menu by clicking on the notification button\n        expect(notificationMenu.getAttribute('aria-hidden')).toEqual(\"false\");  // Notification Menu should be displayed\n\n        // Clicking outside of the Notification Menu should dismiss the Notification Menu\n        element(by.xpath('//body')).click();\n        expect(notificationMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Notification Menu should be hidden\n    });\n});\n"]}