{"version":3,"sources":["previewVLE.spec.es6"],"names":[],"mappings":"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","file":"previewVLE.spec.js","sourcesContent":["// E2E test for VLE running preview mode\ndescribe('WISE5 Student VLE Preview', () => {\n\n    var hasClass = (element, cls) => {\n        return element.getAttribute('class').then((classes) => {\n            return classes.split(' ').indexOf(cls) !== -1;\n        });\n    };\n\n    browser.get('http://localhost:8080/wise/project/demo');\n    var previousButton = element(by.xpath('//button[@aria-label=\"Previous Item\"]'));\n    var nextButton = element(by.xpath('//button[@aria-label=\"Next Item\"]'));\n    var closeButton = element(by.xpath('//button[@aria-label=\"Close Step\"]'));\n    var notebookButton = element(by.xpath('//button[@id=\"notebookButton\"]'));\n    var notebookSideNav = element(by.xpath('//md-sidenav'));  // side navigation bar for the notebook\n    var accountButton = element(by.xpath('//button[@id=\"accountButton\"]'));\n    var accountMenu = element(by.css('.md-open-menu-container'));\n\n    it('should load the vle and go to node 1', () => {\n        expect(browser.getTitle()).toEqual('WISE');\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node1');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.1: Introduction to Newton Scooters');\n    });\n\n    it('should have UI elements on the page', () => {\n        // Check that previous, next, close, notebook, and account buttons are on the page and have the right md-icons\n        expect(previousButton.getText()).toBe('arrow_back');\n        expect(nextButton.getText()).toBe('arrow_forward');\n        expect(closeButton.getText()).toBe('close');\n        expect(notebookButton.getText()).toBe('book');\n        expect(accountButton.getText()).toBe('account_circle');\n        expect(hasClass(notebookSideNav, 'md-closed')).toBe(true);        // Notebook side nav should be hidden\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Account menu should be hidden\n    });\n\n    it('should navigate next and previous steps using the buttons', () => {\n\n        // Click on the next button and expect to go to the next step\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node2');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.2: Initial Ideas');\n\n        nextButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node3');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('2.1: Newton Scooter Concepts');\n\n        // Click on the previous button and expect to go back to the previous step\n        previousButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node2');\n        expect(element(by.model(\"stepToolsCtrl.toNodeId\")).getText()).toBe('1.2: Initial Ideas');\n    });\n\n    it('should display the group view and allow user to collapse/expand views', () => {\n        // Click on the close button and expect to go to the group view\n        closeButton.click();\n        expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/group1');\n\n        // Clicking on Activity 1 should collapse the group1 view and\n        // Clicking on Activity 2 should expand the group 2 view and display the steps inside\n        element.all(by.repeater('id in navCtrl.rootNode.ids')).then((groupNavItems) => {\n            var activity1 = groupNavItems[0];\n            var activity2 = groupNavItems[1];\n            var titleElementGroup1 = activity1.element(by.className('md-title'));\n            expect(titleElementGroup1.getText()).toEqual('1: Introduction to Newton Scooters');\n\n            var titleElementGroup2 = activity2.element(by.className('md-title'));\n            expect(titleElementGroup2.getText()).toEqual('2: Powering Your Newton Scooter');\n\n            expect(hasClass(activity1, 'expanded')).toBe(true);\n            activity1.element(by.className('nav-item--card__content')).click();\n            expect(hasClass(activity1, 'expanded')).toBe(false);\n\n            expect(hasClass(activity2, 'expanded')).toBe(false);\n            activity2.element(by.className('nav-item--card__content')).click();\n            expect(hasClass(activity2, 'expanded')).toBe(true);\n            expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/group2');\n\n            // Check that step 2.3 has title \"Explore the concepts\" and has the gamepad icon\n            activity2.all(by.repeater('childId in navitemCtrl.item.ids')).then((stepNavItems) => {\n                expect(stepNavItems[2].element(by.css('.md-button')).getText()).toBe('gamepad\\n2.3: Explore the concepts');\n                stepNavItems[2].element(by.tagName('button')).click();\n                expect(browser.getCurrentUrl()).toEqual('http://localhost:8080/wise/project/demo#/vle/node5');\n            });\n        });\n    });\n\n    it('should allow preview user to view the account menu', () => {\n        accountButton.click();   // Open the Account Menu by clicking on the account button\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"false\");  // Account Menu should be displayed\n\n        // The account menu should have the exit and sign out buttons\n        var exitButton = element(by.xpath('//button[@id=\"exitButton\"]'));\n        expect(exitButton.getText()).toEqual(\"EXIT\");\n        var logOutButton = element(by.xpath('//button[@id=\"logOutButton\"]'));\n        expect(logOutButton.getText()).toEqual(\"SIGN OUT\");\n\n        // Hitting the escape key should dismiss the account menu\n        browser.actions().sendKeys(protractor.Key.ESCAPE).perform();\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Account Menu should be hidden\n\n        accountButton.click();  // Open the Account Menu by clicking on the account button\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"false\");  // Account Menu should be displayed\n\n        // Clicking outside of the Account Menu should dismiss the Account Menu\n        element(by.xpath('//body')).click();\n        expect(accountMenu.getAttribute('aria-hidden')).toEqual(\"true\");  // Account Menu should be hidden\n    });\n});"]}