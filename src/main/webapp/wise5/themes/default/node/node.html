<div class="l-constrained">
    <md-content class="node-content md-whiteframe-1dp" style="border-color: {{nodeController.nodeStatus.icon.color}}" layout="row" layout-wrap>
        <div ng-if="nodeController.rubric" style="margin: 20">
            <md-card class="annotations annotations--node-info">
                <md-card-title class="annotations__header gray-darker-bg">
                    <div class="annotations__avatar md-avatar avatar--icon md-36 avatar md-whiteframe-1dp">
                        <md-icon class="annotations__icon md-36">info</md-icon>
                    </div>
                    <div class="annotations__title" layout="row" flex>
                        <span>{{ 'TEACHER_RUBRIC' | translate }}</span>
                    </div>
                </md-card-title>
                <md-card-content class="annotations__body md-body-1">
                    <div ng-bind-html="nodeController.rubric"></div>
                </md-card-content>
            </md-card>
        </div>
        <div id="{{component.id}}" class="component-section"
             ng-repeat='component in nodeController.getComponents()'
             flex="100" flex-gt-sm="{{component.componentWidth ? component.componentWidth : 100}}">
            <component ng-if='component.showPreviousWorkNodeId != null && component.showPreviousWorkComponentId != null && component.showPreviousWorkNodeId != "" && component.showPreviousWorkComponentId != ""'
                       node-id='{{component.showPreviousWorkNodeId}}'
                       component-id='{{component.showPreviousWorkComponentId}}'
                       component-state='{{nodeController.getComponentStateByNodeIdAndComponentId(component.showPreviousWorkNodeId, component.showPreviousWorkComponentId)}}'
                       workgroup-id='{{nodeController.workgroupId}}'
                       teacher-workgroup-id='{{nodeController.teacherWorkgroupId}}'
                       original-node-id={{nodeController.nodeId}}
                       original-component-id={{component.id}}
                       mode='showPreviousWork'></component>
            <component ng-if='component.showPreviousWorkNodeId == null || component.showPreviousWorkComponentId == null || component.showPreviousWorkNodeId == "" || component.showPreviousWorkComponentId == ""'
                       node-id='{{nodeController.nodeId}}'
                       component-id='{{component.id}}'
                       component-state='{{nodeController.getComponentStateByComponentId(component.id)}}'
                       workgroup-id='{{nodeController.workgroupId}}'
                       teacher-workgroup-id='{{nodeController.teacherWorkgroupId}}'
                       mode='student'></component>
            <div ng-if="component.rubric" style="margin: 20">
                <md-card class="annotations annotations--node-info">
                    <md-card-title class="annotations__header gray-darker-bg">
                        <div class="annotations__avatar md-avatar avatar--icon md-36 avatar md-whiteframe-1dp">
                            <md-icon class="annotations__icon md-36">info</md-icon>
                        </div>
                        <div class="annotations__title" layout="row" flex>
                            <span>{{ 'TEACHER_RUBRIC' | translate }}</span>
                        </div>
                    </md-card-title>
                    <md-card-content class="annotations__body md-body-1">
                        <div ng-bind-html="component.rubric"></div>
                    </md-card-content>
                </md-card>
            </div>
        </div>
        <div class="node-content__actions" layout="row" layout-align="start center" flex="100">
            <md-button class="md-raised md-primary"
                   ng-click='nodeController.saveButtonClicked()'
                   ng-disabled='nodeController.isDisabled || !nodeController.dirtyComponentIds.length'
                   ng-if='nodeController.showSaveButton()'
                   aria-label="Save"
                   translate="save"></md-button>
             <md-button class="md-raised md-primary"
                  ng-click='nodeController.submitButtonClicked()'
                  ng-disabled='nodeController.isDisabled || !nodeController.dirtySubmitComponentIds.length'
                  ng-if='nodeController.showSubmitButton()'
                  aria-label="Submit"
                  translate="submit"></md-button>
            <span ng-if="nodeController.showSaveButton() || nodeController.showSubmitButton()"
                  ng-show="nodeController.saveMessage.text"
                  class="node-content__actions__info md-caption">
                  {{nodeController.saveMessage.text}} <span class="node-content__actions__more"><md-tooltip md-direction="top">{{ nodeController.saveMessage.time | amDateFormat:'ddd, MMM D YYYY, h:mm a' }}</md-tooltip><span am-time-ago="nodeController.saveMessage.time"></span></span>
            </span>
        </div>
    </md-content>
</div>
