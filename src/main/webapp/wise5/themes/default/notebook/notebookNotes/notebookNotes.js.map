{"version":3,"sources":["notebookNotes.es6"],"names":["NotebookNotesController","$filter","$rootScope","$translate","$onChanges","changes","notebook","angular","copy","currentValue","hasNotes","Object","keys","items","length","insertMode","color","config","itemTypes","note","label","title","link","isChooseMode","$ev","$itemId","doDelete","$broadcast","itemId","ev","onInsert","value","event","editItem","alert","$event","onClose","onSetInsertMode","$inject","NotebookNotes","bindings","notesVisible","workgroupId","template","controller"],"mappings":"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","file":"notebookNotes.js","sourcesContent":["\"use strict\";\n\nclass NotebookNotesController {\n    constructor($filter,\n                $rootScope) {\n\n        this.$translate = $filter('translate');\n        this.$rootScope = $rootScope;\n\n        this.$onChanges = (changes) => {\n            if (changes.notebook) {\n                this.notebook = angular.copy(changes.notebook.currentValue);\n                this.hasNotes = Object.keys(this.notebook.items).length ? true : false;\n            }\n\n            if (changes.insertMode) {\n                if (changes.insertMode.currentValue) {\n                    this.color = '';\n                } else {\n                    this.color = this.config.itemTypes.note.label.color;\n                }\n            }\n        }\n    }\n\n    getTitle() {\n        let title = '';\n        if (this.insertMode) {\n            title = this.$translate('selectItemToInsert');\n        } else {\n            title = this.config.itemTypes.note.label.link;\n        }\n        return title;\n    }\n\n    getColor() {\n        let color = '';\n        if (!this.isChooseMode) {\n            color = this.config.itemTypes.note.label.color;\n        }\n        return color;\n    }\n\n    deleteItem($ev, $itemId, doDelete = true) {\n        this.$rootScope.$broadcast('deleteNote', {itemId: $itemId, ev: $ev});\n    }\n\n    reviveItem(ev, itemId) {\n        this.$rootScope.$broadcast('reviveNote', {itemId: $itemId, ev: $ev});\n    }\n\n    editItem($ev, $itemId) {\n        //this.NotebookService.editItem(ev, itemId);\n        this.$rootScope.$broadcast('editNote', {itemId: $itemId, ev: $ev});\n    }\n\n    select($ev, $itemId) {\n        if (this.insertMode) {\n            this.onInsert({value: $itemId, event: $ev});\n        } else {\n            this.editItem($ev, $itemId);\n        }\n    }\n\n    edit(itemId) {\n        alert(\"Edit the item: \" + itemId);\n    }\n\n    close($event) {\n        this.onClose($event);\n    }\n\n    cancelInsertMode($event) {\n        this.onSetInsertMode({value: false});\n    }\n}\n\nNotebookNotesController.$inject = [\n    '$filter',\n    '$rootScope'\n];\n\nconst NotebookNotes = {\n    bindings: {\n        config: '<',\n        insertMode: '<',\n        notebook: '<',\n        notesVisible: '<',\n        workgroupId: '<',\n        onClose: '&',\n        onInsert: '&',\n        onSetInsertMode: '&'\n    },\n    template:\n        `<md-sidenav md-component-id=\"notes\"\n                     md-is-open=\"$ctrl.notesVisible\"\n                     md-whiteframe=\"4\"\n                     md-disable-backdrop\n                     layout=\"column\"\n                     class=\"md-sidenav-right notebook-sidebar\">\n            <md-toolbar md-theme=\"light\" class=\"md-whiteframe-1dp\">\n                <div class=\"md-toolbar-tools notebook-sidebar__header\">\n                    <span style=\"color: {{$ctrl.color}}\">{{$ctrl.getTitle()}}</span>\n                    <!--<md-button ng-if=\"$ctrl.insertMode\"\n                               ng-click=\"$ctrl.cancelInsertMode($event)\"\n                               md-theme=\"default\"\n                               class=\"md-accent button--small\"\n                               aria-label=\"{{ 'Cancel' | translate }}\">\n                        {{ 'Cancel' | translate }}\n                    </md-button>-->\n                    <span flex></span>\n                    <md-button ng-click=\"$ctrl.close($event)\"\n                               class=\"md-icon-button\"\n                               aria-label=\"{{ 'Close' | translate }}\">\n                        <md-icon>close</md-icon>\n                    </md-button>\n                </div>\n            </md-toolbar>\n            <md-content>\n                <div class=\"notebook-items\" ng-class=\"{'notebook-items--insert': $ctrl.insertMode}\" layout=\"row\" layout-wrap>\n                    <div class=\"md-padding\" ng-if=\"!$ctrl.hasNotes\" translate=\"noNotes\" translate-value-term=\"{{$ctrl.config.itemTypes.note.label.plural}}\"></div>\n                    <notebook-item ng-repeat=\"(localNotebookItemId, notes) in $ctrl.notebook.items\"\n                                 ng-if=\"notes.last().type === 'note'\"\n                                 config=\"$ctrl.config\"\n                                 item-id=\"localNotebookItemId\"\n                                 is-edit-allowed=\"!$ctrl.insertMode\"\n                                 is-choose-mode=\"$ctrl.insertMode\"\n                                 workgroup-id=\"$ctrl.workgroupId\"\n                                 on-select=\"$ctrl.select($ev, $itemId)\"\n                                 on-delete=\"$ctrl.deleteItem($ev, $itemId)\"\n                                 style=\"display: flex;\"\n                                 flex=\"100\"\n                                 flex-gt-xs=\"50\">\n                    </notebook-item>\n                    <!-- TODO: show deleted items somewhere\n                        <notebook-item ng-repeat=\"(localNotebookItemId, notes) in $ctrl.notebook.deletedItems\"\n                                       ng-if=\"notes.last().type === 'note'\"\n                                       config=\"$ctrl.config\"\n                                       item-id=\"localNotebookItemId\"\n                                       is-edit-allowed=\"!$ctrl.insertMode\"\n                                       is-choose-mode=\"$ctrl.insertMode\"\n                                       workgroup-id=\"$ctrl.workgroupId\"\n                                       on-select=\"$ctrl.select($ev, $itemId)\"\n                                       on-revive=\"$ctrl.deleteItem($ev, $itemId)\"\n                                       style=\"display: flex;\"\n                                       flex=\"100\"\n                                       flex-gt-xs=\"50\">\n                        </notebook-item>\n                    -->\n                </div> <!-- TODO: add questions when supported -->\n            </md-content>\n        </md-sidenav>`,\n    controller: NotebookNotesController\n};\n\nexport default NotebookNotes;\n"]}