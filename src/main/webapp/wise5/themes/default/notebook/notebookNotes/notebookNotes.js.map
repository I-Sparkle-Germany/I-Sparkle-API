{"version":3,"sources":["notebookNotes.es6"],"names":["NotebookNotesController","$filter","$rootScope","$translate","$onChanges","changes","notebook","angular","copy","currentValue","title","insertMode","reportLabel","config","itemTypes","report","label","singular","note","link","$ev","$itemId","doDelete","$broadcast","itemId","ev","onInsert","value","event","editItem","alert","$event","onClose","$inject","NotebookNotes","bindings","notesVisible","workgroupId","template","controller"],"mappings":"AAAA;;;;;;;;;;IAEMA,uB;AACF,qCAAYC,OAAZ,EACYC,UADZ,EACwB;AAAA;;AAAA;;AAEpB,aAAKC,UAAL,GAAkBF,QAAQ,WAAR,CAAlB;AACA,aAAKC,UAAL,GAAkBA,UAAlB;;AAEA,aAAKE,UAAL,GAAkB,UAACC,OAAD,EAAa;AAC3B,gBAAGA,QAAQC,QAAX,EAAqB;AACjB,sBAAKA,QAAL,GAAgBC,QAAQC,IAAR,CAAaH,QAAQC,QAAR,CAAiBG,YAA9B,CAAhB;AACH;AACJ,SAJD;AAKH;;;;mCAEU;AACP,gBAAIC,QAAQ,EAAZ;AACA,gBAAI,KAAKC,UAAT,EAAqB;AACjBD,wBAAQ,KAAKP,UAAL,CAAgB,aAAhB,EAA+B,EAAES,aAAa,KAAKC,MAAL,CAAYC,SAAZ,CAAsBC,MAAtB,CAA6BC,KAA7B,CAAmCC,QAAlD,EAA/B,CAAR;AACH,aAFD,MAEO;AACHP,wBAAQ,KAAKG,MAAL,CAAYC,SAAZ,CAAsBI,IAAtB,CAA2BF,KAA3B,CAAiCG,IAAzC;AACH;AACD,mBAAOT,KAAP;AACH;;;mCAEUU,G,EAAKC,O,EAA0B;AAAA,gBAAjBC,QAAiB,uEAAN,IAAM;;AACtC,iBAAKpB,UAAL,CAAgBqB,UAAhB,CAA2B,YAA3B,EAAyC,EAACC,QAAQH,OAAT,EAAkBI,IAAIL,GAAtB,EAAzC;AACH;;;mCAEUK,E,EAAID,M,EAAQ;AACnB,iBAAKtB,UAAL,CAAgBqB,UAAhB,CAA2B,YAA3B,EAAyC,EAACC,QAAQH,OAAT,EAAkBI,IAAIL,GAAtB,EAAzC;AACH;;;iCAEQA,G,EAAKC,O,EAAS;AACnB;AACA,iBAAKnB,UAAL,CAAgBqB,UAAhB,CAA2B,UAA3B,EAAuC,EAACC,QAAQH,OAAT,EAAkBI,IAAIL,GAAtB,EAAvC;AACH;;;+BAEMA,G,EAAKC,O,EAAS;AACjB,gBAAI,KAAKV,UAAT,EAAqB;AACjB,qBAAKe,QAAL,CAAc,EAACC,OAAON,OAAR,EAAiBO,OAAOR,GAAxB,EAAd;AACH,aAFD,MAEO;AACH,qBAAKS,QAAL,CAAcT,GAAd,EAAmBC,OAAnB;AACH;AACJ;;;6BAEIG,M,EAAQ;AACTM,kBAAM,oBAAoBN,MAA1B;AACH;;;8BAEKO,M,EAAQ;AACV,iBAAKC,OAAL,CAAaD,MAAb;AACH;;;;;;AAGL/B,wBAAwBiC,OAAxB,GAAkC,CAC9B,SAD8B,EAE9B,YAF8B,CAAlC;;AAKA,IAAMC,gBAAgB;AAClBC,cAAU;AACNtB,gBAAQ,GADF;AAENF,oBAAY,GAFN;AAGNL,kBAAU,GAHJ;AAIN8B,sBAAc,GAJR;AAKNC,qBAAa,GALP;AAMNL,iBAAS,GANH;AAONN,kBAAU;AAPJ,KADQ;AAUlBY,yiGAVkB;AA8DlBC,gBAAYvC;AA9DM,CAAtB;;kBAiEekC,a","file":"notebookNotes.js","sourcesContent":["\"use strict\";\n\nclass NotebookNotesController {\n    constructor($filter,\n                $rootScope) {\n                    \n        this.$translate = $filter('translate');\n        this.$rootScope = $rootScope;\n        \n        this.$onChanges = (changes) => {\n            if(changes.notebook) {\n                this.notebook = angular.copy(changes.notebook.currentValue);\n            }\n        }\n    }\n    \n    getTitle() {\n        let title = '';\n        if (this.insertMode) {\n            title = this.$translate('addToReport', { reportLabel: this.config.itemTypes.report.label.singular });\n        } else {\n            title = this.config.itemTypes.note.label.link;\n        }\n        return title;\n    }\n    \n    deleteItem($ev, $itemId, doDelete = true) {\n        this.$rootScope.$broadcast('deleteNote', {itemId: $itemId, ev: $ev});\n    }\n    \n    reviveItem(ev, itemId) {\n        this.$rootScope.$broadcast('reviveNote', {itemId: $itemId, ev: $ev});\n    }\n\n    editItem($ev, $itemId) {\n        //this.NotebookService.editItem(ev, itemId);\n        this.$rootScope.$broadcast('editNote', {itemId: $itemId, ev: $ev});\n    }\n    \n    select($ev, $itemId) {\n        if (this.insertMode) {\n            this.onInsert({value: $itemId, event: $ev});\n        } else {\n            this.editItem($ev, $itemId);\n        }\n    }\n    \n    edit(itemId) {\n        alert(\"Edit the item: \" + itemId);\n    }\n\n    close($event) {\n        this.onClose($event);\n    }\n}\n\nNotebookNotesController.$inject = [\n    '$filter',\n    '$rootScope'\n];\n\nconst NotebookNotes = {\n    bindings: {\n        config: '<',\n        insertMode: '<',\n        notebook: '<',\n        notesVisible: '<',\n        workgroupId: '<',\n        onClose: '&',\n        onInsert: '&'\n    },\n    template:\n        `<md-sidenav md-component-id=\"notes\"\n                     md-is-open=\"$ctrl.notesVisible\"\n                     md-whiteframe=\"4\"\n                     md-disable-backdrop\n                     layout=\"column\"\n                     class=\"md-sidenav-right notebook-sidebar\">\n            <md-toolbar md-theme=\"light\">\n                <div class=\"md-toolbar-tools notebook-sidebar__header\">\n                    <span style=\"color: {{$ctrl.config.itemTypes.note.label.color}}\">{{$ctrl.getTitle()}}</span>\n                    <span flex></span>\n                    <md-button ng-click=\"$ctrl.close($event)\" class=\"md-icon-button\" aria-label=\"{{ 'Close' | translate }}\">\n                        <md-icon>close</md-icon>\n                    </md-button>\n                </div>\n            </md-toolbar>\n            <md-content>\n                <div ng-if=\"$ctrl.insertMode\" class=\"heavy md-padding md-caption\">\n                    {{ 'selectItemToInsert' | translate }}\n                </div>\n                <div class=\"notebook-items\" ng-class=\"{'notebook-items--insert': $ctrl.insertMode}\" layout=\"row\" layout-wrap>\n                    <notebook-item ng-repeat=\"(localNotebookItemId, notes) in $ctrl.notebook.items\"\n                                 ng-if=\"notes.last().type === 'note'\"\n                                 config=\"$ctrl.config\"\n                                 item-id=\"localNotebookItemId\"\n                                 is-edit-allowed=\"!$ctrl.insertMode\"\n                                 is-choose-mode=\"$ctrl.insertMode\"\n                                 workgroup-id=\"$ctrl.workgroupId\"\n                                 on-select=\"$ctrl.select($ev, $itemId)\"\n                                 on-delete=\"$ctrl.deleteItem($ev, $itemId)\"\n                                 style=\"display: flex;\"\n                                 flex=\"100\"\n                                 flex-gt-xs=\"50\">\n                    </notebook-item>\n                    <!-- TODO: show deleted items somewhere\n                        <notebook-item ng-repeat=\"(localNotebookItemId, notes) in $ctrl.notebook.deletedItems\"\n                                       ng-if=\"notes.last().type === 'note'\"\n                                       config=\"$ctrl.config\"\n                                       item-id=\"localNotebookItemId\"\n                                       is-edit-allowed=\"!$ctrl.insertMode\"\n                                       is-choose-mode=\"$ctrl.insertMode\"\n                                       workgroup-id=\"$ctrl.workgroupId\"\n                                       on-select=\"$ctrl.select($ev, $itemId)\"\n                                       on-revive=\"$ctrl.deleteItem($ev, $itemId)\"\n                                       style=\"display: flex;\"\n                                       flex=\"100\"\n                                       flex-gt-xs=\"50\">\n                        </notebook-item>\n                    -->\n                </div> <!-- TODO: add questions when supported -->\n            </md-content>\n        </md-sidenav>`,\n    controller: NotebookNotesController\n};\n\nexport default NotebookNotes;\n"]}