{"version":3,"sources":["main.es6"],"names":["vleModule","module","service","name","controller","filter","config","$urlRouterProvider","$stateProvider","$translateProvider","$translatePartialLoaderProvider","$controllerProvider","$mdThemingProvider","$httpProvider","$provide","otherwise","state","url","abstract","templateProvider","$http","ProjectService","themePath","getThemePath","get","then","response","data","controllerAs","resolve","ConfigService","configURL","window","retrieveConfig","project","retrieveProject","studentData","StudentDataService","retrieveStudentData","notebook","NotebookService","StudentAssetService","retrieveAssets","studentAssets","retrieveNotebookItems","getWorkgroupId","achievements","AchievementService","retrieveAchievements","notifications","NotificationService","retrieveNotifications","runStatus","retrieveRunStatus","sessionTimers","SessionService","initializeSession","webSocket","StudentWebSocketService","initialize","language","$translate","locale","getLocale","use","theme","$ocLazyLoad","$q","def","defer","System","import","themeModule","m","default","key","Object","keys","load","err","promise","views","wiseBaseURL","getWISEBaseURL","interceptors","push","addPart","useLoader","urlTemplate","fallbackLanguage","registerAvailableLanguageKeys","determinePreferredLanguage","useSanitizeValueStrategy","definePalette","undefined","primaryPalette","accentPalette","warnPalette","lightMap","extendPalette","setDefaultTheme","calendar","lastDay","sameDay","nextDay","lastWeek","nextWeek","sameElse","relativeTime","future","past","s","mm","h","hh","d","dd","M","MM","y","yy"],"mappings":"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","file":"main.js","sourcesContent":["'use strict';\r\n\r\nimport $ from 'jquery';\r\nimport AchievementService from '../services/achievementService';\r\nimport angular from 'angular';\r\nimport angularDragula from 'angular-dragula';\r\nimport angularFileUpload from 'ng-file-upload';\r\nimport angularHighcharts from 'highcharts-ng';\r\nimport angularMaterial from 'angular-material';\r\nimport angularMoment from 'angular-moment';\r\nimport angularSanitize from 'angular-sanitize';\r\nimport angularToArrayFilter from 'lib/angular-toArrayFilter/toArrayFilter';\r\nimport angularTranslate from 'angular-translate';\r\nimport angularTranslateLoaderPartial from 'angular-translate-loader-partial';\r\nimport angularUIRouter from 'angular-ui-router';\r\nimport angularUIScrollpoint from 'angular-ui-scrollpoint';\r\nimport angularWebSocket from 'angular-websocket';\r\nimport AnnotationService from '../services/annotationService';\r\nimport AudioOscillatorComponentModule from '../components/audioOscillator/audioOscillatorComponentModule';\r\nimport ConceptMapComponentModule from '../components/conceptMap/conceptMapComponentModule';\r\nimport ConfigService from '../services/configService';\r\nimport CRaterService from '../services/cRaterService';\r\nimport Components from '../directives/components';\r\nimport DiscussionComponentModule from '../components/discussion/discussionComponentModule';\r\nimport DrawComponentModule from '../components/draw/drawComponentModule';\r\nimport EmbeddedComponentModule from '../components/embedded/embeddedComponentModule';\r\nimport Filters from '../filters/filters';\r\nimport Highcharts from '../lib/highcharts@4.2.1';\r\nimport draggablePoints from '../lib/draggable-points/draggable-points';\r\nimport GraphComponentModule from '../components/graph/graphComponentModule';\r\nimport HTMLComponentModule from '../components/html/htmlComponentModule';\r\nimport HttpInterceptor from '../services/httpInterceptor';\r\nimport LabelComponentModule from '../components/label/labelComponentModule';\r\nimport MatchComponentModule from '../components/match/matchComponentModule';\r\nimport MultipleChoiceComponentModule from '../components/multipleChoice/multipleChoiceComponentModule';\r\nimport NavigationController from './navigation/navigationController';\r\nimport NodeController from '../node/nodeController';\r\nimport NodeService from '../services/nodeService';\r\nimport NotebookService from '../services/notebookService';\r\nimport NotificationService from '../services/notificationService';\r\nimport OpenResponseComponentModule from '../components/openResponse/openResponseComponentModule';\r\nimport OutsideURLComponentModule from '../components/outsideURL/outsideURLComponentModule';\r\nimport ProjectService from '../services/projectService';\r\nimport SessionService from '../services/sessionService';\r\nimport StudentAsset from './studentAsset/studentAsset';\r\nimport StudentAssetService from '../services/studentAssetService';\r\nimport StudentDataService from '../services/studentDataService';\r\nimport StudentStatusService from '../services/studentStatusService';\r\nimport StudentWebSocketService from '../services/studentWebSocketService';\r\nimport TableComponentModule from '../components/table/tableComponentModule';\r\nimport UtilService from '../services/utilService';\r\nimport VLEController from './vleController';\r\nimport ocLazyLoad from 'oclazyload';\r\nimport moment from 'moment';\r\n\r\n//import bootstrap from 'bootstrap';\r\n//import summernote from 'summernote';\r\nimport angularSummernote from 'lib/angular-summernote/dist/angular-summernote.min';\r\n\r\nlet vleModule = angular.module('vle', [\r\n    angularDragula(angular),\r\n    'angularMoment',\r\n    'angular-toArrayFilter',\r\n    'audioOscillatorComponentModule',\r\n    'components',\r\n    'conceptMapComponentModule',\r\n    'discussionComponentModule',\r\n    'drawComponentModule',\r\n    'embeddedComponentModule',\r\n    'filters',\r\n    'graphComponentModule',\r\n    'highcharts-ng',\r\n    'htmlComponentModule',\r\n    'labelComponentModule',\r\n    'matchComponentModule',\r\n    'multipleChoiceComponentModule',\r\n    'ngAria',\r\n    'ngFileUpload',\r\n    'ngMaterial',\r\n    'ngSanitize',\r\n    'ngWebSocket',\r\n    'oc.lazyLoad',\r\n    'openResponseComponentModule',\r\n    'outsideURLComponentModule',\r\n    'pascalprecht.translate',\r\n    'studentAsset',\r\n    'summernote',\r\n    'tableComponentModule',\r\n    'ui.router',\r\n    'ui.scrollpoint'\r\n    ])\r\n    .service(AchievementService.name, AchievementService)\r\n    .service(AnnotationService.name, AnnotationService)\r\n    .service(ConfigService.name, ConfigService)\r\n    .service(CRaterService.name, CRaterService)\r\n    .service(HttpInterceptor.name, HttpInterceptor)\r\n    .service(NodeService.name, NodeService)\r\n    .service(NotebookService.name, NotebookService)\r\n    .service(NotificationService.name, NotificationService)\r\n    .service(ProjectService.name, ProjectService)\r\n    .service(SessionService.name, SessionService)\r\n    .service(StudentAssetService.name, StudentAssetService)\r\n    .service(StudentDataService.name, StudentDataService)\r\n    .service(StudentStatusService.name, StudentStatusService)\r\n    .service(StudentWebSocketService.name, StudentWebSocketService)\r\n    .service(UtilService.name, UtilService)\r\n    .controller(NavigationController.name, NavigationController)\r\n    .controller(NodeController.name, NodeController)\r\n    .controller(VLEController.name, VLEController)\r\n    .filter(Filters.name, Filters)\r\n    .config([\r\n        '$urlRouterProvider',\r\n        '$stateProvider',\r\n        '$translateProvider',\r\n        '$translatePartialLoaderProvider',\r\n        '$controllerProvider',\r\n        '$mdThemingProvider',\r\n        '$httpProvider',\r\n        '$provide',\r\n        ($urlRouterProvider,\r\n         $stateProvider,\r\n         $translateProvider,\r\n         $translatePartialLoaderProvider,\r\n         $controllerProvider,\r\n         $mdThemingProvider,\r\n         $httpProvider,\r\n         $provide) => {\r\n\r\n            $urlRouterProvider.otherwise('/vle/');\r\n\r\n            angular.module('vle').$controllerProvider = $controllerProvider;\r\n\r\n            $stateProvider\r\n                .state('root', {\r\n                    url: '',\r\n                    abstract: true,\r\n                    templateProvider: ['$http', 'ProjectService', function ($http, ProjectService) {\r\n                        let themePath = ProjectService.getThemePath();\r\n                        return $http.get(themePath + '/vle.html').then(\r\n                            response => {\r\n                                return response.data;\r\n                            });\r\n                    }],\r\n                    controller: 'VLEController',\r\n                    controllerAs: 'vleController',\r\n                    resolve: {\r\n                        config: function (ConfigService) {\r\n                            let configURL = window.configURL;\r\n                            return ConfigService.retrieveConfig(configURL);\r\n                        },\r\n                        project: function (ProjectService, config) {\r\n                            return ProjectService.retrieveProject();\r\n                        },\r\n                        studentData: function (StudentDataService, config, project) {\r\n                            return StudentDataService.retrieveStudentData();\r\n                        },\r\n                        notebook: function (NotebookService, ConfigService, StudentAssetService, studentData, config, project) {\r\n                            return StudentAssetService.retrieveAssets().then((studentAssets) => {\r\n                                return NotebookService.retrieveNotebookItems(ConfigService.getWorkgroupId()).then((notebook) => {\r\n                                    return notebook;\r\n                                });\r\n                            });\r\n/*\r\n                            if (!ConfigService.isPreview()) {\r\n                                StudentAssetService.retrieveAssets().then((studentAssets) => {\r\n                                    NotebookService.retrieveNotebookItems(ConfigService.getWorkgroupId()).then((notebook) => {\r\n                                        return notebook;\r\n                                    });\r\n                                });\r\n                            } else {\r\n                                return NotebookService.notebook;\r\n                            }\r\n                            */\r\n                        },\r\n                        achievements: function (AchievementService, studentData, config, project) {\r\n                            return AchievementService.retrieveAchievements();\r\n                        },\r\n                        notifications: function (NotificationService, studentData, config, project) {\r\n                            return NotificationService.retrieveNotifications();\r\n                        },\r\n                        runStatus: function(StudentDataService, config) {\r\n                            return StudentDataService.retrieveRunStatus();\r\n                        },\r\n                        sessionTimers: function (SessionService, config, project, studentData) {\r\n                            return SessionService.initializeSession();\r\n                        },\r\n                        webSocket: function (StudentWebSocketService, config, project) {\r\n                            return StudentWebSocketService.initialize();\r\n                        },\r\n                        language: ($translate, ConfigService, config) => {\r\n                            let locale = ConfigService.getLocale();  // defaults to \"en\"\r\n                            $translate.use(locale);\r\n                        },\r\n                        theme: function (ProjectService, config, project, $ocLazyLoad, $q) {\r\n                            let theme = ProjectService.getThemePath() + '/theme.js';\r\n                            let def = $q.defer();\r\n\r\n                            System.import(theme).then(m => {\r\n                                let themeModule = m.default;\r\n                                if (!m.default.name) {\r\n                                    let key = Object.keys(m.default);\r\n                                    themeModule = m.default[key[0]];\r\n                                }\r\n\r\n                                $ocLazyLoad.load(themeModule).then(() => {\r\n                                    def.resolve();\r\n                                }, err => {\r\n                                    throw err;\r\n                                });\r\n                            });\r\n\r\n                            return def.promise;\r\n                        }\r\n                    }\r\n                })\r\n                .state('root.vle', {\r\n                    url: '/vle/:nodeId',\r\n                    views: {\r\n                        'nodeView': {\r\n                            templateProvider: ['$http', 'ConfigService', function ($http, ConfigService) {\r\n                                let wiseBaseURL = ConfigService.getWISEBaseURL();\r\n                                return $http.get(wiseBaseURL + '/wise5/node/index.html').then(\r\n                                    response => {\r\n                                        return response.data;\r\n                                    }\r\n                                );\r\n                            }],\r\n                            controller: 'NodeController',\r\n                            controllerAs: 'nodeController'\r\n                        }\r\n                    }\r\n                })\r\n                /*.state('root.notebook', {\r\n                    url: '/notebook/:nodeid',\r\n                    views: {\r\n                        'notebookView': {\r\n                            templateProvider: ['$http', 'ConfigService', function ($http, ConfigService) {\r\n                                let wiseBaseURL = ConfigService.getWISEBaseURL();\r\n                                return $http.get(wiseBaseURL + '/wise5/notebook/index.html').then(\r\n                                    response => {\r\n                                        return response.data;\r\n                                    }\r\n                                );\r\n                            }]\r\n                        }\r\n                    }\r\n                })*/;\r\n\r\n            $httpProvider.interceptors.push('HttpInterceptor');\r\n\r\n            // Set up Translations\r\n            $translatePartialLoaderProvider.addPart('i18n');\r\n            $translatePartialLoaderProvider.addPart('vle/i18n');\r\n            $translateProvider.useLoader('$translatePartialLoader', {\r\n                urlTemplate: 'wise5/{part}/i18n_{lang}.json'\r\n            })\r\n            .fallbackLanguage(['en'])\r\n            .registerAvailableLanguageKeys(['el','en','es','ja','ko','pt','tr','zh_CN','zh_TW'], {\r\n                'en_US': 'en',\r\n                'en_UK': 'en'\r\n            })\r\n            .determinePreferredLanguage()\r\n            .useSanitizeValueStrategy('sanitizeParameters', 'escape');\r\n\r\n            // ngMaterial default theme configuration\r\n            // TODO: make dynamic and support alternate themes; allow projects to specify theme parameters and settings\r\n            $mdThemingProvider.definePalette('primary', {\r\n                '50': 'e1f0f4',\r\n                '100': 'b8dbe4',\r\n                '200': '8ec6d4',\r\n                '300': '5faec2',\r\n                '400': '3d9db5',\r\n                '500': '1c8ca8',\r\n                '600': '197f98',\r\n                '700': '167188',\r\n                '800': '136377',\r\n                '900': '0e4957',\r\n                'A100': 'abf3ff',\r\n                'A200': '66e2ff',\r\n                'A400': '17bee5',\r\n                'A700': '00A1C6',\r\n                'contrastDefaultColor': 'light',    // whether, by default, text (contrast)\r\n                                                    // on this palette should be dark or light\r\n                'contrastDarkColors': ['50', '100', //hues which contrast should be 'dark' by default\r\n                    '200', '300', 'A100'],\r\n                'contrastLightColors': undefined    // could also specify this if default was 'dark'\r\n            });\r\n\r\n            $mdThemingProvider.definePalette('accent', {\r\n                '50': 'fde9e6',\r\n                '100': 'fbcbc4',\r\n                '200': 'f8aca1',\r\n                '300': 'f4897b',\r\n                '400': 'f2705f',\r\n                '500': 'f05843',\r\n                '600': 'da503c',\r\n                '700': 'c34736',\r\n                '800': 'aa3e2f',\r\n                '900': '7d2e23',\r\n                'A100': 'ff897d',\r\n                'A200': 'ff7061',\r\n                'A400': 'ff3829',\r\n                'A700': 'cc1705',\r\n                'contrastDefaultColor': 'light',\r\n                'contrastDarkColors': ['50', '100',\r\n                    '200', '300', 'A100'],\r\n                'contrastLightColors': undefined\r\n            });\r\n\r\n            $mdThemingProvider.theme('default')\r\n                .primaryPalette('primary')\r\n                .accentPalette('accent',  {\r\n                    'default': '500'\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': '800'\r\n                });\r\n\r\n            let lightMap = $mdThemingProvider.extendPalette('grey', {\r\n                'A100': 'ffffff'\r\n            });\r\n            $mdThemingProvider.definePalette('light', lightMap);\r\n\r\n            $mdThemingProvider.theme('light')\r\n                .primaryPalette('light', {\r\n                    'default': 'A100'\r\n                })\r\n                .accentPalette('primary');\r\n\r\n            $mdThemingProvider.setDefaultTheme('default');\r\n\r\n            // moment.js default overrides\r\n            moment.locale('en', {\r\n                calendar : {\r\n                    lastDay : '[Yesterday at] LT',\r\n                    sameDay : '[Today at] LT',\r\n                    nextDay : '[Tomorrow at] LT',\r\n                    lastWeek : '[Last] dddd [at] LT',\r\n                    nextWeek : 'dddd [at] LT',\r\n                    sameElse : 'MMM D, YYYY [at] LT'\r\n                },\r\n                relativeTime : {\r\n                    future: \"in %s\",\r\n                    past:   \"%s\",\r\n                    s:  \"seconds ago\",\r\n                    m:  \"1 minute ago\",\r\n                    mm: \"%d minutes ago\",\r\n                    h:  \"1 hour ago\",\r\n                    hh: \"%d hours ago\",\r\n                    d:  \"1 day ago\",\r\n                    dd: \"%d days ago\",\r\n                    M:  \"1 month ago\",\r\n                    MM: \"%d months ago\",\r\n                    y:  \"1 year ago\",\r\n                    yy: \"%d years ago\"\r\n                }\r\n            });\r\n        }\r\n    ]);\r\n\r\nexport default vleModule;\r\n"]}