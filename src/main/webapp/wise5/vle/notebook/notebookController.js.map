{"version":3,"sources":["notebookController.es6"],"names":[],"mappings":"AAAA;;;;;;;;;;IAEM,kB;AAEF,gCAAY,SAAZ,EACY,UADZ,EAEY,MAFZ,EAGY,UAHZ,EAIY,aAJZ,EAKY,eALZ,EAMY,cANZ,EAOY,mBAPZ,EAQY,kBARZ,EAQgC;AAAA;;AAAA;;AAC5B,aAAK,SAAL,GAAiB,SAAjB;AACA,aAAK,UAAL,GAAkB,UAAlB;AACA,aAAK,MAAL,GAAc,MAAd;AACA,aAAK,UAAL,GAAkB,UAAlB;AACA,aAAK,aAAL,GAAqB,aAArB;AACA,aAAK,IAAL,GAAY,KAAK,aAAL,CAAmB,OAAnB,EAAZ;AACA,aAAK,eAAL,GAAuB,eAAvB;AACA,aAAK,cAAL,GAAsB,cAAtB;AACA,aAAK,mBAAL,GAA2B,mBAA3B;AACA,aAAK,kBAAL,GAA0B,kBAA1B;;AAEA,aAAK,QAAL,GAAgB,IAAhB;AACA,aAAK,MAAL,GAAc,IAAd;AACA,aAAK,IAAL,GAAY,IAAZ;AACA,aAAK,cAAL,GAAsB,KAAK,eAAL,CAAqB,MAA3C;;AAEA,eAAO,GAAP,CAAW,iBAAX,EAA8B,UAAC,KAAD,EAAQ,IAAR,EAAiB;AAC3C,kBAAK,QAAL,GAAgB,KAAK,QAArB;AACH,SAFD;AAGA;;AAEA,aAAK,cAAL,GAAsB,OAAO,GAAP,CAAW,QAAX,EAAqB,UAAC,KAAD,EAAQ,IAAR,EAAiB;AACxD,kBAAK,cAAL;AACA,kBAAK,UAAL,CAAgB,UAAhB,CAA2B,wBAA3B;AACH,SAHqB,CAAtB;;AAKA;AACA,YAAI,CAAC,KAAK,aAAL,CAAmB,SAAnB,EAAL,EAAqC;AACjC,iBAAK,qBAAL;AACH;AACJ;;;;yCAEgB;AACb,mBAAO,KAAK,WAAZ;AACH;;;gDAEuB;AAAA;;AACpB;AACA,iBAAK,mBAAL,CAAyB,cAAzB,GAA0C,IAA1C,CAA+C,UAAC,aAAD,EAAmB;AAC9D,uBAAK,eAAL,CAAqB,qBAArB,GAA6C,IAA7C,CAAkD,UAAC,QAAD,EAAc;AAC5D,2BAAK,QAAL,GAAgB,QAAhB;AACH,iBAFD;AAGH,aAJD;AAKH;;;2CAEkB,Y,EAAc;AAC7B,kBAAM,yDAAN;AACA;;;;;;;AAOH;;;mCAEU,I,EAAM;AACb,iBAAK,eAAL,CAAqB,UAArB,CAAgC,IAAhC;AACH;;;iCAEQ,E,EAAI,M,EAAQ;AACjB;AACA,iBAAK,UAAL,CAAgB,UAAhB,CAA2B,UAA3B,EAAuC,EAAC,QAAQ,MAAT,EAAiB,IAAI,EAArB,EAAvC;AACH;;;6CAEoB,M,EAAQ,Y,EAAc;AACvC,iBAAK,oBAAL,GAA4B,YAA5B;AACH;;;sDAE6B,M,EAAQ,Y,EAAc;AAChD,iBAAK,mBAAL,CAAyB,6BAAzB,CAAuD,YAAvD;AACA,iBAAK,oBAAL,GAA4B,IAA5B,CAFgD,CAEb;AACnC;AACA,mBAAO,eAAP,GAJgD,CAIrB;AAC9B;;;;;;AAGL,mBAAmB,OAAnB,GAA6B,CACzB,WADyB,EAEzB,YAFyB,EAGzB,QAHyB,EAIzB,YAJyB,EAKzB,eALyB,EAMzB,iBANyB,EAOzB,gBAPyB,EAQzB,qBARyB,EASzB,oBATyB,CAA7B;;kBAYe,kB","file":"notebookController.js","sourcesContent":["'use strict';\n\nclass NotebookController {\n\n    constructor($injector,\n                $rootScope,\n                $scope,\n                $translate,\n                ConfigService,\n                NotebookService,\n                ProjectService,\n                StudentAssetService,\n                StudentDataService) {\n        this.$injector = $injector;\n        this.$rootScope = $rootScope;\n        this.$scope = $scope;\n        this.$translate = $translate;\n        this.ConfigService = ConfigService;\n        this.mode = this.ConfigService.getMode();\n        this.NotebookService = NotebookService;\n        this.ProjectService = ProjectService;\n        this.StudentAssetService = StudentAssetService;\n        this.StudentDataService = StudentDataService;\n\n        this.notebook = null;\n        this.itemId = null;\n        this.item = null;\n        this.notebookConfig = this.NotebookService.config;\n\n        $scope.$on('notebookUpdated', (event, args) => {\n            this.notebook = args.notebook;\n        });\n        //this.notebook = this.NotebookService.notebook;\n\n        this.logOutListener = $scope.$on('logOut', (event, args) => {\n            this.logOutListener();\n            this.$rootScope.$broadcast('componentDoneUnloading');\n        });\n\n        // retrieve assets when notebook is opened\n        if (!this.ConfigService.isPreview()) {\n            this.retrieveNotebookItems();\n        }\n    }\n\n    getTemplateUrl() {\n        return this.templateUrl;\n    }\n\n    retrieveNotebookItems() {\n        // fetch all assets first because a subset of it will be referenced by a notebook item\n        this.StudentAssetService.retrieveAssets().then((studentAssets) => {\n            this.NotebookService.retrieveNotebookItems().then((notebook) => {\n                this.notebook = notebook;\n            });\n        });\n    }\n\n    deleteStudentAsset(studentAsset) {\n        alert('delete student asset from note book not implemented yet');\n        /*\n         StudentAssetService.deleteAsset(studentAsset).then(angular.bind(this, function(deletedStudentAsset) {\n         // remove studentAsset\n         this.studentAssets.splice(this.studentAssets.indexOf(deletedStudentAsset), 1);\n         this.calculateTotalUsage();\n         }));\n         */\n    }\n\n    deleteItem(item) {\n        this.NotebookService.deleteItem(item);\n    }\n\n    editItem(ev, itemId) {\n        //this.NotebookService.editItem(ev, itemId);\n        this.$rootScope.$broadcast('editNote', {itemId: itemId, ev: ev});\n    }\n\n    notebookItemSelected($event, notebookItem) {\n        this.selectedNotebookItem = notebookItem;\n    }\n\n    attachNotebookItemToComponent($event, notebookItem) {\n        this.componentController.attachNotebookItemToComponent(notebookItem);\n        this.selectedNotebookItem = null;  // reset selected notebook item\n        // TODO: add some kind of unobtrusive confirmation to let student know that the notebook item has been added to current component\n        $event.stopPropagation();  // prevents parent notebook list item from getting the onclick event so this item won't be re-selected.\n    }\n}\n\nNotebookController.$inject = [\n    \"$injector\",\n    \"$rootScope\",\n    \"$scope\",\n    \"$translate\",\n    \"ConfigService\",\n    \"NotebookService\",\n    \"ProjectService\",\n    \"StudentAssetService\",\n    \"StudentDataService\"\n];\n\nexport default NotebookController;\n"]}