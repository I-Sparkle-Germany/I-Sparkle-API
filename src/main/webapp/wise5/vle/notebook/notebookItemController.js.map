{"version":3,"sources":["notebookItemController.es6"],"names":["NotebookItemController","$injector","$rootScope","$scope","$translate","ConfigService","NotebookService","ProjectService","StudentAssetService","StudentDataService","UtilService","mode","getMode","item","getLatestNotebookItemByLocalNotebookItemId","itemId","id","type","notebookConfig","getNotebookConfig","label","itemTypes","$on","event","args","notebook","items","last","nodeId","getNodePositionAndTitleByNodeId","getNodePositionById","getThemePath","ev","onSelect","$ev","$itemId","localNotebookItemId","$inject"],"mappings":"AAAA;;;;;;;;;;IAEMA,sB;AAEF,oCAAYC,SAAZ,EACYC,UADZ,EAEYC,MAFZ,EAGYC,UAHZ,EAIYC,aAJZ,EAKYC,eALZ,EAMYC,cANZ,EAOYC,mBAPZ,EAQYC,kBARZ,EASYC,WATZ,EASyB;AAAA;;AAAA;;AACrB,aAAKT,SAAL,GAAiBA,SAAjB;AACA,aAAKC,UAAL,GAAkBA,UAAlB;AACA,aAAKC,MAAL,GAAcA,MAAd;AACA,aAAKC,UAAL,GAAkBA,UAAlB;AACA,aAAKC,aAAL,GAAqBA,aAArB;AACA,aAAKC,eAAL,GAAuBA,eAAvB;AACA,aAAKC,cAAL,GAAsBA,cAAtB;AACA,aAAKC,mBAAL,GAA2BA,mBAA3B;AACA,aAAKC,kBAAL,GAA0BA,kBAA1B;AACA,aAAKC,WAAL,GAAmBA,WAAnB;AACA,aAAKC,IAAL,GAAY,KAAKN,aAAL,CAAmBO,OAAnB,EAAZ;;AAEA,aAAKC,IAAL,GAAY,KAAKP,eAAL,CAAqBQ,0CAArB,CAAgE,KAAKC,MAArE,CAAZ;AACA,aAAKF,IAAL,CAAUG,EAAV,GAAe,IAAf,CAdqB,CAcA;;AAErB;AACA,aAAKC,IAAL,GAAY,KAAKJ,IAAL,GAAY,KAAKA,IAAL,CAAUI,IAAtB,GAA6B,IAAzC;;AAEA,aAAKC,cAAL,GAAsB,KAAKZ,eAAL,CAAqBa,iBAArB,EAAtB;AACA,aAAKC,KAAL,GAAa,KAAKF,cAAL,CAAoBG,SAApB,CAA8B,KAAKJ,IAAnC,EAAyCG,KAAtD;;AAEA,aAAKlB,UAAL,CAAgBoB,GAAhB,CAAoB,iBAApB,EAAuC,UAACC,KAAD,EAAQC,IAAR,EAAiB;AACpD,gBAAIC,WAAWD,KAAKC,QAApB;AACA,kBAAKZ,IAAL,GAAYY,SAASC,KAAT,CAAe,MAAKX,MAApB,EAA4BY,IAA5B,EAAZ;AACH,SAHD;AAIH;;;;wCAEe;AACZ,gBAAI,KAAKd,IAAL,IAAa,IAAjB,EAAuB;AACnB,uBAAO,IAAP;AACH,aAFD,MAEO;AACH,uBAAO,KAAKA,IAAL,CAAUe,MAAjB;AACH;AACJ;;AAED;;;;;;0CAGkB;AACd,gBAAI,KAAKf,IAAL,IAAa,IAAjB,EAAuB;AACnB,uBAAO,EAAP;AACH,aAFD,MAEO;AACH,uBAAO,KAAKN,cAAL,CAAoBsB,+BAApB,CAAoD,KAAKhB,IAAL,CAAUe,MAA9D,CAAP;AACH;AACJ;;AAED;;;;;;8CAGsB;AAClB,gBAAI,KAAKf,IAAL,IAAa,IAAjB,EAAuB;AACnB,uBAAO,EAAP;AACH,aAFD,MAEO;AACH,uBAAO,KAAKN,cAAL,CAAoBuB,mBAApB,CAAwC,KAAKjB,IAAL,CAAUe,MAAlD,CAAP;AACH;AACJ;;;yCAEgB;AACb,mBAAO,KAAKrB,cAAL,CAAoBwB,YAApB,KAAqC,6BAA5C;AACH;;;iCAEQC,E,EAAI;AACT,gBAAI,KAAKC,QAAT,EAAmB;AACf,qBAAKA,QAAL,CAAc,EAACC,KAAKF,EAAN,EAAUG,SAAS,KAAKtB,IAAL,CAAUuB,mBAA7B,EAAd;AACH;AACJ;;;gCAEMJ,E,EAAI;AACP;AACH;;;;;;AAGLhC,uBAAuBqC,OAAvB,GAAiC,CAC7B,WAD6B,EAE7B,YAF6B,EAG7B,QAH6B,EAI7B,YAJ6B,EAK7B,eAL6B,EAM7B,iBAN6B,EAO7B,gBAP6B,EAQ7B,qBAR6B,EAS7B,oBAT6B,EAU7B,aAV6B,CAAjC;;kBAaerC,sB","file":"notebookItemController.js","sourcesContent":["'use strict';\n\nclass NotebookItemController {\n\n    constructor($injector,\n                $rootScope,\n                $scope,\n                $translate,\n                ConfigService,\n                NotebookService,\n                ProjectService,\n                StudentAssetService,\n                StudentDataService,\n                UtilService) {\n        this.$injector = $injector;\n        this.$rootScope = $rootScope;\n        this.$scope = $scope;\n        this.$translate = $translate;\n        this.ConfigService = ConfigService;\n        this.NotebookService = NotebookService;\n        this.ProjectService = ProjectService;\n        this.StudentAssetService = StudentAssetService;\n        this.StudentDataService = StudentDataService;\n        this.UtilService = UtilService;\n        this.mode = this.ConfigService.getMode();\n\n        this.item = this.NotebookService.getLatestNotebookItemByLocalNotebookItemId(this.itemId);\n        this.item.id = null; // set to null so we're creating a new notebook item. An edit to a notebook item results in a new entry in the db.\n\n        // set the type in the controller\n        this.type = this.item ? this.item.type : null;\n\n        this.notebookConfig = this.NotebookService.getNotebookConfig();\n        this.label = this.notebookConfig.itemTypes[this.type].label;\n\n        this.$rootScope.$on('notebookUpdated', (event, args) => {\n            let notebook = args.notebook;\n            this.item = notebook.items[this.itemId].last();\n        });\n    }\n\n    getItemNodeId() {\n        if (this.item == null) {\n            return null;\n        } else {\n            return this.item.nodeId;\n        }\n    }\n\n    /**\n     * Returns this NotebookItem's position link\n     */\n    getItemNodeLink() {\n        if (this.item == null) {\n            return \"\";\n        } else {\n            return this.ProjectService.getNodePositionAndTitleByNodeId(this.item.nodeId);\n        }\n    }\n\n    /**\n     * Returns this NotebookItem's position\n     */\n    getItemNodePosition() {\n        if (this.item == null) {\n            return \"\";\n        } else {\n            return this.ProjectService.getNodePositionById(this.item.nodeId);\n        }\n    }\n\n    getTemplateUrl() {\n        return this.ProjectService.getThemePath() + '/notebook/notebookItem.html';\n    }\n\n    doSelect(ev) {\n        if (this.onSelect) {\n            this.onSelect({$ev: ev, $itemId: this.item.localNotebookItemId});\n        }\n    }\n\n    delete(ev) {\n        // TODO: add archiving/deleting notebook items\n    }\n}\n\nNotebookItemController.$inject = [\n    \"$injector\",\n    \"$rootScope\",\n    \"$scope\",\n    \"$translate\",\n    \"ConfigService\",\n    \"NotebookService\",\n    \"ProjectService\",\n    \"StudentAssetService\",\n    \"StudentDataService\",\n    \"UtilService\"\n];\n\nexport default NotebookItemController;\n"]}