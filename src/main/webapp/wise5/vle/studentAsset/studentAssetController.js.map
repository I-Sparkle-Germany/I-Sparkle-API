{"version":3,"sources":["studentAssetController.es6"],"names":[],"mappings":"AAAA;;;;;;;;;;IAEM,sB;AACF,oCAAY,SAAZ,EACY,UADZ,EAEY,MAFZ,EAGY,aAHZ,EAIY,cAJZ,EAKY,mBALZ,EAKiC;AAAA;;AAAA;;AAE7B,aAAK,SAAL,GAAiB,SAAjB;AACA,aAAK,UAAL,GAAkB,UAAlB;AACA,aAAK,MAAL,GAAc,MAAd;AACA,aAAK,aAAL,GAAqB,aAArB;AACA,aAAK,IAAL,GAAY,KAAK,aAAL,CAAmB,OAAnB,EAAZ;AACA,aAAK,cAAL,GAAsB,cAAtB;AACA,aAAK,mBAAL,GAA2B,mBAA3B;;AAEA,aAAK,aAAL,GAAqB,KAAK,mBAAL,CAAyB,SAA9C;;AAEA,aAAK,MAAL,GAAc,IAAd;AACA,aAAK,IAAL,GAAY,IAAZ;;AAEA,aAAK,cAAL,GAAsB,OAAO,GAAP,CAAW,QAAX,EAAqB,UAAC,KAAD,EAAQ,IAAR,EAAiB;AACxD,kBAAK,cAAL;AACA,kBAAK,UAAL,CAAgB,UAAhB,CAA2B,wBAA3B;AACH,SAHqB,CAAtB;;AAKA;AACA,YAAI,CAAC,KAAK,aAAL,CAAmB,SAAnB,EAAL,EAAqC;AACjC,iBAAK,qBAAL;AACH;AACJ;;;;yCAEgB;AACb,mBAAO,KAAK,WAAZ;AACH;;;gDAEuB;AAAA;;AACpB;AACA,iBAAK,mBAAL,CAAyB,cAAzB,GAA0C,IAA1C,CAA+C,UAAC,aAAD,EAAmB;AAC9D,uBAAK,aAAL,GAAqB,aAArB;AACH,aAFD;AAGH;;;4CAEmB,K,EAAO;AAAA;;AACvB,gBAAI,SAAS,IAAb,EAAmB;AACf,qBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAAM,MAA1B,EAAkC,GAAlC,EAAuC;AACnC,wBAAI,OAAO,MAAM,CAAN,CAAX;AACA,yBAAK,mBAAL,CAAyB,WAAzB,CAAqC,IAArC,EAA2C,IAA3C,CAAgD,UAAC,YAAD,EAAkB;AAC9D,4BAAI,OAAK,mBAAL,IAA4B,IAAhC,EAAsC;AAClC;AACA;AACA,mCAAK,mBAAL,CAAyB,kBAAzB,CAA4C,YAA5C;AACH;AACD,+BAAK,aAAL,GAAqB,OAAK,mBAAL,CAAyB,SAA9C;AACH,qBAPD;AAQH;AACJ;AACJ;;;2CAEkB,Y,EAAc;AAC7B,kBAAM,0CAAN;AACA;;;;;;;AAOH;;;sDAE6B,M,EAAQ,Y,EAAc;AAChD,gBAAI,KAAK,mBAAL,IAA4B,IAAhC,EAAsC;AAClC;AACA;AACA,qBAAK,mBAAL,CAAyB,kBAAzB,CAA4C,YAA5C;AACA;AACA,uBAAO,eAAP,GALkC,CAKP;AAC9B;AACJ;;;;;;AAGL,uBAAuB,OAAvB,GAAiC,CAC7B,WAD6B,EAE7B,YAF6B,EAG7B,QAH6B,EAI7B,eAJ6B,EAK7B,gBAL6B,EAM7B,qBAN6B,CAAjC;;kBASe,sB","file":"studentAssetController.js","sourcesContent":["'use strict';\n\nclass StudentAssetController {\n    constructor($injector,\n                $rootScope,\n                $scope,\n                ConfigService,\n                ProjectService,\n                StudentAssetService) {\n\n        this.$injector = $injector;\n        this.$rootScope = $rootScope;\n        this.$scope = $scope;\n        this.ConfigService = ConfigService;\n        this.mode = this.ConfigService.getMode();\n        this.ProjectService = ProjectService;\n        this.StudentAssetService = StudentAssetService;\n\n        this.studentAssets = this.StudentAssetService.allAssets;\n\n        this.itemId = null;\n        this.item = null;\n\n        this.logOutListener = $scope.$on('logOut', (event, args) => {\n            this.logOutListener();\n            this.$rootScope.$broadcast('componentDoneUnloading');\n        });\n\n        // retrieve assets when notebook is opened\n        if (!this.ConfigService.isPreview()) {\n            this.retrieveStudentAssets();\n        }\n    }\n\n    getTemplateUrl() {\n        return this.templateUrl;\n    };\n\n    retrieveStudentAssets() {\n        // fetch all assets\n        this.StudentAssetService.retrieveAssets().then((studentAssets) => {\n            this.studentAssets = studentAssets;\n        });\n    };\n\n    uploadStudentAssets(files) {\n        if (files != null) {\n            for (var f = 0; f < files.length; f++) {\n                var file = files[f];\n                this.StudentAssetService.uploadAsset(file).then((studentAsset) => {\n                    if (this.componentController != null) {\n                        // If the student asset dialog is a part of a component (e.g. attaching image to OR or Discussion)\n                        // Also attach the file(s) to the componentstate's attachments\n                        this.componentController.attachStudentAsset(studentAsset);\n                    }\n                    this.studentAssets = this.StudentAssetService.allAssets;\n                });\n            }\n        }\n    };\n\n    deleteStudentAsset(studentAsset) {\n        alert('delete student asset not implemented yet');\n        /*\n         StudentAssetService.deleteAsset(studentAsset).then(angular.bind(this, function(deletedStudentAsset) {\n         // remove studentAsset\n         this.studentAssets.splice(this.studentAssets.indexOf(deletedStudentAsset), 1);\n         this.calculateTotalUsage();\n         }));\n         */\n    };\n\n    attachStudentAssetToComponent($event, studentAsset) {\n        if (this.componentController != null) {\n            // If the student asset dialog is a part of a component (e.g. attaching image to OR or Discussion)\n            // Also attach the file(s) to the componentstate's attachments\n            this.componentController.attachStudentAsset(studentAsset);\n            // TODO: add some kind of unobtrusive confirmation to let student know that the student asset has been added to current component\n            $event.stopPropagation();  // prevents parent student asset list item from getting the onclick event so this item won't be re-selected.\n        }\n    };\n}\n\nStudentAssetController.$inject = [\n    \"$injector\",\n    \"$rootScope\",\n    \"$scope\",\n    \"ConfigService\",\n    \"ProjectService\",\n    \"StudentAssetService\"\n];\n\nexport default StudentAssetController;"]}