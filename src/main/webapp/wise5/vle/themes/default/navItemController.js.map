{"version":3,"sources":["navItemController.es6"],"names":[],"mappings":"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","file":"navItemController.js","sourcesContent":["\"use strict\";\n\nclass NavItemController {\n    constructor($scope,\n                $element,\n                ProjectService,\n                StudentDataService) {\n\n        this.$scope = $scope;\n        this.$element = $element;\n        this.ProjectService = ProjectService;\n        this.StudentDataService = StudentDataService;\n\n        this.expanded = false;\n\n        this.item = this.ProjectService.idToNode[this.nodeId];\n        this.isGroup = this.ProjectService.isGroupNode(this.nodeId);\n        this.nodeStatuses = this.StudentDataService.nodeStatuses;\n        this.nodeStatus = this.nodeStatuses[this.nodeId];\n\n        this.nodeTitle = this.showPosition ? (this.ProjectService.idToPosition[this.nodeId] + ': ' + this.item.title) : this.item.title;\n        this.currentNode = this.StudentDataService.currentNode;\n        var isCurrentNode = (this.currentNode.id === this.nodeId);\n        var setNewNode = false;\n\n        var scope = this;\n\n        this.$scope.$watch(\n            function () { return this.StudentDataService.currentNode; }.bind(this),\n            function (newNode) {\n                scope.currentNode = newNode;\n                if (this.StudentDataService.previousStep) {\n                    this.$scope.$parent.isPrevStep = (scope.nodeId === this.StudentDataService.previousStep.id);\n                }\n                isCurrentNode = (scope.currentNode.id === scope.nodeId);\n                if (isCurrentNode || this.ProjectService.isApplicationNode(newNode.id) || newNode.id === this.ProjectService.rootNode.id) {\n                    this.setExpanded();\n                }\n            }.bind(this)\n        );\n\n        this.$scope.$watch(\n            function () { return scope.expanded; }.bind(this),\n            function (value) {\n                this.$scope.$parent.itemExpanded = value;\n                if (value) {\n                    this.zoomToElement();\n                }\n            }.bind(this)\n        );\n\n        this.setExpanded();\n    }\n\n    getTemplateUrl(){\n        return this.ProjectService.getThemePath() + '/navigation/navItem.html';\n    };\n\n    setExpanded() {\n        this.$scope.expanded = (this.isCurrentNode || (this.$scope.isGroup && this.ProjectService.isNodeDescendentOfGroup(this.$scope.currentNode, this.$scope.item)));\n        if (this.$scope.expanded && this.isCurrentNode) {\n            this.zoomToElement();\n        }\n    };\n\n    zoomToElement() {\n        setTimeout(function () {\n            // smooth scroll to expanded group's page location\n            var location = this.$element[0].offsetTop - 32;\n            $('#content').animate({\n                scrollTop: location\n            }, 350, 'linear', function () {\n                if (setNewNode) {\n                    setNewNode = false;\n                    this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(scope.nodeId);\n                }\n            });\n        }, 250);\n    };\n\n    itemClicked() {\n        if (this.isGroup) {\n            if (!this.expanded) {\n                setNewNode = true;\n            }\n            this.expanded = !this.expanded;\n        } else {\n            this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(this.nodeId);\n        }\n    };\n}\n\nNavItemController.$inject = [\n    '$scope',\n    '$element',\n    'ProjectService',\n    'StudentDataService'\n];\n\nexport default NavItemController;"]}