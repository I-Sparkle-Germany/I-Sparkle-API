{"version":3,"sources":["navItemController.es6"],"names":[],"mappings":"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","file":"navItemController.js","sourcesContent":["\"use strict\";\n\nclass NavItemController {\n    constructor($scope,\n                $element,\n                ProjectService,\n                StudentDataService) {\n\n        this.$scope = $scope;\n        this.$element = $element;\n        this.ProjectService = ProjectService;\n        this.StudentDataService = StudentDataService;\n\n        this.expanded = false;\n\n        this.item = this.ProjectService.idToNode[this.nodeId];\n        this.isGroup = this.ProjectService.isGroupNode(this.nodeId);\n        this.nodeStatuses = this.StudentDataService.nodeStatuses;\n        this.nodeStatus = this.nodeStatuses[this.nodeId];\n\n        this.nodeTitle = this.showPosition ? (this.ProjectService.idToPosition[this.nodeId] + ': ' + this.item.title) : this.item.title;\n        this.currentNode = this.StudentDataService.currentNode;\n        this.isCurrentNode = (this.currentNode.id === this.nodeId);\n        this.setNewNode = false;\n\n        this.$scope.$watch(\n            function () { return this.StudentDataService.currentNode; }.bind(this),\n            function (newNode) {\n                this.currentNode = newNode;\n                if (this.StudentDataService.previousStep) {\n                    this.$scope.$parent.isPrevStep = (this.nodeId === this.StudentDataService.previousStep.id);\n                }\n                this.isCurrentNode = (this.currentNode.id === this.nodeId);\n                if (this.isCurrentNode || this.ProjectService.isApplicationNode(newNode.id) || newNode.id === this.ProjectService.rootNode.id) {\n                    this.setExpanded();\n                }\n            }.bind(this)\n        );\n\n        this.$scope.$watch(\n            function () { return this.expanded; }.bind(this),\n            function (value) {\n                this.$scope.$parent.itemExpanded = value;\n                if (value) {\n                    this.zoomToElement();\n                }\n            }.bind(this)\n        );\n\n        this.setExpanded();\n    }\n\n    getTemplateUrl(){\n        return this.ProjectService.getThemePath() + '/navigation/navItem.html';\n    };\n\n    setExpanded() {\n        this.$scope.expanded = (this.isCurrentNode || (this.$scope.isGroup && this.ProjectService.isNodeDescendentOfGroup(this.$scope.currentNode, this.$scope.item)));\n        if (this.$scope.expanded && this.isCurrentNode) {\n            this.expanded = true;\n            this.zoomToElement();\n        }\n    };\n\n    zoomToElement() {\n        setTimeout(()=> {\n            // smooth scroll to expanded group's page location\n            let location = this.$element[0].offsetTop - 32;\n            $('#content').animate({\n                scrollTop: location\n            }, 350, 'linear', ()=> {\n                if (this.setNewNode) {\n                    this.setNewNode = false;\n                    this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(this.nodeId);\n                }\n            });\n        }, 250);\n    };\n\n    itemClicked() {\n        if (this.isGroup) {\n            if (!this.expanded) {\n                this.setNewNode = true;\n            }\n            this.expanded = !this.expanded;\n        } else {\n            this.StudentDataService.endCurrentNodeAndSetCurrentNodeByNodeId(this.nodeId);\n        }\n    };\n}\n\nNavItemController.$inject = [\n    '$scope',\n    '$element',\n    'ProjectService',\n    'StudentDataService'\n];\n\nexport default NavItemController;"]}