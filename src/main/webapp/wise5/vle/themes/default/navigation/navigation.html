<div ng-controller='NavigationController as navCtrl' class="l-constrained">
    <div class="md-toolbar-tools auto-width">
        <div class="md-subhead nav-head breadcrumb">
            <md-icon> home </md-icon> <a ng-click="navCtrl.nodeClicked(navCtrl.currentParentGroups[0].id)">Project Plan</a>
            <a ng-repeat-start="group in navCtrl.currentParentGroups" ng-if="!$first" ng-click="navCtrl.nodeClicked(group.id)">{{group.title}}</a>
            <span ng-if="!$last" ng-repeat-end> > </span>
        </div>
        <span flex></span>
        <md-select ng-if="vleController.navFilters.length > 1" class="md-body-1" placeholder="Filter" ng-model="vleController.navFilter">
            <md-option ng-repeat="filter in vleController.navFilters" value="{{filter.name}}">{{filter.label}}</md-option>
        </md-select>
    </div>

    <div ng-animate-ref="{{ navCtrl.currentGroup.id }}">
        <md-card ng-class="'nav-' + navCtrl.layoutState" >
            <group-info ng-if="navCtrl.layoutState === 'group'" item="navCtrl.currentGroup" close="navCtrl.nodeClicked(navCtrl.parentGroupId)"
                        template-url="vleController.themePath + '/navigation/groupInfo.html'"></group-info>
            <md-card-content ng-class="'nav-contents nav-contents--' + navCtrl.layoutState  + ' nav-contents--' + navCtrl.layoutView">
                <md-list ng-if="navCtrl.layoutView === 'list'">
                    <nav-item ng-repeat="item in navCtrl.currentChildren" ng-if="navCtrl.nodeStatuses[item.id].isVisible"
                              template-url="vleController.themePath + '/navigation/navItem.html'"
                              item="item" type="navCtrl.layoutView" node-clicked="navCtrl.nodeClicked(item.id)" ng-animate-ref="{{ item.id }}" class="nav-item ng-enter"></nav-item>
                </md-list>
                <div ng-if="navCtrl.layoutView === 'card'" layout="row" layout-wrap layout-align="center center">
                    <nav-item ng-repeat="item in navCtrl.currentChildren" ng-if="navCtrl.nodeStatuses[item.id].isVisible"
                              template-url="vleController.themePath + '/navigation/navItem.html'"
                              item="item" type="navCtrl.layoutView" node-clicked="navCtrl.nodeClicked(item.id)"
                              flex-sm="100" flex-md="50" flex-lg="33" flex-gt-lg="25"></nav-item>
                </div>
            </md-card-content>
        </md-card>
    </div>

    <!--<group id='group' currentgroupid='{{navCtrl.currentGroupId}}'></group>-->

    <!--
    <group id='group_{{group.id}}' ng-repeat='group in navCtrligationController.groups' ng-show='group.id === navigationController.currentGroupId'>

    </group>


    <div id='test'></div>
     -->
    <!--
    <div ng-repeat='group in navigationController.groups' ng-show='group.id === navigationController.currentGroupId'>
        {{ group.title }}

        <input id='{{childId}}Button' type='button' ng-repeat='childId in group.ids' value='{{childId}}' ng-click='navigationController.nodeClicked(childId)' ng-class='{currentNode: navigationController.currentNode.id === childId, disabledNode: navigationController.isNodeDisabled(childId)}' ng-disabled='navigationController.isNodeDisabled(childId)'></input>
        <input type='button' value='Go To Parent' ng-click='navigationController.nodeClicked(navigationController.parentGroupId)'></input>
    </div>
     -->
</div>
