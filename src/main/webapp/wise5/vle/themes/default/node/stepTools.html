<md-toolbar class="md-whiteframe-z1 node-toolbar md-toolbar--wise" md-theme="light">
    <div class="md-toolbar-tools">
        <img ng-if="stepToolsCtrl.nodeStatus.icon.type === 'img'" ng-animate-ref="{{ stepToolsCtrl.nodeId }}" class="md-18 avatar node-avatar" ng-src="{{stepToolsCtrl.nodeStatus.icon.imgSrc}}" alt="{{stepToolsCtrl.nodeStatus.icon.imgAlt}}" />
        <div ng-if="stepToolsCtrl.nodeStatus.icon.type === 'font'" ng-animate-ref="{{ stepToolsCtrl.nodeId }}" style="background-color: {{stepToolsCtrl.nodeStatus.icon.color}};" class="md-18 avatar avatar--icon node-avatar">
            <md-icon md-font-set="{{stepToolsCtrl.nodeStatus.icon.fontSet}}" class="md-18 md-light node-icon" md-theme="default">{{stepToolsCtrl.nodeStatus.icon.fontName}}</md-icon>
        </div>

        <md-select md-theme="default" class="node-select md-subhead" ng-model="stepToolsCtrl.nodeId" style="color: {{stepToolsCtrl.nodeStatus.icon.color}};" aria-label="Go to other project item">
            <div ng-repeat="item in stepToolsCtrl.idToOrder | toArray | orderBy : 'order'"
                 ng-if="stepToolsCtrl.nodeStatuses[item.$key].isVisible && item.order!==0">
                <md-option value="{{ item.$key }}"
                           ng-click="stepToolsCtrl.nodeClicked(item.$key)"
                           ng-class="{'node-select--group': stepToolsCtrl.isGroupNode(item.$key), 'node-select--node': !stepToolsCtrl.isGroupNode(item.$key)}">
                    <div layout="row" layout-align="start center">
                        <!--<img ng-if="stepToolsCtrl.nodeStatuses[item.$key].icon.type === 'img'" class="md-18 avatar node-avatar" ng-src="{{stepToolsCtrl.nodeStatuses[item.$key].icon.imgSrc}}" alt="{{stepToolsCtrl.nodeStatuses[item.$key].icon.imgAlt}}" />
                        <div ng-if="stepToolsCtrl.nodeStatuses[item.$key].icon.type === 'font'" style="background-color: {{stepToolsCtrl.nodeStatuses[item.$key].icon.color}};" class="md-18 avatar avatar--icon node-avatar">
                            <md-icon md-font-set="{{stepToolsCtrl.nodeStatuses[item.$key].icon.fontSet}}" class="md-18 md-light node-icon" md-theme="default">{{stepToolsCtrl.nodeStatuses[item.$key].icon.fontName}}</md-icon>&nbsp;
                        </div> TODO: put back when ng-material supports <md-icon> in <md-option>-->
                        <span ng-if="stepToolsCtrl.showPosition">{{ stepToolsCtrl.getNodePositionById(item.$key) }}:</span>&nbsp;{{ stepToolsCtrl.getNodeTitleByNodeId(item.$key) }}<md-icon ng-if="stepToolsCtrl.nodeStatuses[item.$key].isCompleted" ng-class="'success'" class="node-select__icon" aria-label="Completed" md-font-icon="check_circle"></md-icon>
                    </div>
                </md-option>
            </div>
        </md-select>
        <!--<md-button aria-label="Notifications" class="md-icon-button">
            <md-icon md-theme="default"> message </md-icon>
        </md-button> TODO: Add notifications and score when operational-->
        <md-icon ng-if="stepToolsCtrl.nodeStatus.isCompleted" md-theme="default" ng-class="'success'" aria-label="Completed"> check_circle </md-icon>
        <span flex></span>
        <md-button aria-label="Previous Item" class="md-icon-button node-nav"
                   ng-disabled="!stepToolsCtrl.prevId" ng-click="stepToolsCtrl.goToPrevNode()">
            <md-icon> arrow_back </md-icon>
        </md-button>
        <md-button aria-label="Next Item" class="md-icon-button node-nav"
                   ng-disabled="!stepToolsCtrl.nextId" ng-click="stepToolsCtrl.goToNextNode()">
            <md-icon> arrow_forward </md-icon>
        </md-button>
        <md-button aria-label="Close Step" class="md-icon-button node-nav" ng-click="stepToolsCtrl.closeNode()">
            <md-icon md-theme="default"> close </md-icon>
        </md-button>
    </div>
</md-toolbar>