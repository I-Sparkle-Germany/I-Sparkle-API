{"version":3,"sources":["themeController.es6"],"names":[],"mappings":"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","file":"themeController.js","sourcesContent":["'use strict';\n\nclass ThemeController {\n    constructor($scope,\n                ConfigService,\n                ProjectService,\n                StudentDataService,\n                NotebookService,\n                SessionService,\n                $mdDialog,\n                $mdToast,\n                $mdComponentRegistry) {\n\n        this.$scope = $scope;\n        this.ConfigService = ConfigService;\n        this.ProjectService = ProjectService;\n        this.StudentDataService = StudentDataService;\n        this.NotebookService = NotebookService;\n        this.SessionService = SessionService;\n        this.$mdDialog = $mdDialog;\n        this.$mdToast = $mdToast;\n        this.$mdComponentRegistry = $mdComponentRegistry;\n\n        // TODO: set these variables dynamically from theme settings\n        this.layoutView = 'list'; // 'list' or 'card'\n        this.numberProject = true;\n\n        this.themePath = this.ProjectService.getThemePath();\n\n        this.nodeStatuses = this.StudentDataService.nodeStatuses;\n\n        this.rootNode = this.ProjectService.rootNode;\n        this.rootNodeStatus = this.nodeStatuses[this.rootNode.id];\n\n        this.workgroupId = this.ConfigService.getWorkgroupId();\n        this.workgroupUserNames = this.isPreview ? ['Preview User'] : this.ConfigService.getUserNamesByWorkgroupId(this.workgroupId);\n\n        // build project status pop-up\n        var statusTemplateUrl = this.themePath + '/templates/projectStatus.html';\n        var scope = this;\n        this.statusDisplay = this.$mdToast.build({\n            locals: {\n                projectStatus: scope.rootNodeStatus,\n                userNames: scope.workgroupUserNames\n            },\n            controller: 'ProjectStatusController',\n            bindToController: true,\n            templateUrl: statusTemplateUrl,\n            hideDelay: 0\n        });\n\n        this.projectStatusOpen = false;\n        this.showProjectStatus = function($event) {\n            if (this.projectStatusOpen) {\n                this.$mdToast.hide(this.statusDisplay);\n                this.projectStatusOpen = false;\n            } else {\n                this.$mdToast.show(this.statusDisplay);\n                this.projectStatusOpen = true;\n            }\n        };\n\n        // alert user when a locked node has been clicked\n        this.$scope.$on('nodeClickLocked', angular.bind(this, function (event, args) {\n            var nodeId = args.nodeId;\n\n            // TODO: customize alert with constraint details, correct node term\n            this.$mdDialog.show(\n                this.$mdDialog.alert()\n                    .parent(angular.element(document.body))\n                    .title('Item Locked')\n                    .content('Sorry, you cannot view this item yet.')\n                    .ariaLabel('Item Locked')\n                    .clickOutsideToClose(true)\n                    .ok('OK')\n                    .targetEvent(event)\n            );\n        }));\n\n        // alert user when inactive for a long time\n        this.$scope.$on('showSessionWarning', angular.bind(this, function() {\n            var confirm = this.$mdDialog.confirm()\n                .parent(angular.element(document.body))\n                .title('Session Timeout')\n                .content('You have been inactive for a long time. Do you want to stay logged in?')\n                .ariaLabel('Session Timeout')\n                .ok('YES')\n                .cancel('No');\n            this.$mdDialog.show(confirm).then(function() {\n                this.SessionService.renewSession();\n            }, function() {\n                this.SessionService.forceLogOut();\n            });\n        }));\n\n        // alert user when attempt to add component state to notebook that already exists in notebook\n        this.$scope.$on('notebookAddDuplicateAttempt', angular.bind(this, function (event, args) {\n            this.$mdDialog.show(\n                this.$mdDialog.alert()\n                    .parent(angular.element(document.body))\n                    .title('Item already exists in Notebook')\n                    .content('You can add another version of the item by making changes and then adding it again.')\n                    .ariaLabel('Notebook Duplicate')\n                    .clickOutsideToClose(true)\n                    .ok('OK')\n                    .targetEvent(event)\n            );\n        }));\n\n        // show list of revisions in a dialog when user clicks the show revisions link for a component\n        this.$scope.$on('showRevisions', angular.bind(this, function (event, args) {\n            var revisions = args.revisions;\n            var componentController = args.componentController;\n            var allowRevert = args.allowRevert;\n            var $event = args.$event;\n            var revisionsTemplateUrl = scope.themePath + '/templates/componentRevisions.html';\n\n            this.$mdDialog.show({\n                parent: angular.element(document.body),\n                targetEvent: $event,\n                templateUrl: revisionsTemplateUrl,\n                locals: {\n                    items: revisions.reverse(),\n                    componentController: componentController,\n                    allowRevert: allowRevert\n                },\n                controller: RevisionsController\n            });\n            function RevisionsController($scope, $mdDialog, items, componentController, allowRevert) {\n                $scope.items = items;\n                $scope.componentController = componentController;\n                $scope.allowRevert = allowRevert;\n                $scope.close = function() {\n                    $mdDialog.hide();\n                };\n                $scope.revertWork = function(componentState) {\n                    $scope.componentController.setStudentWork(componentState);\n                    $scope.componentController.studentDataChanged();\n                    $mdDialog.hide();\n                };\n            }\n        }));\n\n        this.$scope.$on('showNotebook', angular.bind(this, function (event, args) {\n            var notebookFilters = args.notebookFilters;\n            var componentController = args.componentController;\n            var $event = args.$event;\n            var notebookDialogTemplateUrl = scope.themePath + '/templates/notebookDialog.html';\n            var notebookTemplateUrl = scope.themePath + '/notebook/notebook.html';\n\n            this.$mdDialog.show({\n                parent: angular.element(document.body),\n                targetEvent: $event,\n                templateUrl: notebookDialogTemplateUrl,\n                locals: {\n                    notebookFilters: notebookFilters,\n                    notebookTemplateUrl: notebookTemplateUrl,\n                    componentController: componentController\n                },\n                controller: NotebookDialogController\n            });\n            function NotebookDialogController($scope, $mdDialog, componentController) {\n                $scope.notebookFilters = notebookFilters;\n                $scope.notebookFilter = notebookFilters[0].name;\n                $scope.notebookTemplateUrl = notebookTemplateUrl;\n                $scope.componentController = componentController;\n                $scope.closeDialog = function () {\n                    $mdDialog.hide();\n                }\n            }\n        }));\n\n        // capture notebook open/close events\n        this.$mdComponentRegistry.when('notebook').then(function(it){\n            this.$scope.$watch(function() {\n                return it.isOpen();\n            }, function(isOpenNewValue, isOpenOldValue) {\n                if (isOpenNewValue !== isOpenOldValue) {\n                    var currentNode = this.StudentDataService.getCurrentNode();\n                    this.NotebookService.saveNotebookToggleEvent(isOpenNewValue, currentNode);\n                }\n            });\n        }.bind(this));\n    }\n}\n\n\nThemeController.$inject = [\n    '$scope',\n    'ConfigService',\n    'ProjectService',\n    'StudentDataService',\n    'NotebookService',\n    'SessionService',\n    '$mdDialog',\n    '$mdToast',\n    '$mdComponentRegistry'\n];\n\n/*\nangular.module('vle').controller('NavItemController', new NavItemController($scope, $element, ProjectService, StudentDataService));\nangular.module('vle').controller('StepToolsCtrl', new StepToolsCtrl());\nangular.module('vle').controller('NodeStatusIconCtrl', new NodeStatusIconCtrl());\nangular.module('vle').controller('ProjectStatusController', new ProjectStatusController());\nangular.module('vle').controller('ThemeController', new ThemeController());\n*/\n\n//angular.module('vle').controller('NavItemController', NavItemController);\n//angular.module('vle').controller('StepToolsCtrl', StepToolsCtrl);\n//angular.module('vle').controller('NodeStatusIconCtrl', NodeStatusIconCtrl);\n//angular.module('vle').controller('ProjectStatusController', ProjectStatusController);\n//angular.module('vle').controller('ThemeController', ThemeController);\n\n//angular.module('vle').controller('ThemeController', ThemeController);\n\nexport default ThemeController;"]}