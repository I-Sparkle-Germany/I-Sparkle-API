<link rel="stylesheet" href="wise5/vendor/jquery-ui/themes/base/jquery-ui.min.css"><!-- TODO: remove when jquery-ui dep is removed -->
<link rel="stylesheet" href="wise5/vle/themes/default/style/css/vle.css">

<style>
    #prev {
        height: 36px;
        bottom: 0px;
        position: absolute;
        left: 0px;
        z-index: 1;
    }

    #next {
        height: 36px;
        bottom: 0px;
        position: absolute;
        right: 0px;
        z-index: 1;
    }
    /* layout1 = left nav */
    #node.layout1 {
        position: absolute;
        right: 5px;
        width: 80%;
        height: 600px;
    }

    #navigation.layout1 {
        position: absolute;
        left: 5px;
        width: 20%;
        height: 600px;
    }

    /* layout2 = right nav */
    #node.layout2 {
        position: absolute;
        left: 5px;
        width: 80%;
        height: 600px;
    }

    #navigation.layout2 {
        position: absolute;
        right: 5px;
        width: 20%;
        height: 600px;
    }

    /* layout3 = project full screen */
    #prev.layout3, #next.layout3 {
        display:none;
    }

    #node.layout3 {
        display: none;
    }

    /*#navigation.layout3 {
        position: absolute;
        width: 100%;
        height: 600px;
    }*/

    /* layout4 = node full screen */
    #node.layout4 {
        position: absolute;
        width: 100%;
        height: 600px;
    }

    #navigation.layout4 {
        display: none;
    }

    #showNavigationButton {
        width: 125px;
        position: absolute;
        right: 200px;
        top: 0px;
    }


    #portfolioOpenButton {
        position: absolute;
        right: 325px;
        top: 0px;
    }

    #portfolio {
        position: absolute;
        right: 0px;
        top: 0px;
        min-width: 500px;
        min-height: 0px;
        max-width: 500px;
        max-height: 1000px;
        border: 3px solid black;
        /*overflow: auto; setting this will make draggable items disappear once they're dragged out of portfolio div */
        /*resize: both;*/
        background-color: aliceblue;
    }

    #closePortfolio {
        position: absolute;
        right: 0px;
        top: 0px;
        font-weight: bold;
        width: initial;
    }
</style>

<style>
    {{vleController.projectStyle}}
</style>

<header>
    <md-toolbar class="l-header md-whiteframe-z1">
        <div class="md-toolbar-tools">
            <img src="wise5/images/WISE-logo-1b8ca8.svg" alt="WISE Logo" class="logo md-button md-icon-button" />
            <h3>
                <span>{{vleController.projectName}}</span>
            </h3>
            <span flex></span>
            <md-menu md-position-mode="target-right target">
                <md-button aria-label="Open exit menu" class="md-icon-button" ng-click="$mdOpenMenu()">
                    <md-icon md-menu-origin> power_settings_new </md-icon>
                </md-button>
                <md-menu-content width="4">
                    <md-menu-item>
                        <md-button ng-click="vleController.goHome()">
                            <md-icon md-menu-align-target> home </md-icon>
                            <p>Exit to Home</p>
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-click="vleController.logOut()">
                            <md-icon> exit_to_app </md-icon>
                            <p>Sign Out</p>
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </div>
    </md-toolbar>
</header>


<main role="main" data-drop="true"
      jqyoui-droppable="{onDrop: 'vleController.portfolioDropCallback()'}"
      ng-mousemove='vleController.mouseMoved()' class="md-padding l-main">
    <span ng-if="vleController.currentNode"> CurrentNode:
        "{{vleController.currentNode.title}}"
        ({{vleController.currentNode.type}}, {{vleController.currentNode.id}})
    </span>
    <span ng-if="vleController.mode"> Current Mode:
    {{vleController.mode}} </span>

    <select ng-model="vleController.layoutState"
            ng-options="layoutState for layoutState in vleController.layoutStates"
            ng-change="vleController.updateLayout()">
    </select>
    <hr/>
    <div id="globalTools">
        <button ng-repeat="globalTool in vleController.globalTools"
                ng-click="vleController.globalToolButtonClicked(globalTool)">{{globalTool}}</button>
    </div>

    <div id="prev" class={{vleController.layoutState}} ng-click="vleController.goToPrevNode()">Prev</div>
    <div id="next" class={{vleController.layoutState}} ng-click="vleController.goToNextNode()">Next</div>
    <div ui-view='navigationView'></div>
    <div ui-view='nodeView'></div>
    <br/>
    <button id='showNavigationButton' ng-click='vleController.showNavigation()'>Show Navigation</button>
    <div ng-switch on='vleController.isPortfolioVisible'>
        <div ng-switch-when='true'
             id='portfolio'
             data-drag='true'
             data-jqyoui-options="{}"
             jqyoui-draggable="{animate:true, placeholder: 'keep', onStart:'vleController.portfolioDragStartCallback()'}">
            <button id='closePortfolio' ng-click='vleController.hidePortfolio()'>X</button>
            <div ng-include="'wise5/vle/themes/' + vleController.theme + '/portfolio.html'"></div>
        </div>
        <div ng-switch-when='false'>
            <button id='portfolioOpenButton' ng-click='vleController.showPortfolio()'>Open Portfolio</button>
        </div>
    </div>
</main>
<footer class="l-footer md-whiteframe-z2" flex>
    footer
</footer>